<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>í‡´ì§ê¸ˆÂ·í‡´ì§ì†Œë“ì„¸ ì™„ì „ ê³„ì‚°ê¸° - KFPC</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #e8f5e9 0%, #e3f2fd 100%);
            min-height: 100vh;
            padding: 1rem;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 2rem;
            font-weight: 900;
            color: #2e7d32;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 1rem;
            letter-spacing: 2px;
        }

        .header {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .page-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 3px solid #43a047;
        }

        .info-box {
            background: #e8f5e9;
            border-left: 4px solid #43a047;
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
        }

        .info-box p {
            color: #2e7d32;
            font-size: 0.85rem;
            line-height: 1.5;
            margin: 0.25rem 0;
        }

        .law-reference {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 0.75rem;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
            font-size: 0.8rem;
            color: #e65100;
        }

        .warning-badge {
            display: inline-block;
            background: #f57c00;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .form-table {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .section-header {
            background: linear-gradient(135deg, #43a047 0%, #2e7d32 100%);
            color: white;
            padding: 1rem 1.5rem;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .form-row {
            display: grid;
            grid-template-columns: 250px 1fr;
            border-bottom: 1px solid #e0e0e0;
            min-height: 60px;
        }

        .form-label {
            background: #f8f9fa;
            padding: 1rem;
            display: flex;
            align-items: center;
            font-weight: 600;
            color: #333;
            border-right: 1px solid #e0e0e0;
        }

        .form-label.required::before {
            content: '*';
            color: #d32f2f;
            margin-right: 0.25rem;
            font-weight: 700;
        }

        .form-content {
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .input-field {
            padding: 0.5rem 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 0.5rem;
            font-size: 0.95rem;
            transition: all 0.3s;
        }

        .input-field:focus {
            outline: none;
            border-color: #43a047;
            box-shadow: 0 0 0 3px rgba(67,160,71,0.1);
        }

        .input-number {
            width: 200px;
            text-align: right;
        }

        .input-date {
            width: 150px;
        }

        select.input-field {
            cursor: pointer;
            background: white;
        }

        .unit {
            color: #666;
            font-size: 0.9rem;
        }

        .help-text {
            font-size: 0.85rem;
            color: #666;
            line-height: 1.8;
            margin-top: 0.5rem;
            width: 100%;
        }

        /* ë²•ë ¹ ì¡°í•­ ìŠ¤íƒ€ì¼ - help-text ì•ˆì— ìˆì„ ë•Œ */
        .help-text > .law-reference,
        .help-text .law-reference {
            background-color: #fff8e1;
            border-left: 3px solid #ffb74d;
            padding: 0.5rem 0.75rem;
            border-radius: 0.3rem;
            margin: 0.75rem 0 0.25rem 0;
            font-size: 0.75rem;
            color: #ef6c00;
            display: block;
            line-height: 1.5;
        }

        .tooltip-icon {
            display: inline-block;
            width: 18px;
            height: 18px;
            background: #43a047;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 18px;
            font-size: 0.75rem;
            font-weight: 700;
            cursor: help;
            margin-left: 0.25rem;
        }

        .btn-primary {
            padding: 0.6rem 1.5rem;
            background: #43a047;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .btn-primary:hover {
            background: #2e7d32;
            transform: translateY(-1px);
        }

        .btn-secondary {
            padding: 0.6rem 1.5rem;
            background: #f5f5f5;
            color: #333;
            border: 1px solid #ddd;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .calculate-btn {
            width: 100%;
            padding: 1.2rem;
            background: linear-gradient(135deg, #43a047 0%, #1b5e20 100%);
            color: white;
            border: none;
            border-radius: 0.75rem;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 2rem;
            box-shadow: 0 4px 15px rgba(67,160,71,0.3);
            transition: all 0.3s;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(67,160,71,0.4);
        }

        .result-summary {
            background: linear-gradient(135deg, #43a047 0%, #1b5e20 100%);
            border-radius: 1rem;
            box-shadow: 0 4px 20px rgba(67,160,71,0.3);
            padding: 2rem;
            color: white;
            margin: 1.5rem 0;
        }

        .result-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            opacity: 0.9;
        }

        .result-amount {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
        }

        .result-note {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .detail-card {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            margin-bottom: 1.5rem;
        }

        .detail-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #e0e0e0;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid #f5f5f5;
        }

        .detail-row.total {
            font-weight: 700;
            font-size: 1.15rem;
            border-top: 2px solid #e0e0e0;
            margin-top: 0.5rem;
            padding-top: 1rem;
        }

        .detail-label {
            color: #555;
        }

        .detail-value {
            font-weight: 600;
            color: #43a047;
        }

        .explanation {
            background: #e8f5e9;
            border-left: 3px solid #43a047;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0.5rem;
        }

        .explanation-title {
            font-weight: 700;
            color: #2e7d32;
            margin-bottom: 0.5rem;
        }

        .explanation-text {
            color: #388e3c;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .warning-box {
            background: #fff8e1;
            border: 2px solid #ffd54f;
            border-radius: 0.75rem;
            padding: 1.25rem;
            margin-top: 1.5rem;
        }

        .warning-box strong {
            color: #f57f17;
            display: block;
            margin-bottom: 0.5rem;
        }

        .warning-box p {
            color: #f57f17;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            -webkit-overflow-scrolling: touch;
        }

        .modal-header {
            font-size: 1.5rem;
            font-weight: 700;
            color: #43a047;
            margin-bottom: 1rem;
        }

        .modal-body {
            color: #333;
            line-height: 1.8;
        }

        .modal-body h3 {
            color: #43a047;
            margin: 1.5rem 0 0.75rem 0;
            font-size: 1.1rem;
        }

        .modal-body ul {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .modal-body li {
            margin-bottom: 0.5rem;
        }

        .modal-btn {
            width: 100%;
            padding: 1rem;
            background: #43a047;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 1.5rem;
        }

        .chart-container {
            margin: 1.5rem 0;
            padding: 1.5rem;
            border-radius: 0.75rem;
        }

        .footer {
            text-align: center;
            margin-top: 2rem;
            padding: 1.5rem;
            color: #666;
            font-size: 0.85rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            padding: 2rem 0;
        }

        @media (max-width: 768px) {
            body {
                padding: 0.5rem;
            }

            .logo {
                font-size: 1.5rem;
            }

            .header {
                padding: 1.5rem;
            }

            .page-title {
                font-size: 1.4rem;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .form-label {
                border-right: none;
                border-bottom: 1px solid #e0e0e0;
            }

            .input-number {
                width: 100%;
            }

            .result-amount {
                font-size: 2rem;
            }

            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- ì‚¬ìš© ê°€ì´ë“œ ëª¨ë‹¬ -->
    <div id="guideModal" class="modal active">
        <div class="modal-content">
            <div class="modal-header">ğŸ’¼ í‡´ì§ê¸ˆÂ·í‡´ì§ì†Œë“ì„¸ ì™„ì „ ê³„ì‚°ê¸° ì‚¬ìš© ê°€ì´ë“œ</div>
            <div class="modal-body">
                <p><strong>í™˜ì˜í•©ë‹ˆë‹¤!</strong> ì´ ê³„ì‚°ê¸°ëŠ” 2025ë…„ í˜„í–‰ ë²•ë ¹ì˜ ëª¨ë“  ê·œì •ì„ ë°˜ì˜í•œ ì™„ì „íŒì…ë‹ˆë‹¤.</p>
                
                <h3>âœ¨ ì™„ì „íŒì˜ íŠ¹ì§•</h3>
                <ul>
                    <li>âœ… í‡´ì§ê¸‰ì—¬ë³´ì¥ë²• ì œ8ì¡°ì— ë”°ë¥¸ ì •í™•í•œ ê³„ì‚°</li>
                    <li>âœ… ì†Œë“ì„¸ë²• ì œ22ì¡°, ì œ48ì¡° ì ìš© (ê·¼ì†ì—°ìˆ˜ê³µì œ)</li>
                    <li>âœ… í™˜ì‚°ê¸‰ì—¬ ë° í™˜ì‚°ê¸‰ì—¬ë³„ ê³µì œ (ì†Œë“ì„¸ë²• ì‹œí–‰ë ¹ ì œ40ì¡°)</li>
                    <li>âœ… 2025ë…„ ì¡°ì„¸íŠ¹ë¡€ì œí•œë²• ì œ88ì¡°ì˜4 ê°ë©´ 60% ì ìš©</li>
                    <li>âœ… ì§€ë°©ì†Œë“ì„¸ë²• ì œ3ì¡°ì— ë”°ë¥¸ ì§€ë°©ì†Œë“ì„¸ 10%</li>
                    <li>âœ… ì¤‘ê°„ì •ì‚° í‡´ì§ê¸ˆ ì°¨ê° (ê·¼ë¡œìí‡´ì§ê¸‰ì—¬ ë³´ì¥ë²• ì œ8ì¡°)</li>
                    <li>âœ… ëª…ì˜ˆí‡´ì§ ìœ„ë¡œê¸ˆ ë¹„ê³¼ì„¸ í•œë„ (ì†Œë“ì„¸ë²• ì œ12ì¡°)</li>
                </ul>
                
                <h3>ğŸ’¡ ì…ë ¥ ìˆœì„œ</h3>
                <ul>
                    <li><strong>1ë‹¨ê³„:</strong> ì…ì‚¬ì¼, í‡´ì‚¬ì¼ ì…ë ¥</li>
                    <li><strong>2ë‹¨ê³„:</strong> í‡´ì§ ì „ 3ê°œì›” ê¸‰ì—¬ ì…ë ¥ (í‰ê· ì„ê¸ˆ ê³„ì‚°)</li>
                    <li><strong>3ë‹¨ê³„:</strong> ì¤‘ê°„ì •ì‚° í‡´ì§ê¸ˆì´ ìˆë‹¤ë©´ ì…ë ¥</li>
                    <li><strong>4ë‹¨ê³„:</strong> ëª…ì˜ˆí‡´ì§ ìœ„ë¡œê¸ˆì´ ìˆë‹¤ë©´ ì…ë ¥</li>
                </ul>

                <h3>ğŸ“‹ í‡´ì§ê¸ˆ ê³„ì‚° ê³µì‹</h3>
                <ul>
                    <li><strong>ê·¼ë¡œìí‡´ì§ê¸‰ì—¬ ë³´ì¥ë²• ì œ8ì¡°:</strong> 1ì¼ í‰ê· ì„ê¸ˆ Ã— 30ì¼ Ã— (ì¬ì§ì¼ìˆ˜ Ã· 365)</li>
                    <li>1ë…„ ë¯¸ë§Œ ê·¼ë¬´ìë„ ë¹„ë¡€ ì§€ê¸‰</li>
                    <li>í‰ê· ì„ê¸ˆ = í‡´ì§ ì „ 3ê°œì›” ê¸‰ì—¬ ì´ì•¡ Ã· 3ê°œì›” ì¼ìˆ˜ (ì•½ 92ì¼)</li>
                </ul>

                <h3>âš ï¸ ì¤‘ìš” ì‚¬í•­</h3>
                <ul>
                    <li>ëª¨ë“  ê¸ˆì•¡ì€ <strong>ì›í™”(â‚©)</strong> ê¸°ì¤€ì…ë‹ˆë‹¤.</li>
                    <li>ìë™ìœ¼ë¡œ ì²œë‹¨ìœ„ ì½¤ë§ˆê°€ í‘œì‹œë©ë‹ˆë‹¤.</li>
                    <li><strong>ìˆ«ì ì…ë ¥ í•„ë“œëŠ” ëª¨ë°”ì¼ì—ì„œ ìˆ«ì í‚¤íŒ¨ë“œê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</strong></li>
                    <li>í•„ìˆ˜ ì…ë ¥ í•­ëª©ì—ëŠ” <strong style="color: #d32f2f;">*</strong> í‘œì‹œê°€ ìˆìŠµë‹ˆë‹¤.</li>
                    <li>2025ë…„ í‡´ì§ì†Œë“ì„¸ëŠ” 60% ê°ë©´ì´ ì ìš©ë©ë‹ˆë‹¤.</li>
                    <li>ì¤‘ê°„ì •ì‚° í‡´ì§ê¸ˆì€ ê³µì œë˜ë©°, ê·¼ì†ì—°ìˆ˜ ê³„ì‚°ì‹œ ì°¨ê°ë©ë‹ˆë‹¤.</li>
                </ul>

                <p style="margin-top: 1.5rem; color: #d32f2f; font-weight: 600;">
                    â€» ì •í™•í•œ ê¸ˆì•¡ ì‚°ì •ì€ ë…¸ë¬´ì‚¬ ë“± ì „ë¬¸ê°€ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
                </p>
            </div>
            <button class="modal-btn" onclick="closeGuide()">í™•ì¸í•˜ê³  ì‹œì‘í•˜ê¸°</button>
        </div>
    </div>

    <div class="container">
        <!-- ë¡œê³  -->
        <div class="logo">KFPC</div>

        <!-- í—¤ë” -->
        <div class="header">
            <h1 class="page-title">
                í‡´ì§ê¸ˆÂ·í‡´ì§ì†Œë“ì„¸ ì™„ì „ ê³„ì‚°ê¸°
                <span class="warning-badge">2025ë…„ ë²•ë ¹ ì¤€ìˆ˜</span>
            </h1>
            <div class="info-box">
                <p>âœ… 2025ë…„ í˜„í–‰ ë²•ë ¹ 100% ë°˜ì˜ | í‡´ì§ì†Œë“ì„¸ 60% ê°ë©´ ì ìš© | ì •í™•í•œ ê³„ì‚°</p>
            </div>
            <div class="law-reference">
                ğŸ“œ ë²•ì  ê·¼ê±°: ê·¼ë¡œìí‡´ì§ê¸‰ì—¬ ë³´ì¥ë²• ì œ8ì¡°, ì†Œë“ì„¸ë²• ì œ22ì¡°Â·ì œ48ì¡°, ì¡°ì„¸íŠ¹ë¡€ì œí•œë²• ì œ88ì¡°ì˜4
            </div>
        </div>

        <!-- ê¸°ë³¸ ì •ë³´ -->
        <div class="form-table">
            <div class="section-header">ğŸ“… ê¸°ë³¸ ì •ë³´</div>
            
            <div class="form-row">
                <div class="form-label required">ì…ì‚¬ì¼</div>
                <div class="form-content">
                    <input type="date" id="hireDate" class="input-field input-date">
                    <div class="help-text">
                        íšŒì‚¬ì— ì…ì‚¬í•œ ë‚ ì§œ<br>
                        <span class="law-reference">ê·¼ë¡œìí‡´ì§ê¸‰ì—¬ ë³´ì¥ë²• ì œ8ì¡° ì œ1í•­: ê³„ì†ê·¼ë¡œê¸°ê°„ 1ë…„ì— ëŒ€í•˜ì—¬ 30ì¼ë¶„ ì´ìƒì˜ í‰ê· ì„ê¸ˆ</span>
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-label required">í‡´ì‚¬ì¼</div>
                <div class="form-content">
                    <input type="date" id="retireDate" class="input-field input-date">
                    <div class="help-text">íšŒì‚¬ì—ì„œ í‡´ì‚¬í•˜ëŠ” ë‚ ì§œ</div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-label">ì¬ì§ì¼ìˆ˜</div>
                <div class="form-content">
                    <input type="text" id="workDays" class="input-field input-number" readonly style="background: #f5f5f5;">
                    <span class="unit">ì¼</span>
                    <div class="help-text">ì…ì‚¬ì¼ë¶€í„° í‡´ì‚¬ì¼ê¹Œì§€ì˜ ì¼ìˆ˜ (ìë™ ê³„ì‚°)</div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-label">ê·¼ì†ì—°ìˆ˜</div>
                <div class="form-content">
                    <input type="text" id="workYears" class="input-field input-number" readonly style="background: #f5f5f5;">
                    <span class="unit">ë…„</span>
                    <div class="help-text">ì¬ì§ì¼ìˆ˜ Ã· 365 (ìë™ ê³„ì‚°)</div>
                </div>
            </div>
        </div>

        <!-- í‰ê· ì„ê¸ˆ ê³„ì‚° -->
        <div class="form-table">
            <div class="section-header">ğŸ’° í‰ê· ì„ê¸ˆ ê³„ì‚° (í‡´ì§ ì „ 3ê°œì›”)</div>

            <div class="form-row">
                <div class="form-label required">í‡´ì§ ì „ 3ê°œì›” ê¸‰ì—¬ ì´ì•¡</div>
                <div class="form-content">
                    <input type="tel" id="totalSalary" class="input-field input-number" value="0">
                    <span class="unit">ì›</span>
                    <div class="help-text">
                        <strong>í‡´ì§ì¼ ì´ì „ 3ê°œì›”ê°„ ì§€ê¸‰ëœ ì„ê¸ˆ ì´ì•¡</strong><br>
                        í¬í•¨ í•­ëª©: ê¸°ë³¸ê¸‰, ìƒì—¬ê¸ˆ, ìˆ˜ë‹¹(ì‹ëŒ€, êµí†µë¹„, ê°€ì¡±ìˆ˜ë‹¹ ë“±), ì„±ê³¼ê¸‰<br>
                        ì œì™¸ í•­ëª©: í‡´ì§ê¸ˆ, ê²½ì¡°ì‚¬ë¹„, ì‹¤ë¹„ë³€ìƒ ì„±ê²©ì˜ ì§€ê¸‰ì•¡<br>
                        ì˜ˆì‹œ: ì›” 300ë§Œì› Ã— 3ê°œì›” = 9,000,000ì›<br>
                        <span class="law-reference">ê·¼ë¡œê¸°ì¤€ë²• ì œ2ì¡°: í‰ê· ì„ê¸ˆì´ë€ ì´ë¥¼ ì‚°ì •í•˜ì—¬ì•¼ í•  ì‚¬ìœ ê°€ ë°œìƒí•œ ë‚  ì´ì „ 3ê°œì›” ë™ì•ˆì— ê·¸ ê·¼ë¡œìì—ê²Œ ì§€ê¸‰ëœ ì„ê¸ˆì˜ ì´ì•¡ì„ ê·¸ ê¸°ê°„ì˜ ì´ì¼ìˆ˜ë¡œ ë‚˜ëˆˆ ê¸ˆì•¡</span>
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-label">1ì¼ í‰ê· ì„ê¸ˆ</div>
                <div class="form-content">
                    <input type="text" id="avgDailyWage" class="input-field input-number" readonly style="background: #f5f5f5;">
                    <span class="unit">ì›</span>
                    <div class="help-text">3ê°œì›” ê¸‰ì—¬ ì´ì•¡ Ã· 92ì¼ (3ê°œì›” ì•½ 92ì¼ ê¸°ì¤€)</div>
                </div>
            </div>
        </div>

        <!-- í‡´ì§ê¸ˆ -->
        <div class="form-table">
            <div class="section-header">ğŸ í‡´ì§ê¸ˆ</div>

            <div class="form-row">
                <div class="form-label">í‡´ì§ê¸ˆ (ì„¸ì „)</div>
                <div class="form-content">
                    <input type="text" id="severancePay" class="input-field input-number" readonly style="background: #f5f5f5;">
                    <span class="unit">ì›</span>
                    <div class="help-text">
                        <strong>1ì¼ í‰ê· ì„ê¸ˆ Ã— 30ì¼ Ã— (ì¬ì§ì¼ìˆ˜ Ã· 365)</strong><br>
                        1ë…„ ë¯¸ë§Œ ê·¼ë¬´ì‹œì—ë„ ë¹„ë¡€ ì§€ê¸‰ë©ë‹ˆë‹¤.<br>
                        <span class="law-reference">ê·¼ë¡œìí‡´ì§ê¸‰ì—¬ ë³´ì¥ë²• ì œ8ì¡°: ê³„ì†ê·¼ë¡œê¸°ê°„ 1ë…„ì— ëŒ€í•˜ì—¬ 30ì¼ë¶„ ì´ìƒì˜ í‰ê· ì„ê¸ˆì„ í‡´ì§ê¸ˆìœ¼ë¡œ ì§€ê¸‰</span>
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-label">ì¤‘ê°„ì •ì‚° í‡´ì§ê¸ˆ
                    <span class="tooltip-icon" title="ê³¼ê±°ì— ì¤‘ê°„ì •ì‚°ìœ¼ë¡œ ìˆ˜ë ¹í•œ í‡´ì§ê¸ˆ">?</span>
                </div>
                <div class="form-content">
                    <input type="tel" id="midSeverance" class="input-field input-number" value="0">
                    <span class="unit">ì›</span>
                    <div class="help-text">
                        ê³¼ê±°ì— ì¤‘ê°„ì •ì‚°ìœ¼ë¡œ ì§€ê¸‰ë°›ì€ í‡´ì§ê¸ˆ (ìˆëŠ” ê²½ìš°ë§Œ ì…ë ¥)<br>
                        <span class="law-reference">ê·¼ë¡œìí‡´ì§ê¸‰ì—¬ ë³´ì¥ë²• ì œ8ì¡° ì œ2í•­: ì¤‘ê°„ì •ì‚°í•œ ê²½ìš° ê·¸ ì´í›„ì˜ í‡´ì§ê¸ˆ ì‚°ì • ì‹œ ì°¨ê°</span>
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-label">ì¤‘ê°„ì •ì‚° ê·¼ì†ì—°ìˆ˜
                    <span class="tooltip-icon" title="ì¤‘ê°„ì •ì‚° ëŒ€ìƒì´ ëœ ê·¼ì†ì—°ìˆ˜">?</span>
                </div>
                <div class="form-content">
                    <input type="tel" id="midYears" class="input-field input-number" value="0" step="0.01">
                    <span class="unit">ë…„</span>
                    <div class="help-text">
                        ì¤‘ê°„ì •ì‚° ëŒ€ìƒ ê·¼ì†ì—°ìˆ˜ (í‡´ì§ì†Œë“ì„¸ ê³„ì‚°ì‹œ ì°¨ê°)<br>
                        ì˜ˆ: 10ë…„ ê·¼ë¬´ í›„ 5ë…„ì°¨ì— ì¤‘ê°„ì •ì‚°í–ˆë‹¤ë©´ 5.00ë…„ ì…ë ¥
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-label">ìµœì¢… í‡´ì§ê¸ˆ</div>
                <div class="form-content">
                    <input type="text" id="finalSeverance" class="input-field input-number" readonly style="background: #f5f5f5;">
                    <span class="unit">ì›</span>
                    <div class="help-text">í‡´ì§ê¸ˆ - ì¤‘ê°„ì •ì‚° í‡´ì§ê¸ˆ</div>
                </div>
            </div>
        </div>

        <!-- ë¹„ê³¼ì„¸ í•­ëª© -->
        <div class="form-table">
            <div class="section-header">ğŸ“‹ ë¹„ê³¼ì„¸ í•­ëª©</div>

            <div class="form-row">
                <div class="form-label">ëª…ì˜ˆí‡´ì§ ìœ„ë¡œê¸ˆ
                    <span class="tooltip-icon" title="ëª…ì˜ˆí‡´ì§ì‹œ ë°›ëŠ” ìœ„ë¡œê¸ˆ">?</span>
                </div>
                <div class="form-content">
                    <input type="tel" id="honoraryPay" class="input-field input-number" value="0">
                    <span class="unit">ì›</span>
                    <div class="help-text">
                        <strong>ëª…ì˜ˆí‡´ì§ ìœ„ë¡œê¸ˆ ë¹„ê³¼ì„¸ í•œë„:</strong><br>
                        â€¢ ê·¼ì†ì—°ìˆ˜ 20ë…„ ì´ìƒ: ìµœëŒ€ 1ì–µì›<br>
                        â€¢ ê·¼ì†ì—°ìˆ˜ 10ë…„ ì´ìƒ: ìµœëŒ€ 8ì²œë§Œì›<br>
                        â€¢ ê·¼ì†ì—°ìˆ˜ 5ë…„ ì´ìƒ: ìµœëŒ€ 5ì²œë§Œì›<br>
                        <span class="law-reference">ì†Œë“ì„¸ë²• ì œ12ì¡° ì œ3í˜¸ ë°”ëª©: ê·¼ë¡œìê°€ ëª…ì˜ˆí‡´ì§ì´ë‚˜ ì¡°ê¸°í‡´ì§ì˜ ìš”ê±´ì„ ê°–ì¶”ì–´ í‡´ì§í•¨ìœ¼ë¡œì¨ ë°›ëŠ” ì†Œë“ìœ¼ë¡œì„œ ëŒ€í†µë ¹ë ¹ìœ¼ë¡œ ì •í•˜ëŠ” í•œë„ ë‚´ì˜ ê¸ˆì•¡</span>
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-label">ê¸°íƒ€ ë¹„ê³¼ì„¸ í‡´ì§ê¸ˆ
                    <span class="tooltip-icon" title="ë²•ë ¹ì— ë”°ë¥¸ ë¹„ê³¼ì„¸ í‡´ì§ê¸ˆ">?</span>
                </div>
                <div class="form-content">
                    <input type="tel" id="otherExempt" class="input-field input-number" value="0">
                    <span class="unit">ì›</span>
                    <div class="help-text">
                        ê³µë¬´ì›Â·êµ°ì¸ ë“± ë²•ë ¹ì— ë”°ë¥¸ ë¹„ê³¼ì„¸ í‡´ì§ê¸ˆ<br>
                        (í•´ë‹¹ì‚¬í•­ì´ ì—†ìœ¼ë©´ 0ì›)
                    </div>
                </div>
            </div>
        </div>

        <!-- ë²„íŠ¼ ì˜ì—­ -->
        <div class="action-buttons">
            <button type="button" class="btn-secondary" style="padding: 1rem 3rem;" onclick="resetForm()">ì´ˆê¸°í™”</button>
            <button type="button" class="calculate-btn" style="flex: 1; max-width: 400px; margin: 0;" onclick="calculate()">ğŸ’ í‡´ì§ê¸ˆÂ·ì„¸ê¸ˆ ê³„ì‚°í•˜ê¸°</button>
        </div>

        <!-- ê²°ê³¼ ì˜ì—­ -->
        <div id="resultSection" style="display: none;">
            <div class="result-summary">
                <div class="result-title">ğŸ’° ì‹¤ìˆ˜ë ¹ í‡´ì§ê¸ˆ</div>
                <div class="result-amount" id="netAmount">0 ì›</div>
                <div class="result-note">í‡´ì§ê¸ˆ - í‡´ì§ì†Œë“ì„¸ - ì§€ë°©ì†Œë“ì„¸</div>
            </div>

            <div class="explanation">
                <div class="explanation-title">ğŸ“Œ ê³„ì‚° ê²°ê³¼ ìš”ì•½</div>
                <div class="explanation-text" id="summaryText">
                </div>
            </div>

            <div class="detail-card">
                <div class="detail-title">ğŸ“Š ìƒì„¸ ê³„ì‚° ë‚´ì—­</div>
                <div id="detailContent"></div>
            </div>

            <div class="detail-card">
                <div class="detail-title">ğŸ“ˆ í‡´ì§ê¸ˆ êµ¬ì„±</div>
                <div class="chart-container">
                    <canvas id="severanceChart"></canvas>
                </div>
            </div>

            <div class="detail-card">
                <div class="detail-title">ğŸ“‹ í‡´ì§ì†Œë“ì„¸ ê³„ì‚° êµ¬ì¡°</div>
                <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                    <thead>
                        <tr style="background: #f5f5f5;">
                            <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #ddd;">ë‹¨ê³„</th>
                            <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #ddd;">ë‚´ìš©</th>
                            <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #ddd;">ë²•ì  ê·¼ê±°</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">1ë‹¨ê³„</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">í‡´ì§ì†Œë“ê¸ˆì•¡ = í‡´ì§ê¸ˆ - ë¹„ê³¼ì„¸</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee; font-size: 0.8rem;">ì†Œë“ì„¸ë²• ì œ22ì¡°</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">2ë‹¨ê³„</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">ê·¼ì†ì—°ìˆ˜ê³µì œ = 5ë…„ ì´í•˜ (ì—° 100ë§Œì›) + 5ë…„ ì´ˆê³¼ (ì—° 150ë§Œì›)</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee; font-size: 0.8rem;">ì†Œë“ì„¸ë²• ì œ48ì¡°</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">3ë‹¨ê³„</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">í™˜ì‚°ê¸‰ì—¬ = (í‡´ì§ì†Œë“ - ê·¼ì†ì—°ìˆ˜ê³µì œ) Ã— 12 Ã· ê·¼ì†ì—°ìˆ˜</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee; font-size: 0.8rem;">ì†Œë“ì„¸ë²• ì‹œí–‰ë ¹ ì œ40ì¡°</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">4ë‹¨ê³„</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">í™˜ì‚°ê¸‰ì—¬ë³„ ê³µì œ (êµ¬ê°„ë³„ ì°¨ë“±)</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee; font-size: 0.8rem;">ì†Œë“ì„¸ë²• ì‹œí–‰ë ¹ ì œ40ì¡°</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">5ë‹¨ê³„</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">ê³¼ì„¸í‘œì¤€ = í™˜ì‚°ê¸‰ì—¬ - í™˜ì‚°ê¸‰ì—¬ë³„ê³µì œ</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee; font-size: 0.8rem;">ì†Œë“ì„¸ë²• ì œ55ì¡°</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">6ë‹¨ê³„</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">í™˜ì‚°ì‚°ì¶œì„¸ì•¡ = ê³¼ì„¸í‘œì¤€ Ã— ì„¸ìœ¨ (6~45%)</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee; font-size: 0.8rem;">ì†Œë“ì„¸ë²• ì œ55ì¡°</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">7ë‹¨ê³„</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">ì‚°ì¶œì„¸ì•¡ = í™˜ì‚°ì‚°ì¶œì„¸ì•¡ Ã— ê·¼ì†ì—°ìˆ˜ Ã· 12</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee; font-size: 0.8rem;">ì†Œë“ì„¸ë²• ì‹œí–‰ë ¹ ì œ40ì¡°</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">8ë‹¨ê³„</td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee;"><strong style="color: #d32f2f;">2025ë…„ ê°ë©´ 60% ì ìš©</strong></td>
                            <td style="padding: 0.75rem; border-bottom: 1px solid #eee; font-size: 0.8rem;">ì¡°ì„¸íŠ¹ë¡€ì œí•œë²• ì œ88ì¡°ì˜4</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.75rem;">9ë‹¨ê³„</td>
                            <td style="padding: 0.75rem;">ì§€ë°©ì†Œë“ì„¸ = í‡´ì§ì†Œë“ì„¸ Ã— 10%</td>
                            <td style="padding: 0.75rem; font-size: 0.8rem;">ì§€ë°©ì„¸ë²• ì œ3ì¡°</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="warning-box">
            <strong>âš ï¸ ì¤‘ìš” ìœ ì˜ì‚¬í•­</strong>
            <p>
                â€¢ ë³¸ ê³„ì‚°ê¸°ëŠ” 2025ë…„ í˜„í–‰ ë²•ë ¹ì„ ê¸°ì¤€ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
                â€¢ 2025ë…„ í‡´ì§ì†Œë“ì„¸ ê°ë©´ìœ¨ 60%ê°€ ì ìš©ë©ë‹ˆë‹¤. (2023ë…„ 80% â†’ 2024ë…„ 70% â†’ 2025ë…„ 60%)<br>
                â€¢ í‰ê· ì„ê¸ˆ ê³„ì‚°ì‹œ ìƒì—¬ê¸ˆ, ìˆ˜ë‹¹ ë“±ì„ ëª¨ë‘ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.<br>
                â€¢ ì¤‘ê°„ì •ì‚° í‡´ì§ê¸ˆì€ ê·¼ì†ì—°ìˆ˜ ê³„ì‚°ì‹œ ì°¨ê°ë˜ë©°, ì„¸ê¸ˆ ê³„ì‚°ì— ì˜í–¥ì„ ì¤ë‹ˆë‹¤.<br>
                â€¢ ì •í™•í•œ ê¸ˆì•¡ ì‚°ì •ì„ ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ë…¸ë¬´ì‚¬ ë“± ì „ë¬¸ê°€ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.<br>
                â€¢ í‡´ì§ê¸ˆ ì§€ê¸‰ ê¸°í•œ: í‡´ì§ì¼ë¡œë¶€í„° 14ì¼ ì´ë‚´ (ê·¼ë¡œê¸°ì¤€ë²• ì œ36ì¡°)<br>
                â€¢ ë³¸ ê³„ì‚°ê¸°ëŠ” ì°¸ê³ ìš©ì´ë©°, ì‹¤ì œ ì„¸ì•¡ì€ ê°œì¸ì˜ ìƒí™©ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
        </div>

        <div class="footer">
            Copyright Â© 2025 KFPC Co., Ltd. All Rights Reserved.<br>
            ë³¸ ê³„ì‚°ê¸°ëŠ” êµìœ¡ ë° ì°¸ê³  ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
        </div>
    </div>

    <script>
        let severanceChart = null;

        function closeGuide() {
            document.getElementById('guideModal').classList.remove('active');
        }

        function formatNumber(num) {
            return Math.floor(num).toLocaleString('ko-KR');
        }

        // ì‹¤ì‹œê°„ ìˆ«ì í¬ë§·íŒ… (ì½¤ë§ˆ ìë™ ì¶”ê°€)
        function formatInputRealtime(input) {
            let cursorPos = input.selectionStart;
            let oldValue = input.value;
            
            let value = input.value.replace(/[^0-9.]/g, '');
            
            const parts = value.split('.');
            if (parts.length > 2) {
                value = parts[0] + '.' + parts.slice(1).join('');
            }
            
            if (value !== '') {
                if (value.includes('.')) {
                    const [intPart, decPart] = value.split('.');
                    const num = parseFloat(intPart);
                    if (!isNaN(num)) {
                        value = num.toLocaleString('ko-KR') + '.' + decPart;
                    }
                } else {
                    const num = parseFloat(value);
                    if (!isNaN(num)) {
                        value = num.toLocaleString('ko-KR');
                    }
                }
            }
            
            input.value = value;
            
            let commaChange = (value.slice(0, cursorPos).match(/,/g) || []).length - 
                             (oldValue.slice(0, cursorPos).match(/,/g) || []).length;
            input.setSelectionRange(cursorPos + commaChange, cursorPos + commaChange);
        }

        function restrictToNumbers(e) {
            const key = e.key;
            const ctrlKey = e.ctrlKey || e.metaKey;
            
            if (
                /^[0-9]$/.test(key) ||
                key === 'Backspace' ||
                key === 'Delete' ||
                key === 'Tab' ||
                key === 'ArrowLeft' ||
                key === 'ArrowRight' ||
                key === 'ArrowUp' ||
                key === 'ArrowDown' ||
                key === 'Home' ||
                key === 'End' ||
                (ctrlKey && (key === 'a' || key === 'c' || key === 'v' || key === 'x' || key === 'A' || key === 'C' || key === 'V' || key === 'X'))
            ) {
                return true;
            }
            
            if (key === '.' && e.target.id === 'midYears') {
                return true;
            }
            
            e.preventDefault();
            return false;
        }

        function handlePaste(e) {
            e.preventDefault();
            const pastedText = (e.clipboardData || window.clipboardData).getData('text');
            const numericValue = pastedText.replace(/[^0-9.]/g, '');
            
            const parts = numericValue.split('.');
            let cleanValue = parts[0];
            if (parts.length > 1 && e.target.id === 'midYears') {
                cleanValue += '.' + parts[1];
            }
            
            document.execCommand('insertText', false, cleanValue);
        }

        function parseValue(value) {
            if (typeof value === 'string') {
                return parseFloat(value.replace(/,/g, '')) || 0;
            }
            return parseFloat(value) || 0;
        }

        function calculateWorkDays() {
            const hireDate = new Date(document.getElementById('hireDate').value);
            const retireDate = new Date(document.getElementById('retireDate').value);
            
            if (hireDate && retireDate && !isNaN(hireDate) && !isNaN(retireDate)) {
                if (retireDate < hireDate) {
                    alert('í‡´ì‚¬ì¼ì€ ì…ì‚¬ì¼ë³´ë‹¤ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤.');
                    document.getElementById('retireDate').value = '';
                    return;
                }
                
                const diffTime = Math.abs(retireDate - hireDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;
                const years = (diffDays / 365).toFixed(2);
                
                document.getElementById('workDays').value = formatNumber(diffDays);
                document.getElementById('workYears').value = years;
                
                calculateAvgWage();
            }
        }

        function calculateAvgWage() {
            const totalSalary = parseValue(document.getElementById('totalSalary').value);
            const avgDailyWage = Math.round(totalSalary / 92);
            document.getElementById('avgDailyWage').value = formatNumber(avgDailyWage);
            calculateSeverance();
        }

        function calculateSeverance() {
            const avgDailyWage = parseValue(document.getElementById('avgDailyWage').value);
            const workDays = parseValue(document.getElementById('workDays').value);
            
            const severancePay = Math.round(avgDailyWage * 30 * (workDays / 365));
            document.getElementById('severancePay').value = formatNumber(severancePay);
            
            const midSeverance = parseValue(document.getElementById('midSeverance').value);
            const finalSeverance = Math.max(0, severancePay - midSeverance);
            document.getElementById('finalSeverance').value = formatNumber(finalSeverance);
        }

        document.getElementById('hireDate').addEventListener('change', calculateWorkDays);
        document.getElementById('retireDate').addEventListener('change', calculateWorkDays);

        const numericFields = ['totalSalary', 'midSeverance', 'midYears', 'honoraryPay', 'otherExempt'];
        numericFields.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
                el.addEventListener('input', function(e) {
                    formatInputRealtime(this);
                    if (id === 'totalSalary') calculateAvgWage();
                    if (id === 'midSeverance') calculateSeverance();
                });
                
                el.addEventListener('keydown', restrictToNumbers);
                el.addEventListener('paste', handlePaste);
                
                el.addEventListener('focus', function() {
                    if (this.value === '0') {
                        this.value = '';
                    }
                });
                
                el.addEventListener('blur', function() {
                    if (this.value === '' || this.value === '.') {
                        this.value = '0';
                    }
                });
            }
        });

        function resetForm() {
            if (confirm('ì…ë ¥í•œ ë‚´ìš©ì„ ëª¨ë‘ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                location.reload();
            }
        }

        function calculate() {
            try {
                const workYears = parseFloat(document.getElementById('workYears').value) || 0;
                const severancePay = parseValue(document.getElementById('severancePay').value);
                const midSeverance = parseValue(document.getElementById('midSeverance').value);
                const midYears = parseFloat(parseValue(document.getElementById('midYears').value)) || 0;
                
                if (workYears <= 0 || severancePay <= 0) {
                    alert('ì…ì‚¬ì¼, í‡´ì‚¬ì¼, ê¸‰ì—¬ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (midYears > workYears) {
                    alert('ì¤‘ê°„ì •ì‚° ê·¼ì†ì—°ìˆ˜ëŠ” ì „ì²´ ê·¼ì†ì—°ìˆ˜ë³´ë‹¤ í´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                const honoraryPay = parseValue(document.getElementById('honoraryPay').value);
                const otherExempt = parseValue(document.getElementById('otherExempt').value);

                let honoraryExempt = 0;
                if (honoraryPay > 0) {
                    if (workYears >= 20) {
                        honoraryExempt = Math.min(honoraryPay, 100000000);
                    } else if (workYears >= 10) {
                        honoraryExempt = Math.min(honoraryPay, 80000000);
                    } else if (workYears >= 5) {
                        honoraryExempt = Math.min(honoraryPay, 50000000);
                    } else {
                        alert('ëª…ì˜ˆí‡´ì§ ìœ„ë¡œê¸ˆ ë¹„ê³¼ì„¸ëŠ” ê·¼ì†ì—°ìˆ˜ 5ë…„ ì´ìƒë¶€í„° ì ìš©ë©ë‹ˆë‹¤.');
                        honoraryExempt = 0;
                    }
                }

                const finalSeverance = Math.max(0, severancePay - midSeverance);
                const totalExempt = honoraryExempt + otherExempt;
                const taxableSeverance = Math.max(0, finalSeverance - totalExempt);
                const taxableYears = Math.max(1, workYears - midYears);

                let yearDeduction = 0;
                if (taxableYears <= 5) {
                    yearDeduction = Math.floor(taxableYears) * 1000000;
                } else {
                    yearDeduction = 5000000 + (Math.floor(taxableYears) - 5) * 1500000;
                }

                const afterDeduction = Math.max(0, taxableSeverance - yearDeduction);
                const convertedSalary = Math.round(afterDeduction * 12 / taxableYears);

                let convertedDeduction = 0;
                if (convertedSalary <= 8000000) {
                    convertedDeduction = convertedSalary;
                } else if (convertedSalary <= 70000000) {
                    convertedDeduction = 8000000 + (convertedSalary - 8000000) * 0.60;
                } else if (convertedSalary <= 100000000) {
                    convertedDeduction = 45200000 + (convertedSalary - 70000000) * 0.55;
                } else if (convertedSalary <= 300000000) {
                    convertedDeduction = 61700000 + (convertedSalary - 100000000) * 0.45;
                } else {
                    convertedDeduction = 151700000 + (convertedSalary - 300000000) * 0.35;
                }
                convertedDeduction = Math.round(convertedDeduction);

                const taxBase = Math.max(0, convertedSalary - convertedDeduction);

                let convertedTax = 0;
                if (taxBase <= 12000000) {
                    convertedTax = taxBase * 0.06;
                } else if (taxBase <= 46000000) {
                    convertedTax = taxBase * 0.15 - 1080000;
                } else if (taxBase <= 88000000) {
                    convertedTax = taxBase * 0.24 - 5220000;
                } else if (taxBase <= 150000000) {
                    convertedTax = taxBase * 0.35 - 14900000;
                } else if (taxBase <= 300000000) {
                    convertedTax = taxBase * 0.38 - 19400000;
                } else if (taxBase <= 500000000) {
                    convertedTax = taxBase * 0.40 - 27400000;
                } else if (taxBase <= 1000000000) {
                    convertedTax = taxBase * 0.42 - 47400000;
                } else {
                    convertedTax = taxBase * 0.45 - 97400000;
                }
                convertedTax = Math.round(convertedTax);

                const calculatedTax = Math.round(convertedTax * taxableYears / 12);
                const taxReduction = Math.round(calculatedTax * 0.60);
                const incomeTax = calculatedTax - taxReduction;
                const localTax = Math.round(incomeTax * 0.10);
                const totalTax = incomeTax + localTax;
                const netAmount = finalSeverance - totalTax;

                displayResults({
                    workYears, severancePay, midSeverance, finalSeverance,
                    honoraryPay, honoraryExempt, otherExempt, totalExempt,
                    taxableSeverance, taxableYears, yearDeduction,
                    convertedSalary, convertedDeduction, taxBase,
                    convertedTax, calculatedTax, taxReduction,
                    incomeTax, localTax, totalTax, netAmount
                });

            } catch (error) {
                alert('ê³„ì‚° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\nëª¨ë“  ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\n\nì˜¤ë¥˜: ' + error.message);
            }
        }

        function displayResults(r) {
            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('netAmount').textContent = formatNumber(r.netAmount) + ' ì›';
            
            let summary = `ì¬ì§ê¸°ê°„ ${r.workYears.toFixed(2)}ë…„ì— ëŒ€í•œ í‡´ì§ê¸ˆ ${formatNumber(r.severancePay)}ì›ì´ ì‚°ì¶œë˜ì—ˆìŠµë‹ˆë‹¤. `;
            
            if (r.midSeverance > 0) {
                summary += `ì¤‘ê°„ì •ì‚° ${formatNumber(r.midSeverance)}ì›ì„ ì°¨ê°í•˜ì—¬ ìµœì¢… í‡´ì§ê¸ˆì€ ${formatNumber(r.finalSeverance)}ì›ì…ë‹ˆë‹¤. `;
            }
            
            if (r.totalExempt > 0) {
                summary += `ë¹„ê³¼ì„¸ ${formatNumber(r.totalExempt)}ì›ì„ ì œì™¸í•˜ê³ , `;
            }
            
            summary += `ê³¼ì„¸ëŒ€ìƒ í‡´ì§ì†Œë“ ${formatNumber(r.taxableSeverance)}ì›ì— ëŒ€í•´ ê·¼ì†ì—°ìˆ˜ê³µì œ ${formatNumber(r.yearDeduction)}ì›ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤. `;
            summary += `í‡´ì§ì†Œë“ì„¸ ${formatNumber(r.incomeTax)}ì›(2025ë…„ 60% ê°ë©´ ì ìš©)ê³¼ ì§€ë°©ì†Œë“ì„¸ ${formatNumber(r.localTax)}ì›ì„ ì°¨ê°í•˜ì—¬, ìµœì¢… ì‹¤ìˆ˜ë ¹ì•¡ì€ ${formatNumber(r.netAmount)}ì›ì…ë‹ˆë‹¤.`;
            
            document.getElementById('summaryText').textContent = summary;

            let html = `
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: #43a047; margin-bottom: 1rem;">1ï¸âƒ£ í‡´ì§ê¸ˆ</h3>
                    <div class="detail-row"><span>í‡´ì§ê¸ˆ (ì„¸ì „)</span><span>${formatNumber(r.severancePay)} ì›</span></div>
            `;

            if (r.midSeverance > 0) {
                html += `<div class="detail-row"><span>(-) ì¤‘ê°„ì •ì‚° í‡´ì§ê¸ˆ</span><span>${formatNumber(r.midSeverance)} ì›</span></div>`;
            }

            html += `<div class="detail-row total"><span>ìµœì¢… í‡´ì§ê¸ˆ</span><span>${formatNumber(r.finalSeverance)} ì›</span></div>`;

            if (r.totalExempt > 0) {
                html += `
                    <div class="detail-row" style="background: #e8f5e9; margin-top: 0.5rem;">
                        <span style="color: #2e7d32;">(-) ë¹„ê³¼ì„¸ ê¸ˆì•¡</span>
                        <span style="color: #2e7d32;">${formatNumber(r.totalExempt)} ì›</span>
                    </div>
                `;
                if (r.honoraryExempt > 0) {
                    html += `<div class="detail-row" style="padding-left: 2rem;"><span>ëª…ì˜ˆí‡´ì§ ìœ„ë¡œê¸ˆ ë¹„ê³¼ì„¸</span><span>${formatNumber(r.honoraryExempt)} ì›</span></div>`;
                }
                if (r.otherExempt > 0) {
                    html += `<div class="detail-row" style="padding-left: 2rem;"><span>ê¸°íƒ€ ë¹„ê³¼ì„¸</span><span>${formatNumber(r.otherExempt)} ì›</span></div>`;
                }
            }

            html += `<div class="detail-row total"><span>ê³¼ì„¸ëŒ€ìƒ í‡´ì§ì†Œë“</span><span>${formatNumber(r.taxableSeverance)} ì›</span></div></div>`;

            html += `
                <div style="margin-bottom: 2rem;">
                    <h3 style="color: #43a047; margin-bottom: 1rem;">2ï¸âƒ£ í‡´ì§ì†Œë“ì„¸ ê³„ì‚°</h3>
                    <div class="detail-row"><span>ê³¼ì„¸ëŒ€ìƒ ê·¼ì†ì—°ìˆ˜</span><span>${r.taxableYears.toFixed(2)} ë…„</span></div>
                    <div class="detail-row"><span>ê·¼ì†ì—°ìˆ˜ê³µì œ (ì†Œë“ì„¸ë²• ì œ48ì¡°)</span><span>${formatNumber(r.yearDeduction)} ì›</span></div>
                    <div class="detail-row"><span>í™˜ì‚°ê¸‰ì—¬ (ì‹œí–‰ë ¹ ì œ40ì¡°)</span><span>${formatNumber(r.convertedSalary)} ì›</span></div>
                    <div class="detail-row"><span>í™˜ì‚°ê¸‰ì—¬ë³„ ê³µì œ (ì‹œí–‰ë ¹ ì œ40ì¡°)</span><span>${formatNumber(r.convertedDeduction)} ì›</span></div>
                    <div class="detail-row total"><span>ê³¼ì„¸í‘œì¤€ (ì†Œë“ì„¸ë²• ì œ55ì¡°)</span><span>${formatNumber(r.taxBase)} ì›</span></div>
                    <div class="detail-row"><span>í™˜ì‚°ì‚°ì¶œì„¸ì•¡</span><span>${formatNumber(r.convertedTax)} ì›</span></div>
                    <div class="detail-row"><span>ì‚°ì¶œì„¸ì•¡ (Ã—${r.taxableYears.toFixed(2)}ë…„Ã·12)</span><span>${formatNumber(r.calculatedTax)} ì›</span></div>
                    <div class="detail-row" style="background: #e3f2fd;">
                        <span style="color: #1976d2; font-weight: 700;">(-) 2025ë…„ ê°ë©´ 60% (ì¡°íŠ¹ë²• ì œ88ì¡°ì˜4)</span>
                        <span style="color: #1976d2; font-weight: 700;">${formatNumber(r.taxReduction)} ì›</span>
                    </div>
                    <div class="detail-row total"><span>í‡´ì§ì†Œë“ì„¸</span><span>${formatNumber(r.incomeTax)} ì›</span></div>
                    <div class="detail-row"><span>ì§€ë°©ì†Œë“ì„¸ 10% (ì§€ë°©ì„¸ë²• ì œ3ì¡°)</span><span>${formatNumber(r.localTax)} ì›</span></div>
                </div>

                <div>
                    <h3 style="color: #43a047; margin-bottom: 1rem;">3ï¸âƒ£ ìµœì¢… ì‹¤ìˆ˜ë ¹ì•¡</h3>
                    <div class="detail-row"><span>ìµœì¢… í‡´ì§ê¸ˆ</span><span>${formatNumber(r.finalSeverance)} ì›</span></div>
                    <div class="detail-row"><span>(-) ì´ ì„¸ê¸ˆ</span><span>${formatNumber(r.totalTax)} ì›</span></div>
                    <div class="detail-row total" style="background: #e8f5e9;">
                        <span style="color: #2e7d32; font-weight: 900;">ì‹¤ìˆ˜ë ¹ì•¡</span>
                        <span style="color: #2e7d32; font-weight: 900;">${formatNumber(r.netAmount)} ì›</span>
                    </div>
                </div>
            `;

            document.getElementById('detailContent').innerHTML = html;
            drawChart(r);

            setTimeout(() => {
                document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        function drawChart(r) {
            const ctx = document.getElementById('severanceChart').getContext('2d');
            if (severanceChart) severanceChart.destroy();
            
            const labels = ['ìµœì¢… í‡´ì§ê¸ˆ', 'í‡´ì§ì†Œë“ì„¸', 'ì§€ë°©ì†Œë“ì„¸', 'ì‹¤ìˆ˜ë ¹ì•¡'];
            const data = [r.finalSeverance, r.incomeTax, r.localTax, r.netAmount];
            
            severanceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ê¸ˆì•¡ (ì›)',
                        data: data,
                        backgroundColor: [
                            '#43a047',
                            '#ef5350',
                            '#ab47bc',
                            '#2e7d32'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(ctx) {
                                    return ctx.label + ': ' + formatNumber(ctx.parsed.y) + 'ì›';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatNumber(value) + 'ì›';
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>