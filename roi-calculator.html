<!DOCTYPE html>
<html lang="ko" dir="ltr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
<title>ìˆ˜ìµë¥ ê³„ì‚°ê¸° (ë…ë¦½ ì‹¤í–‰í˜• Â· KRW Â· ê·¸ë˜í”„)</title>
<meta name="description" content="ì´ˆê¸°/ì›”ë‚©ì…/ìˆ˜ìµë¥ /ë³µë¦¬ì£¼ê¸°/ê¸°ê°„ì„ ë°˜ì˜í•˜ì—¬ ìµœì¢… ê¸ˆì•¡Â·í•„ìš” ì›”ë‚©ì…ì•¡Â·í•„ìš” ìˆ˜ìµë¥ Â·í•„ìš” ì‹œì‘ê¸ˆì•¡Â·í•„ìš” ê¸°ê°„ì„ ê³„ì‚°í•©ë‹ˆë‹¤.">
<style>
:root{
  --brand:#FF8802; --text:#0b1f3a; --muted:#6b7a90; --line:#e8ecf3; --card:#fff; --accent:#5045E5;
  --grid:#e6ebf5; --line1:#3b82f6; --line2:#10b981; --kfpc-gold:#DAA520;
}
html,body{margin:0;padding:0;background:#f7f9fc;color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR","Apple SD Gothic Neo",Segoe UI,Roboto,Helvetica,Arial,sans-serif}
*,*:before,*:after{box-sizing:border-box}
.wrapper{max-width:1100px;margin:0 auto;padding:0 16px}
.header{background:#fff;border-bottom:1px solid rgba(10,20,40,.08)}
.header__container{max-width:1100px;margin:0 auto;padding:12px 16px}
.header-wrapper{display:flex;align-items:center;justify-content:flex-start;gap:12px}

/* KFPC í…ìŠ¤íŠ¸ ë¡œê³  ìŠ¤íƒ€ì¼ */
.header-nav__logo {
  font-size:28px;
  font-weight:900;
  font-family:'Arial Black','Arial',sans-serif;
  letter-spacing:2px;
  background:linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #DAA520 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
  padding:8px 16px;
  border-radius:8px;
  border:2px solid rgba(255,215,0,0.3);
  text-decoration:none;
  display:inline-block;
}

.header-breadcrumbs{display:flex;align-items:center;gap:8px;color:#6b7b91;font-size:13px;padding:6px 0 10px}
.calculator__container--title{display:flex;gap:12px;align-items:center;margin:16px 0}
.calculator__logo{font-size:20px;font-weight:800;color:var(--kfpc-gold)}
.calculator__title{margin:0;font-size:22px}
.calculator__subtitle{margin:4px 0 0;color:#4a5a73;font-size:14px}
.grid{display:grid;grid-template-columns:360px 1fr;gap:18px}
@media (max-width: 900px){ .grid{grid-template-columns:1fr} }
.card{background:var(--card);border:1px solid rgba(10,20,40,.08);border-radius:14px;box-shadow:0 4px 14px rgba(0,0,0,.05)}
.pad{padding:16px}
.card h3{margin:0 0 10px;padding-bottom:10px;border-bottom:2px solid var(--line);font-size:18px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.col{flex:1 1 auto}
.input{flex:1 1 160px;min-width:160px}
.input__title{font-weight:800;margin:10px 2px 6px;font-size:14px}
.input-description{font-size:12px;color:var(--muted);margin:2px 2px 8px;line-height:1.4}
.input-field{display:flex;align-items:center;gap:8px;border:1px solid #d7deea;background:#fff;border-radius:10px;padding:10px 12px}
.input-field__input,.input-field__text{border:none;outline:none;font-size:15px;width:100%;background:transparent}
.input-field__hint{font-size:12px;color:#7b879b;white-space:nowrap}
.dropdown-wrapper .input-field{padding:10px 12px}
.button{display:inline-flex;align-items:center;justify-content:center;gap:8px;border:none;border-radius:12px;padding:11px 16px;font-weight:800;cursor:pointer;font-size:15px}
.button--primary{background:var(--accent);color:#fff}
.button--primary:hover{background:#4039cc}
.related-item-hidden{display:none!important}
.hidden{display:none!important}

.result .k{font-weight:900;color:#2a5a8a;font-size:18px}
.result p{margin:8px 0}
.explain{font-size:13px;color:#42526b;line-height:1.6;margin-top:6px;background:#f8fafc;padding:10px;border-radius:8px}
.callout{background:#f7f9ff;border:1px dashed #c8d2ff;border-radius:12px;padding:12px;margin-top:10px;font-size:13px;color:#25314a}

.legend{display:flex;gap:14px;align-items:center;flex-wrap:wrap;margin:6px 0 6px}
.legend .item{display:inline-flex;align-items:center;gap:8px;font-size:13px;color:#334155}
.legend .swatch{width:12px;height:12px;border-radius:3px}
.sw1{background:var(--line1)} .sw2{background:var(--line2)}
.chart-wrap{width:100%;overflow:hidden}
.muted{color:#6b7b91;font-size:12px}

.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;display:flex;justify-content:center;align-items:center}
.modal-content{background:#fff;padding:22px;border-radius:12px;max-width:560px;width:92%;box-shadow:0 8px 24px rgba(0,0,0,.25)}
.modal-content h2{margin:0 0 8px;font-size:20px}
.modal-content p{margin:8px 0;color:#33405a;font-size:14px;line-height:1.6}
.modal-content ul{padding-left:20px;margin:8px 0 0}
.modal-content li{margin:6px 0}
.modal-button{display:block;width:100%;padding:12px;border:none;border-radius:8px;background:var(--brand);color:#fff;font-size:16px;font-weight:800;cursor:pointer;margin-top:12px}

button,input,select{ -webkit-tap-highlight-color: rgba(0,0,0,0); }
.footer{ text-align:center; margin:22px 0; color:#6b7b91; font-size:12px; }

.data-table{
  margin-top:14px;
  background:#fafbfe;
  border:1px solid #e0e6f0;
  border-radius:10px;
  overflow-x:auto;
  font-size:13px;
}
.data-table table{ width:100%; border-collapse:collapse; text-align:right; }
.data-table th,.data-table td{
  padding:8px 10px;
  border-bottom:1px solid #eef2f8;
  white-space:nowrap;
}
.data-table th{ background:#f1f5fb; color:#334155; font-weight:700; text-align:right; }
.data-table th:first-child, .data-table td:first-child{ text-align:left; }

@media (max-width: 600px){
  .header-nav__logo{font-size:22px;padding:6px 12px}
  .calculator__title{font-size:20px}
}
</style>
</head>
<body>

<!-- ì•ˆë‚´ ëª¨ë‹¬ -->
<div id="info-modal" class="modal-overlay" role="dialog" aria-modal="true">
  <div class="modal-content" role="document">
    <h2>ğŸ“ˆ ìˆ˜ìµë¥ ê³„ì‚°ê¸° ì‚¬ìš©ë²•</h2>
    <p>ì´ ê³„ì‚°ê¸°ëŠ” <b>â‚©(ì›í™”)</b> ê¸°ì¤€ìœ¼ë¡œ ë‹¤ìŒì„ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
    <ul>
      <li><b>ìµœì¢… ê¸ˆì•¡</b>: íˆ¬ì í›„ ëª¨ì´ëŠ” ì´ ê¸ˆì•¡</li>
      <li><b>í•„ìš” ì›” ë‚©ì…ì•¡</b>: ëª©í‘œ ë‹¬ì„±ì— í•„ìš”í•œ ë§¤ì›” ì €ì¶•ê¸ˆ</li>
      <li><b>í•„ìš” ìˆ˜ìµë¥ </b>: ëª©í‘œë¥¼ ìœ„í•œ ì—°ê°„ ìˆ˜ìµë¥ </li>
      <li><b>í•„ìš” ì‹œì‘ê¸ˆì•¡</b>: ì´ˆê¸°ì— í•„ìš”í•œ íˆ¬ìê¸ˆ</li>
      <li><b>í•„ìš” íˆ¬ìê¸°ê°„</b>: ëª©í‘œ ë‹¬ì„±ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„</li>
    </ul>
    <p style="margin-top:12px;font-size:13px">ğŸ’¡ <b>íŒ</b>: ê¸ˆì•¡ì€ ìë™ìœ¼ë¡œ ì½¤ë§ˆê°€ í‘œì‹œë˜ë©°, ë³µë¦¬ ì£¼ê¸°ë¥¼ ì§§ê²Œ í• ìˆ˜ë¡ ë” ë§ì€ ì´ìê°€ ë¶™ìŠµë‹ˆë‹¤.</p>
    <button id="modal-close-btn" class="modal-button">ì‹œì‘í•˜ê¸°</button>
  </div>
</div>

<div class="wrapper">
  <header class="header">
    <div class="header__container">
      <div class="header-wrapper">
        <a class="header-nav__logo" href="#">KFPC</a>
      </div>
      <div class="header-breadcrumbs">ì¬ë¬´ ê³„ì‚°ê¸° &gt; <strong>ìˆ˜ìµë¥ ê³„ì‚°ê¸°</strong></div>
    </div>
  </header>

  <div class="calculator">
    <div class="calculator__container calculator__container--title row">
      <div class="calculator__logo">ğŸ’°</div>
      <div class="calculator__info col">
        <h1 class="calculator__title">ìˆ˜ìµë¥  ê³„ì‚°ê¸°</h1>
        <p class="calculator__subtitle">ì´ˆê¸° íˆ¬ìê¸ˆê³¼ ë§¤ì›” ì €ì¶•, ìˆ˜ìµë¥ ê³¼ ê¸°ê°„ì„ ê³ ë ¤í•œ íˆ¬ì ê³„ì‚°ê¸°ì…ë‹ˆë‹¤.</p>
      </div>
    </div>

    <div class="grid">
      <!-- ì¢Œì¸¡ ì…ë ¥ -->
      <div class="card pad">
        <h3>ì„¤ì •</h3>

        <div class="row">
          <label class="input col">
            <p class="input__title">ë¬´ì—‡ì„ ê³„ì‚°í• ê¹Œìš”?</p>
            <div class="dropdown-wrapper">
              <div class="input-field row" tabindex="0">
                <select class="input-field__text" id="loan_type">
                  <option value="ìµœì¢… ê¸ˆì•¡" selected>ë¯¸ë˜ì— ì–¼ë§ˆë‚˜ ëª¨ì¼ê¹Œ?</option>
                  <option value="ì¶”ê°€ ê¸°ì—¬">ë§¤ì›” ì–¼ë§ˆì”© ì €ì¶•í•´ì•¼ í• ê¹Œ?</option>
                  <option value="ìˆ˜ìµë¥ ">ëª‡ % ìˆ˜ìµë¥ ì´ í•„ìš”í• ê¹Œ?</option>
                  <option value="ì‹œì‘ ê¸ˆì•¡">ì²˜ìŒ ì–¼ë§ˆë¥¼ íˆ¬ìí•´ì•¼ í• ê¹Œ?</option>
                  <option value="íˆ¬ì ê¸°ê°„">ëª©í‘œê¹Œì§€ ëª‡ ë…„ ê±¸ë¦´ê¹Œ?</option>
                </select>
              </div>
            </div>
            <p class="input-description">ê³„ì‚°í•˜ê³  ì‹¶ì€ í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”</p>
          </label>
        </div>

        <!-- A: ìµœì¢… ê¸ˆì•¡ -->
        <div class="loan_type related-to-loan_type-0">
          <div class="row">
            <label class="input col">
              <p class="input__title">ì²˜ìŒ íˆ¬ìí•˜ëŠ” ëˆ</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="starting_amount" value="20,000,000" inputmode="numeric"/>
                <span class="input-field__hint">ì›</span>
              </div>
              <p class="input-description">ì§€ê¸ˆ í•œë²ˆì— ë„£ëŠ” ëª©ëˆ</p>
            </label>
            <label class="input col">
              <p class="input__title">íˆ¬ì ê¸°ê°„</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="after" value="15" inputmode="decimal"/>
                <span class="input-field__hint">ë…„</span>
              </div>
              <p class="input-description">ëª‡ ë…„ ë™ì•ˆ íˆ¬ìí• ì§€</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ì˜ˆìƒ ìˆ˜ìµë¥  (ì—°)</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="return_rate" value="6" inputmode="decimal"/>
                <span class="input-field__hint">%</span>
              </div>
              <p class="input-description">1ë…„ì— ëª‡ % ìˆ˜ìµ ì˜ˆìƒ</p>
            </label>
            <label class="input col">
              <p class="input__title">ë³µë¦¬ ì£¼ê¸°</p>
              <div class="input-field row">
                <select class="input-field__text" id="compound">
                  <option value="12" selected>ë§¤ì›”</option>
                  <option value="4">ë¶„ê¸° (3ê°œì›”)</option>
                  <option value="2">ë°˜ë…„ (6ê°œì›”)</option>
                  <option value="1">ë§¤ë…„</option>
                </select>
              </div>
              <p class="input-description">ì´ìê°€ ë¶™ëŠ” ë¹ˆë„</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ë§¤ì›” ì¶”ê°€ ì €ì¶•</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="additional_contribution" value="200,000" inputmode="numeric"/>
                <span class="input-field__hint">ì›/ì›”</span>
              </div>
              <p class="input-description">ë§¤ë‹¬ ê¾¸ì¤€íˆ ë„£ëŠ” ëˆ</p>
            </label>
          </div>
        </div>

        <!-- B: ë§¤ì›” ì¶”ê°€ë‚©ì…ì•¡ -->
        <div class="loan_type related-item-hidden related-to-loan_type-1">
          <div class="row">
            <label class="input col">
              <p class="input__title">ëª©í‘œ ê¸ˆì•¡</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="your_target_1" value="100,000,000" inputmode="numeric"/>
                <span class="input-field__hint">ì›</span>
              </div>
              <p class="input-description">ëª¨ìœ¼ê³  ì‹¶ì€ ê¸ˆì•¡</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ì²˜ìŒ íˆ¬ìí•˜ëŠ” ëˆ</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="starting_amount_1" value="20,000,000" inputmode="numeric"/>
                <span class="input-field__hint">ì›</span>
              </div>
              <p class="input-description">ì§€ê¸ˆ í•œë²ˆì— ë„£ëŠ” ëˆ</p>
            </label>
            <label class="input col">
              <p class="input__title">íˆ¬ì ê¸°ê°„</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="after_1" value="15" inputmode="decimal"/>
                <span class="input-field__hint">ë…„</span>
              </div>
              <p class="input-description">ëª‡ ë…„ ë™ì•ˆ</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ì˜ˆìƒ ìˆ˜ìµë¥  (ì—°)</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="return_rate_1" value="6" inputmode="decimal"/>
                <span class="input-field__hint">%</span>
              </div>
              <p class="input-description">ì—°ê°„ ìˆ˜ìµë¥ </p>
            </label>
            <label class="input col">
              <p class="input__title">ë³µë¦¬ ì£¼ê¸°</p>
              <div class="input-field row">
                <select class="input-field__text" id="compound_1">
                  <option value="12" selected>ë§¤ì›”</option>
                  <option value="4">ë¶„ê¸°</option>
                  <option value="2">ë°˜ë…„</option>
                  <option value="1">ë§¤ë…„</option>
                </select>
              </div>
              <p class="input-description">ì´ì ê³„ì‚° ë¹ˆë„</p>
            </label>
          </div>
        </div>

        <!-- C: í•„ìš” ìˆ˜ìµë¥  -->
        <div class="loan_type related-item-hidden related-to-loan_type-2">
          <div class="row">
            <label class="input col">
              <p class="input__title">ëª©í‘œ ê¸ˆì•¡</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="your_target_2" value="100,000,000" inputmode="numeric">
                <span class="input-field__hint">ì›</span>
              </div>
              <p class="input-description">ë‹¬ì„±í•˜ê³  ì‹¶ì€ ê¸ˆì•¡</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ì²˜ìŒ íˆ¬ìí•˜ëŠ” ëˆ</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="starting_amount_2" value="20,000,000" inputmode="numeric">
                <span class="input-field__hint">ì›</span>
              </div>
              <p class="input-description">ì´ˆê¸° íˆ¬ìê¸ˆ</p>
            </label>
            <label class="input col">
              <p class="input__title">íˆ¬ì ê¸°ê°„</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="after_2" value="15" inputmode="decimal">
                <span class="input-field__hint">ë…„</span>
              </div>
              <p class="input-description">íˆ¬ì ì—°ìˆ˜</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ë§¤ì›” ì¶”ê°€ ì €ì¶•</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="additional_contribution_2" value="200,000" inputmode="numeric">
                <span class="input-field__hint">ì›/ì›”</span>
              </div>
              <p class="input-description">ë§¤ë‹¬ ë„£ëŠ” ëˆ</p>
            </label>
          </div>
        </div>

        <!-- D: í•„ìš” ì‹œì‘ê¸ˆì•¡ -->
        <div class="loan_type related-item-hidden related-to-loan_type-3">
          <div class="row">
            <label class="input col">
              <p class="input__title">ëª©í‘œ ê¸ˆì•¡</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="your_target_3" value="100,000,000" inputmode="numeric">
                <span class="input-field__hint">ì›</span>
              </div>
              <p class="input-description">ëª©í‘œ ê¸ˆì•¡</p>
            </label>
            <label class="input col">
              <p class="input__title">íˆ¬ì ê¸°ê°„</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="after_3" value="15" inputmode="decimal">
                <span class="input-field__hint">ë…„</span>
              </div>
              <p class="input-description">íˆ¬ì ê¸°ê°„</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ì˜ˆìƒ ìˆ˜ìµë¥  (ì—°)</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="return_rate_3" value="6" inputmode="decimal">
                <span class="input-field__hint">%</span>
              </div>
              <p class="input-description">ì—°ê°„ ìˆ˜ìµë¥ </p>
            </label>
            <label class="input col">
              <p class="input__title">ë³µë¦¬ ì£¼ê¸°</p>
              <div class="input-field row">
                <select class="input-field__text" id="compound_3">
                  <option value="12" selected>ë§¤ì›”</option>
                  <option value="4">ë¶„ê¸°</option>
                  <option value="2">ë°˜ë…„</option>
                  <option value="1">ë§¤ë…„</option>
                </select>
              </div>
              <p class="input-description">ì´ì ë¹ˆë„</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ë§¤ì›” ì¶”ê°€ ì €ì¶•</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="additional_contribution_3" value="200,000" inputmode="numeric">
                <span class="input-field__hint">ì›/ì›”</span>
              </div>
              <p class="input-description">ë§¤ë‹¬ ì €ì¶•ì•¡</p>
            </label>
          </div>
        </div>

        <!-- E: í•„ìš” íˆ¬ìê¸°ê°„ -->
        <div class="loan_type related-item-hidden related-to-loan_type-4">
          <div class="row">
            <label class="input col">
              <p class="input__title">ëª©í‘œ ê¸ˆì•¡</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="your_target_4" value="100,000,000" inputmode="numeric">
                <span class="input-field__hint">ì›</span>
              </div>
              <p class="input-description">ëª©í‘œ ê¸ˆì•¡</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ì²˜ìŒ íˆ¬ìí•˜ëŠ” ëˆ</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="starting_amount_4" value="20,000,000" inputmode="numeric">
                <span class="input-field__hint">ì›</span>
              </div>
              <p class="input-description">ì´ˆê¸° íˆ¬ìê¸ˆ</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ì˜ˆìƒ ìˆ˜ìµë¥  (ì—°)</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="return_rate_4" value="6" inputmode="decimal">
                <span class="input-field__hint">%</span>
              </div>
              <p class="input-description">ì—°ê°„ ìˆ˜ìµë¥ </p>
            </label>
            <label class="input col">
              <p class="input__title">ë³µë¦¬ ì£¼ê¸°</p>
              <div class="input-field row">
                <select class="input-field__text" id="compound_4">
                  <option value="12" selected>ë§¤ì›”</option>
                  <option value="4">ë¶„ê¸°</option>
                  <option value="2">ë°˜ë…„</option>
                  <option value="1">ë§¤ë…„</option>
                </select>
              </div>
              <p class="input-description">ì´ì ë¹ˆë„</p>
            </label>
          </div>
          <div class="row">
            <label class="input col">
              <p class="input__title">ë§¤ì›” ì¶”ê°€ ì €ì¶•</p>
              <div class="input-field row">
                <input type="text" class="input-field__input" id="additional_contribution_4" value="200,000" inputmode="numeric">
                <span class="input-field__hint">ì›/ì›”</span>
              </div>
              <p class="input-description">ë§¤ë‹¬ ì €ì¶•ì•¡</p>
            </label>
          </div>
        </div>

        <div class="row" style="margin-top:12px">
          <button class="button button--primary ml-auto" id="action-button">ğŸ§® ê³„ì‚°í•˜ê¸°</button>
        </div>
      </div>

      <!-- ìš°ì¸¡ ê²°ê³¼+ê·¸ë˜í”„ -->
      <div class="card pad">
        <h3>ê³„ì‚° ê²°ê³¼</h3>
        <div id="calculator_result" class="result">
          <p>ì¢Œì¸¡ ê°’ì„ ì…ë ¥í•˜ê³  <b>ê³„ì‚°í•˜ê¸°</b>ë¥¼ ëˆ„ë¥´ì„¸ìš”. ëª¨ë“  ê¸ˆì•¡ì€ <b>ì›í™”(ì •ìˆ˜)</b>ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</p>
        </div>

        <div style="margin-top:12px">
          <div class="legend">
            <div class="item"><span class="swatch sw1"></span>ì´ ì”ì•¡ (ë¯¸ë˜ê°€ì¹˜)</div>
            <div class="item"><span class="swatch sw2"></span>ë‚´ê°€ ë„£ì€ ëˆ</div>
          </div>
          <div class="chart-wrap">
            <svg id="chartSvg" width="100%" height="260" viewBox="0 0 700 260" preserveAspectRatio="none" aria-label="ì›”ë³„ ì”ì•¡/ë‚©ì… ëˆ„ê³„ ì°¨íŠ¸"></svg>
          </div>
          <div class="muted">* ê°€ë¡œì¶•: ì›”, ì„¸ë¡œì¶•: ê¸ˆì•¡(ìƒëŒ€ ìŠ¤ì¼€ì¼). ì‹¤ì œ ê°’ì€ ê²°ê³¼ í…ìŠ¤íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.</div>

          <div id="dataTable" class="data-table" aria-live="polite"></div>
        </div>

        <div class="callout">
          ğŸ’¡ <b>íŒ</b>: ê°™ì€ ê¸ˆì•¡ì´ë¼ë„ ë³µë¦¬ ì£¼ê¸°ê°€ ì§§ì„ìˆ˜ë¡(ì˜ˆ: ë§¤ì›”) ë” ë§ì€ ì´ìê°€ ë¶™ìŠµë‹ˆë‹¤!
        </div>
      </div>
    </div>
  </div>

  <footer class="footer">
    Copyright Â© 2025 KFPC Co., Ltd. All Rights Reserved.
  </footer>
</div>

<script>
/* ì•ˆë‚´ ëª¨ë‹¬ */
document.getElementById('modal-close-btn').addEventListener('click', ()=>{
  document.getElementById('info-modal').style.display='none';
});

/* ì…ë ¥ í¬ë§·/ì •ìˆ˜ ì½¤ë§ˆ */
const digitsOnly = s => (s||'').toString().replace(/[^\d]/g,'');
const toInt = s => { const v = parseInt(digitsOnly(s),10); return isNaN(v)?0:v; };
const toFloat = s => parseFloat((s||'0').toString().replace(',', '.')) || 0;
const fmtKRW = n => Number(Math.round(n)).toLocaleString('ko-KR');

function attachCommaIntInput(sel){
  document.querySelectorAll(sel).forEach(el=>{
    el.addEventListener('input', ()=>{ el.value = fmtKRW(toInt(el.value)); });
    el.value = fmtKRW(toInt(el.value));
  });
}
attachCommaIntInput('.input-field__input');

/* ì„¹ì…˜ í† ê¸€ */
const loanTypeSelect = document.getElementById('loan_type');
function toggleRelatedInputs(){
  const idx = loanTypeSelect.selectedIndex;
  document.querySelectorAll('.loan_type').forEach((sec,i)=>{
    if(i===idx){ sec.classList.remove('related-item-hidden'); }
    else { sec.classList.add('related-item-hidden'); }
  });
}
loanTypeSelect.addEventListener('change', toggleRelatedInputs);
toggleRelatedInputs();

/* ê¸ˆìœµ ìœ í‹¸ */
function fvOfPrincipal(P, rPer, N){ return P * Math.pow(1 + rPer, N); }
function fvOfAnnuity(PMT, rPer, N, due=false){
  if (N<=0) return 0;
  if (rPer===0) return PMT * N;
  const fvOrd = PMT * ( (Math.pow(1+rPer, N) - 1) / rPer );
  return due ? fvOrd * (1 + rPer) : fvOrd;
}
function bisection(fn, low, high, tol=1e-9, maxIter=200){
  let fL = fn(low), fH = fn(high);
  if (isNaN(fL) || isNaN(fH)) return null;
  for(let i=0;i<maxIter;i++){
    const mid = 0.5*(low+high);
    const fM = fn(mid);
    if (Math.abs(fM) < tol || Math.abs(high-low) < tol) return mid;
    if ((fL>0 && fM>0) || (fL<0 && fM<0)) { low = mid; fL = fM; } else { high = mid; fH = fM; }
  }
  return 0.5*(low+high);
}

/* ê·¸ë˜í”„ */
function drawChart(svgId, seriesBal, seriesContrib){
  const svg = document.getElementById(svgId);
  const W=700,H=260,padL=48,padR=10,padT=12,padB=28;
  svg.setAttribute('viewBox',`0 0 ${W} ${H}`);
  while(svg.firstChild) svg.removeChild(svg.firstChild);

  const n = seriesBal.length;
  const maxV = Math.max(...seriesBal, ...seriesContrib) || 1;
  const minV = 0;
  const plotW = W - padL - padR;
  const plotH = H - padT - padB;
  const x0=padL,y0=padT,x1=padL+plotW,y1=padT+plotH;

  const grid = document.createElementNS('http://www.w3.org/2000/svg','g');
  for(let i=0;i<=4;i++){
    const y=y0+(plotH*i/4);
    const l=document.createElementNS('http://www.w3.org/2000/svg','line');
    l.setAttribute('x1',x0);l.setAttribute('y1',y);l.setAttribute('x2',x1);l.setAttribute('y2',y);
    l.setAttribute('stroke','var(--grid)');l.setAttribute('stroke-width','1'); grid.appendChild(l);
  }
  svg.appendChild(grid);

  const mapX=i=>x0+(plotW*i/(n-1||1));
  const mapY=v=>y1-((v-minV)/(maxV-minV||1))*plotH;

  function path(series, stroke){
    let d=''; series.forEach((v,i)=>{ d+=(i?'L':'M')+mapX(i)+' '+mapY(v)+' '; });
    const p=document.createElementNS('http://www.w3.org/2000/svg','path');
    p.setAttribute('d', d.trim()); p.setAttribute('fill','none'); p.setAttribute('stroke', stroke);
    p.setAttribute('stroke-width','2.5'); p.setAttribute('stroke-linecap','round'); return p;
  }
  svg.appendChild(path(seriesBal,'var(--line1)'));
  svg.appendChild(path(seriesContrib,'var(--line2)'));

  function label(x,y,t,anc='middle'){
    const tx=document.createElementNS('http://www.w3.org/2000/svg','text');
    tx.setAttribute('x',x); tx.setAttribute('y',y); tx.setAttribute('fill','#6b7b91');
    tx.setAttribute('font-size','11'); tx.setAttribute('text-anchor',anc); tx.textContent=t; return tx;
  }
  svg.appendChild(label(x0, y1+18, '0ê°œì›”', 'start'));
  svg.appendChild(label(x0+plotW/2, y1+18, Math.round((n-1)/2)+'ê°œì›”'));
  svg.appendChild(label(x1, y1+18, (n-1)+'ê°œì›”', 'end'));
}

/* ì›” ë‹¨ìœ„ ì‹œë®¬ë ˆì´ì…˜ */
function simulateSeries(P, PMT_month, rYear, years){
  const months = Math.max(0, Math.round(years*12));
  const rm = Math.pow(1+rYear, 1/12) - 1;
  let bal = P, contrib = P;
  const sBal=[bal], sContrib=[contrib];
  for(let m=1;m<=months;m++){
    bal *= (1+rm);
    if(PMT_month>0){ bal += PMT_month; contrib += PMT_month; }
    sBal.push(bal); sContrib.push(contrib);
  }
  return {seriesBal:sBal, seriesContrib:sContrib};
}

/* ê¸°ê°„ë³„ ë°ì´í„° í‘œ ë Œë”ë§ */
function renderDataTable(seriesBal, seriesContrib){
  const tableDiv = document.getElementById('dataTable');
  if(!tableDiv) return;

  const rows = [];
  const lastIdx = seriesBal.length - 1;
  const pushRow = (i) => {
    const years = (i/12).toFixed(1);
    rows.push({
      periodLabel: `${years}ë…„`,
      bal: seriesBal[i],
      contrib: seriesContrib[i],
      interest: seriesBal[i] - seriesContrib[i]
    });
  };

  pushRow(0);
  for(let i=12; i<lastIdx; i+=12){ pushRow(i); }
  if(lastIdx>0) pushRow(lastIdx);

  let html = '<table><thead><tr><th>ê¸°ê°„</th><th>ì´ ì”ì•¡(â‚©)</th><th>ë‚´ê°€ ë„£ì€ ëˆ(â‚©)</th><th>ì´ì ìˆ˜ìµ(â‚©)</th></tr></thead><tbody>';
  rows.forEach(r=>{
    html += `<tr><td>${r.periodLabel}</td><td>${fmtKRW(r.bal)}</td><td>${fmtKRW(r.contrib)}</td><td>${fmtKRW(Math.max(0,r.interest))}</td></tr>`;
  });
  html += '</tbody></table>';

  tableDiv.innerHTML = html;
}

/* ë©”ì¸ ê³„ì‚° */
const resultEl = document.getElementById('calculator_result');
document.getElementById('action-button').addEventListener('click', ()=>{
  const idx = loanTypeSelect.selectedIndex;
  let html = '';
  function currency(n){ return 'â‚© ' + Number(Math.round(n)).toLocaleString('ko-KR'); }

  if(idx===0){ // ìµœì¢… ê¸ˆì•¡
    const P = toInt(document.getElementById('starting_amount').value);
    const t = toFloat(document.getElementById('after').value);
    const r = toFloat(document.getElementById('return_rate').value)/100;
    const n = parseInt(document.getElementById('compound').value,10);
    const PMT_m = toInt(document.getElementById('additional_contribution').value);

    const rPer = r / n; const N = n * t; const PMT_per = PMT_m * (12/n);
    const fvP = fvOfPrincipal(P, rPer, N);
    const fvA = fvOfAnnuity(PMT_per, rPer, N, false);
    const FV = fvP + fvA;
    const contrib = P + PMT_m * (t*12);
    const interest = Math.max(0, FV - contrib);

    html += '<p><b>ğŸ¯ ìµœì¢… ì”ì•¡</b> : <span class="k">'+currency(FV)+'</span></p>';
    html += '<div class="explain">ì²˜ìŒ <b>'+currency(P)+'</b>ë¥¼ íˆ¬ìí•˜ê³ , ë§¤ì›” <b>'+currency(PMT_m)+'</b>ì”© <b>'+t+'ë…„</b> ë™ì•ˆ ì €ì¶•í•˜ë©´ ì—° <b>'+ (r*100).toFixed(2) +'%</b> ìˆ˜ìµë¥ ë¡œ ì´ <b>'+currency(FV)+'</b>ì´ ë©ë‹ˆë‹¤!</div>';
    html += '<p><b>ğŸ’µ ë‚´ê°€ ë„£ì€ ì´ì•¡</b> : <span class="k">'+currency(contrib)+'</span></p>';
    html += '<p><b>ğŸ’° ì´ìë¡œ ë²ˆ ëˆ</b> : <span class="k">'+currency(interest)+'</span></p>';

    const sc = simulateSeries(P, PMT_m, r, t);
    drawChart('chartSvg', sc.seriesBal, sc.seriesContrib);
    renderDataTable(sc.seriesBal, sc.seriesContrib);
  }

  if(idx===1){ // ë§¤ì›” ì¶”ê°€ë‚©ì…ì•¡
    const FV = toInt(document.getElementById('your_target_1').value);
    const P = toInt(document.getElementById('starting_amount_1').value);
    const t = toFloat(document.getElementById('after_1').value);
    const r = toFloat(document.getElementById('return_rate_1').value)/100;
    const n = parseInt(document.getElementById('compound_1').value,10);

    const rPer = r / n; const N = n * t;
    const fvP = fvOfPrincipal(P, rPer, N);
    const needFV = FV - fvP;
    let PMT_m = 0;
    if (needFV>0){
      const annFac = (rPer===0)? N : (Math.pow(1+rPer,N)-1)/rPer;
      const PMT_per = needFV / annFac;
      PMT_m = PMT_per * (n/12);
    }
    html += '<p><b>ğŸ’³ ë§¤ì›” ì €ì¶•í•´ì•¼ í•  ê¸ˆì•¡</b> : <span class="k">'+currency(PMT_m)+'</span></p>';
    html += '<div class="explain">ì²˜ìŒ <b>'+currency(P)+'</b>ë¡œ ì‹œì‘í•´ì„œ <b>'+t+'ë…„</b> ë™ì•ˆ ì—° <b>'+ (r*100).toFixed(2) +'%</b> ìˆ˜ìµë¥ ë¡œ <b>'+currency(FV)+'</b>ì„ ëª¨ìœ¼ë ¤ë©´ ë§¤ì›” <b>'+currency(PMT_m)+'</b>ì”© ì €ì¶•í•´ì•¼ í•©ë‹ˆë‹¤.</div>';

    const sc = simulateSeries(P, PMT_m, r, t);
    drawChart('chartSvg', sc.seriesBal, sc.seriesContrib);
    renderDataTable(sc.seriesBal, sc.seriesContrib);
  }

  if(idx===2){ // í•„ìš” ìˆ˜ìµë¥ 
    const FV = toInt(document.getElementById('your_target_2').value);
    const P = toInt(document.getElementById('starting_amount_2').value);
    const t = toFloat(document.getElementById('after_2').value);
    const PMT_m = toInt(document.getElementById('additional_contribution_2').value);
    const n = 12;

    const N = n * t;
    const f = (r)=>{
      const rPer = r / n;
      const fv = fvOfPrincipal(P, rPer, N) + fvOfAnnuity(PMT_m*(12/n), rPer, N, false);
      return fv - FV;
    };
    let rSol = bisection(f, 0, 1);
    if(rSol===null || !isFinite(rSol)){
      html += '<p><b>ğŸ“Š í•„ìš” ìˆ˜ìµë¥ </b> : ê³„ì‚° ë¶ˆê°€</p><div class="explain">ì…ë ¥í•˜ì‹  ì¡°ê±´ìœ¼ë¡œëŠ” í˜„ì‹¤ì ì¸ ë²”ìœ„(ì—° 0~100%)ì—ì„œ í•´ë¥¼ ì°¾ê¸° ì–´ë µìŠµë‹ˆë‹¤.</div>';
      drawChart('chartSvg', [0,0], [0,0]);
      renderDataTable([0],[0]);
    }else{
      html += '<p><b>ğŸ“Š í•„ìš”í•œ ì—° ìˆ˜ìµë¥ </b> : <span class="k">'+(rSol*100).toFixed(2)+'%</span></p>';
      html += '<div class="explain">ì²˜ìŒ <b>'+currency(P)+'</b>, ë§¤ì›” <b>'+currency(PMT_m)+'</b>, <b>'+t+'ë…„</b> ë™ì•ˆ íˆ¬ìí•˜ì—¬ <b>'+currency(FV)+'</b>ì„ ëª¨ìœ¼ë ¤ë©´ ì—° <b>'+(rSol*100).toFixed(2)+'%</b>ì˜ ìˆ˜ìµë¥ ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>';

      const sc = simulateSeries(P, PMT_m, rSol, t);
      drawChart('chartSvg', sc.seriesBal, sc.seriesContrib);
      renderDataTable(sc.seriesBal, sc.seriesContrib);
    }
  }

  if(idx===3){ // í•„ìš” ì‹œì‘ê¸ˆì•¡
    const FV = toInt(document.getElementById('your_target_3').value);
    const t = toFloat(document.getElementById('after_3').value);
    const r = toFloat(document.getElementById('return_rate_3').value)/100;
    const n = parseInt(document.getElementById('compound_3').value,10);
    const PMT_m = toInt(document.getElementById('additional_contribution_3').value);

    const rPer = r / n; const N = n * t;
    const fvA = fvOfAnnuity(PMT_m*(12/n), rPer, N, false);
    const needFromP = FV - fvA;
    const Pneed = (needFromP<=0) ? 0 : (needFromP / Math.pow(1+rPer,N));

    html += '<p><b>ğŸ’µ ì²˜ìŒ í•„ìš”í•œ íˆ¬ìê¸ˆ</b> : <span class="k">'+currency(Pneed)+'</span></p>';
    html += '<div class="explain">ë§¤ì›” <b>'+currency(PMT_m)+'</b>ì”© ì €ì¶•í•˜ê³  <b>'+t+'ë…„</b> í›„ <b>'+currency(FV)+'</b>ì„ ëª¨ìœ¼ë ¤ë©´ ì²˜ìŒì— <b>'+currency(Pneed)+'</b>ì„ íˆ¬ìí•´ì•¼ í•©ë‹ˆë‹¤. (ì—° <b>'+ (r*100).toFixed(2) +'%</b> ìˆ˜ìµë¥ )</div>';

    const sc = simulateSeries(Pneed, PMT_m, r, t);
    drawChart('chartSvg', sc.seriesBal, sc.seriesContrib);
    renderDataTable(sc.seriesBal, sc.seriesContrib);
  }

  if(idx===4){ // í•„ìš” íˆ¬ìê¸°ê°„
    const FV = toInt(document.getElementById('your_target_4').value);
    const P = toInt(document.getElementById('starting_amount_4').value);
    const r = toFloat(document.getElementById('return_rate_4').value)/100;
    const n = parseInt(document.getElementById('compound_4').value,10);
    const PMT_m = toInt(document.getElementById('additional_contribution_4').value);

    const fN = (N)=>{
      const rPer = r / n;
      const fv = fvOfPrincipal(P, rPer, N) + fvOfAnnuity(PMT_m*(12/n), rPer, N, false);
      return fv - FV;
    };
    let Nsol = bisection(fN, 0, n*120);
    if(Nsol===null || !isFinite(Nsol)){
      html += '<p><b>â° í•„ìš”í•œ ê¸°ê°„</b> : ê³„ì‚° ë¶ˆê°€</p><div class="explain">ì…ë ¥ ì¡°ê±´ìœ¼ë¡œ í˜„ì‹¤ì ì¸ ê¸°ê°„(ìµœëŒ€ 120ë…„) ë‚´ì—ì„œ ëª©í‘œ ë‹¬ì„±ì´ ì–´ë µìŠµë‹ˆë‹¤.</div>';
      drawChart('chartSvg', [0,0], [0,0]);
      renderDataTable([0],[0]);
    }else{
      const years = Nsol / n; const y = Math.floor(years); const m = Math.ceil((years - y) * 12);
      html += '<p><b>â° í•„ìš”í•œ íˆ¬ì ê¸°ê°„</b> : <span class="k">'+y+'ë…„ '+m+'ê°œì›”</span></p>';
      html += '<div class="explain">ì²˜ìŒ <b>'+currency(P)+'</b>, ë§¤ì›” <b>'+currency(PMT_m)+'</b>, ì—° <b>'+ (r*100).toFixed(2) +'%</b> ìˆ˜ìµë¥ ë¡œ <b>'+currency(FV)+'</b>ì„ ëª¨ìœ¼ë ¤ë©´ ì•½ <b>'+y+'ë…„ '+m+'ê°œì›”</b>ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>';

      const sc = simulateSeries(P, PMT_m, r, years);
      drawChart('chartSvg', sc.seriesBal, sc.seriesContrib);
      renderDataTable(sc.seriesBal, sc.seriesContrib);
    }
  }

  resultEl.innerHTML = html;
});

/* ëª¨ë‹¬ ë‹«ê¸° */
document.getElementById('info-modal').addEventListener('click', (e)=>{
  if(e.target.id==='info-modal'){ e.currentTarget.style.display='none'; }
});
</script>
</body>
</html>