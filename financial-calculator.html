<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>ì¬ë¬´ê³„ì‚°ê¸° - ì›í™” ë²„ì „</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
            background: #f3f4f6;
            color: #1f2937;
            line-height: 1.6;
            padding: 20px 20px 30px 20px;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto 20px auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
        }

        .header-logo {
            font-size: 32px;
            font-weight: 900;
            font-family: 'Arial Black', 'Arial', sans-serif;
            letter-spacing: 3px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #DAA520 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.4));
            flex-shrink: 0;
            position: relative;
            padding: 12px 20px;
            border-radius: 8px;
            background-image: 
                linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #DAA520 100%),
                linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 165, 0, 0.15) 100%);
            background-clip: text, border-box;
            -webkit-background-clip: text, border-box;
            border: 2px solid rgba(255, 215, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .header-logo::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(184, 134, 11, 0.1) 100%);
            transform: translate(-50%, -50%) rotate(45deg);
            border-radius: 8px;
            z-index: -1;
        }

        .header-content {
            flex: 1;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
            margin: 0;
        }

        .footer {
            background: #1f2937;
            color: #9ca3af;
            text-align: center;
            padding: 25px 20px;
            font-size: 13px;
            max-width: 1200px;
            margin: 0 auto;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .footer-copyright {
            color: #d1d5db;
            margin: 0;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .input-section, .result-section {
            padding: 20px;
        }

        .input-section {
            background: #f9fafb;
            border-radius: 8px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #374151;
        }

        .button-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 25px;
            position: relative;
            overflow: visible;
        }

        .btn-toggle {
            position: relative;
            padding: 14px 12px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
            font-weight: 600;
            line-height: 1.4;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            z-index: 1;
        }

        .btn-toggle:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
            z-index: 100;
        }

        .btn-toggle.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            z-index: 10;
        }

        .btn-toggle.active:hover {
            z-index: 100;
        }

        .btn-main-text {
            font-size: 14px;
            font-weight: 700;
            color: inherit;
        }

        .btn-sub-text {
            font-size: 11px;
            opacity: 0.8;
            color: inherit;
        }

        .btn-toggle.active .btn-sub-text {
            opacity: 0.95;
        }

        .info-icon {
            position: absolute;
            top: 6px;
            right: 6px;
            width: 18px;
            height: 18px;
            background: #3b82f6;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
            cursor: help;
            z-index: 50;
            transition: all 0.2s;
        }

        .btn-toggle.active .info-icon {
            background: white;
            color: #667eea;
            z-index: 50;
        }

        .info-icon:hover {
            transform: scale(1.15);
            z-index: 100;
        }

        .tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-bottom: 10px;
            padding: 12px 16px;
            background: #111827;
            color: white;
            border-radius: 8px;
            font-size: 12px;
            line-height: 1.5;
            white-space: normal;
            width: 280px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
            z-index: 2000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            pointer-events: none;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 7px solid transparent;
            border-top-color: #111827;
            z-index: 2001;
        }

        .btn-toggle:hover .tooltip {
            opacity: 1;
            visibility: visible;
        }

        .tooltip-title {
            font-weight: 700;
            color: #93c5fd;
            margin-bottom: 6px;
            font-size: 13px;
        }

        .input-group {
            margin-bottom: 20px;
            position: relative;
            overflow: visible;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
            font-size: 14px;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .input-wrapper input, .input-wrapper select {
            width: 100%;
            padding: 12px 50px 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .input-wrapper select {
            padding-right: 35px;
            cursor: pointer;
        }

        .input-wrapper input:focus, .input-wrapper select:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-wrapper input:disabled {
            background: #f3f4f6;
            color: #9ca3af;
        }

        .input-suffix {
            position: absolute;
            right: 15px;
            color: #6b7280;
            font-size: 14px;
        }

        .help-text {
            font-size: 12px;
            color: #6b7280;
            margin-top: 5px;
            line-height: 1.4;
        }

        .auto-calc {
            background: #eff6ff;
            padding: 10px;
            border-radius: 6px;
            margin-top: 5px;
            font-size: 12px;
            color: #1e40af;
            font-weight: 600;
        }

        .options {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #e5e7eb;
        }

        .option-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: #374151;
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
        }

        .calculate-btn:active {
            transform: translateY(0);
        }

        .result-box {
            background: #f0fdf4;
            border: 2px solid #86efac;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #d1fae5;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 600;
            color: #065f46;
        }

        .result-value {
            font-size: 24px;
            font-weight: 700;
            color: #047857;
        }

        .result-explanation {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
            font-size: 14px;
            line-height: 1.6;
        }

        .chart-container {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
        }

        .chart-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: #374151;
            text-align: center;
        }

        canvas {
            width: 100% !important;
            height: auto !important;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            overflow-y: auto;
            animation: slideIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #667eea;
        }

        .modal-body {
            line-height: 1.8;
            color: #374151;
        }

        .modal-body h3 {
            margin-top: 20px;
            margin-bottom: 10px;
            color: #667eea;
        }

        .modal-body ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .modal-body li {
            margin-bottom: 8px;
        }

        .modal-footer {
            margin-top: 25px;
            text-align: center;
        }

        .modal-btn {
            padding: 12px 40px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .error-message {
            background: #fee2e2;
            border: 2px solid #fca5a5;
            color: #991b1b;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: 600;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .button-group {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 15px 20px;
                gap: 15px;
            }

            .header-logo {
                width: 45px;
                height: 45px;
            }

            .header h1 {
                font-size: 20px;
                margin-bottom: 3px;
            }

            .header p {
                font-size: 12px;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .button-group {
                gap: 8px;
            }
            
            .btn-toggle {
                padding: 10px 8px;
                font-size: 11px;
            }
            
            .modal-content {
                margin: 5% auto;
                padding: 20px;
            }

            .tooltip {
                width: 240px;
                font-size: 11px;
                padding: 10px 12px;
            }

            .footer {
                font-size: 11px;
                padding: 20px 15px;
            }
        }

        .two-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        @media (max-width: 480px) {
            .two-inputs {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ì‚¬ìš© ì„¤ëª… ëª¨ë‹¬ -->
    <div id="instructionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">ğŸ“Š ì¬ë¬´ê³„ì‚°ê¸° ì‚¬ìš© ê°€ì´ë“œ</div>
            <div class="modal-body">
                <p><strong>ì¬ë¬´ê³„ì‚°ê¸°ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</strong></p>
                <p>ë³µì¡í•œ ê¸ˆìœµ ê³„ì‚°ì„ ì‰½ê²Œ! ì €ì¶•ê³¼ íˆ¬ì ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.</p>
                
                <h3>ğŸ¯ ë¬´ì—‡ì„ ê³„ì‚°í•  ìˆ˜ ìˆë‚˜ìš”?</h3>
                <ul>
                    <li><strong>ë¯¸ë˜ê°€ì¹˜</strong>: "ì§€ê¸ˆ 1ì²œë§Œì›ì„ 10ë…„ê°„ íˆ¬ìí•˜ë©´ ì–¼ë§ˆê°€ ë ê¹Œ?"</li>
                    <li><strong>ì •ê¸°ë‚©ì…ì•¡</strong>: "5ë…„ í›„ 3ì²œë§Œì› ëª¨ìœ¼ë ¤ë©´ ë§¤ì›” ì–¼ë§ˆì”© ì €ì¶•í•´ì•¼ í• ê¹Œ?"</li>
                    <li><strong>í•„ìš”ìˆ˜ìµë¥ </strong>: "ëª©í‘œ ë‹¬ì„±í•˜ë ¤ë©´ ëª‡ %ì˜ ìˆ˜ìµë¥ ì´ í•„ìš”í• ê¹Œ?"</li>
                    <li><strong>íˆ¬ìê¸°ê°„</strong>: "ë§¤ì›” 10ë§Œì›ì”© ì €ì¶•í•˜ë©´ ëª©í‘œê¹Œì§€ ëª‡ ë…„ ê±¸ë¦´ê¹Œ?"</li>
                    <li><strong>í˜„ì¬ê°€ì¹˜</strong>: "ë¯¸ë˜ ëª©í‘œë¥¼ ìœ„í•´ ì§€ê¸ˆ ì–¼ë§ˆë¥¼ íˆ¬ìí•´ì•¼ í• ê¹Œ?"</li>
                </ul>

                <h3>ğŸ“ ì‚¬ìš© ë°©ë²• (3ë‹¨ê³„)</h3>
                <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <p><strong>1ë‹¨ê³„:</strong> ì•Œê³  ì‹¶ì€ ê²ƒì„ ì„ íƒí•˜ì„¸ìš” (ê° ë²„íŠ¼ì˜ â“˜ë¥¼ ì°¸ê³ )</p>
                    <p><strong>2ë‹¨ê³„:</strong> ê°„ë‹¨í•œ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš” (íˆ¬ì ê¸°ê°„, ê¸ˆì•¡ ë“±)</p>
                    <p><strong>3ë‹¨ê³„:</strong> ê³„ì‚°í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê²°ê³¼ì™€ ê·¸ë˜í”„ê°€ ë‚˜ì˜µë‹ˆë‹¤!</p>
                </div>

                <h3>ğŸ’¡ í•µì‹¬ íŒ</h3>
                <p style="background: #fef3c7; padding: 12px; border-radius: 6px; margin-top: 10px;">
                    <strong>ê°„ë‹¨í•œ ì…ë ¥:</strong><br>
                    â€¢ ëª¨ë“  ê¸ˆì•¡ì€ <strong>ì–‘ìˆ˜ë¡œ ì…ë ¥</strong>í•˜ì„¸ìš”<br>
                    â€¢ íˆ¬ì/ì €ì¶•í•˜ëŠ” ëˆì€ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤<br>
                    â€¢ ì˜ˆ: ë§¤ì›” 10ë§Œì› ì €ì¶• â†’ ê·¸ëƒ¥ <strong>100,000</strong> ì…ë ¥
                </p>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" onclick="closeModal()">ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <!-- KFPC í…ìŠ¤íŠ¸ ë¡œê³  -->
            <div class="header-logo">KFPC</div>
            
            <div class="header-content">
                <h1>ğŸ’° ì¬ë¬´ê³„ì‚°ê¸°</h1>
                <p>ê°„ë‹¨í•˜ê³  ì‰¬ìš´ ì €ì¶• & íˆ¬ì ê³„ì‚°</p>
            </div>
        </div>

        <div class="main-content">
            <!-- ì…ë ¥ ì„¹ì…˜ -->
            <div class="input-section">
                <h2 class="section-title">ğŸ“¥ ì…ë ¥ í•­ëª©</h2>
                
                <div class="input-group">
                    <label>ë¬´ì—‡ì„ ì•Œê³  ì‹¶ìœ¼ì‹ ê°€ìš”?</label>
                    <div class="button-group">
                        <button class="btn-toggle active" data-find="fv">
                            <span class="info-icon">i</span>
                            <span class="btn-main-text">ë¯¸ë˜ê°€ì¹˜</span>
                            <span class="btn-sub-text">Future Value</span>
                            <div class="tooltip">
                                <div class="tooltip-title">ë¯¸ë˜ê°€ì¹˜ (Future Value)</div>
                                í˜„ì¬ì˜ íˆ¬ìê¸ˆê³¼ ì •ê¸°ì ì¸ ì €ì¶•ìœ¼ë¡œ ë¯¸ë˜ì— ì–¼ë§ˆë‚˜ ëª¨ì„ ìˆ˜ ìˆëŠ”ì§€ ê³„ì‚°í•©ë‹ˆë‹¤. ë³µë¦¬ íš¨ê³¼ë¥¼ í¬í•¨í•œ ìµœì¢… ê¸ˆì•¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </div>
                        </button>
                        <button class="btn-toggle" data-find="pmt">
                            <span class="info-icon">i</span>
                            <span class="btn-main-text">ì •ê¸°ë‚©ì…ì•¡</span>
                            <span class="btn-sub-text">Payment</span>
                            <div class="tooltip">
                                <div class="tooltip-title">ì •ê¸°ë‚©ì…ì•¡ (Payment)</div>
                                ëª©í‘œ ê¸ˆì•¡ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ë§¤ì›”(ë˜ëŠ” ë§¤ë²ˆ) ì–¼ë§ˆì”© ì €ì¶•í•´ì•¼ í•˜ëŠ”ì§€ ê³„ì‚°í•©ë‹ˆë‹¤. ì •ê¸°ì ì¸ ì €ì¶• ê³„íšì„ ì„¸ìš¸ ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.
                            </div>
                        </button>
                        <button class="btn-toggle" data-find="iy">
                            <span class="info-icon">i</span>
                            <span class="btn-main-text">í•„ìš”ìˆ˜ìµë¥ </span>
                            <span class="btn-sub-text">Required Rate</span>
                            <div class="tooltip">
                                <div class="tooltip-title">í•„ìš”ìˆ˜ìµë¥  (Required Rate)</div>
                                ëª©í‘œ ê¸ˆì•¡ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì—°ê°„ ìˆ˜ìµë¥ ì„ ê³„ì‚°í•©ë‹ˆë‹¤. ì–´ë–¤ íˆ¬ì ìƒí’ˆì„ ì„ íƒí•´ì•¼ í• ì§€ íŒë‹¨í•˜ëŠ” ê¸°ì¤€ì´ ë©ë‹ˆë‹¤.
                            </div>
                        </button>
                        <button class="btn-toggle" data-find="n">
                            <span class="info-icon">i</span>
                            <span class="btn-main-text">íˆ¬ìê¸°ê°„</span>
                            <span class="btn-sub-text">Period</span>
                            <div class="tooltip">
                                <div class="tooltip-title">íˆ¬ìê¸°ê°„ (Investment Period)</div>
                                ëª©í‘œ ê¸ˆì•¡ì„ ëª¨ìœ¼ëŠ” ë° í•„ìš”í•œ ì‹œê°„(ë…„)ì„ ê³„ì‚°í•©ë‹ˆë‹¤. ì–¸ì œê¹Œì§€ ì €ì¶•í•˜ë©´ ëª©í‘œì— ë„ë‹¬í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </div>
                        </button>
                        <button class="btn-toggle" data-find="pv">
                            <span class="info-icon">i</span>
                            <span class="btn-main-text">í˜„ì¬ê°€ì¹˜</span>
                            <span class="btn-sub-text">Present Value</span>
                            <div class="tooltip">
                                <div class="tooltip-title">í˜„ì¬ê°€ì¹˜ (Present Value)</div>
                                ë¯¸ë˜ì˜ ëª©í‘œ ê¸ˆì•¡ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ì§€ê¸ˆ ë‹¹ì¥ íˆ¬ìí•´ì•¼ í•˜ëŠ” ì´ˆê¸° ê¸ˆì•¡ì„ ê³„ì‚°í•©ë‹ˆë‹¤. ëª©ëˆ íˆ¬ì ê³„íš ìˆ˜ë¦½ì— í™œìš©ë©ë‹ˆë‹¤.
                            </div>
                        </button>
                    </div>
                    <div class="help-text">
                        ğŸ’¡ ê° ë²„íŠ¼ì˜ â“˜ ì•„ì´ì½˜ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¤ ìƒì„¸ ì„¤ëª…ì„ í™•ì¸í•˜ì„¸ìš”<br>
                        âœ¨ ëª¨ë“  ê¸ˆì•¡ì€ ì–‘ìˆ˜ë¡œ ì…ë ¥í•˜ì‹œë©´ ë©ë‹ˆë‹¤
                    </div>
                </div>

                <div class="input-group" id="group-period">
                    <label>íˆ¬ì/ì €ì¶• ê¸°ê°„ <span style="color: #ef4444;">*</span></label>
                    <div class="two-inputs">
                        <div class="input-wrapper">
                            <input type="text" id="input-years" value="10" placeholder="ì˜ˆ: 10">
                            <span class="input-suffix">ë…„</span>
                        </div>
                        <div class="input-wrapper">
                            <select id="input-frequency">
                                <option value="1">ë§¤ë…„</option>
                                <option value="2">6ê°œì›”ë§ˆë‹¤</option>
                                <option value="4">3ê°œì›”ë§ˆë‹¤</option>
                                <option value="12" selected>ë§¤ì›”</option>
                            </select>
                        </div>
                    </div>
                    <div class="auto-calc" id="auto-n">
                        âœ“ ìë™ ê³„ì‚°: 10ë…„ Ã— ë§¤ì›” = ì´ 120íšŒ
                    </div>
                    <div class="help-text">
                        ğŸ“… <strong>ê¸°ê°„ ì„¤ì • ì˜ˆì‹œ:</strong><br>
                        â€¢ 10ë…„ + ë§¤ì›” = 10ë…„ê°„ ë§¤ë‹¬ ì €ì¶• (ì´ 120íšŒ)<br>
                        â€¢ 5ë…„ + ë§¤ë…„ = 5ë…„ê°„ 1ë…„ì— 1ë²ˆ ì €ì¶• (ì´ 5íšŒ)<br>
                        â€¢ 3ë…„ + 3ê°œì›”ë§ˆë‹¤ = 3ë…„ê°„ ë¶„ê¸°ë³„ ì €ì¶• (ì´ 12íšŒ)
                    </div>
                </div>

                <div class="input-group" id="group-iy">
                    <label>ì—° ì´ììœ¨ (ìˆ˜ìµë¥ ) <span style="color: #ef4444;">*</span></label>
                    <div class="input-wrapper">
                        <input type="text" id="input-iy" value="5" placeholder="ì˜ˆ: 5">
                        <span class="input-suffix">%</span>
                    </div>
                    <div class="help-text">
                        ğŸ“ˆ ì˜ˆê¸ˆ 3%, ì ê¸ˆ 4%, ì£¼ì‹ íˆ¬ì 7~10% ì •ë„ê°€ ì¼ë°˜ì ì…ë‹ˆë‹¤
                    </div>
                </div>

                <div class="input-group" id="group-pv">
                    <label>ì´ˆê¸° íˆ¬ìê¸ˆì•¡ (ëª©ëˆ)</label>
                    <div class="input-wrapper">
                        <input type="text" id="input-pv" value="10,000,000" placeholder="ì˜ˆ: 10,000,000">
                        <span class="input-suffix">ì›</span>
                    </div>
                    <div class="help-text">
                        ğŸ’µ ì²˜ìŒ í•œë²ˆì— íˆ¬ìí•˜ëŠ” ê¸ˆì•¡ (ì—†ìœ¼ë©´ 0 ì…ë ¥)
                    </div>
                </div>

                <div class="input-group" id="group-pmt">
                    <label>ì •ê¸° ì €ì¶•ê¸ˆì•¡</label>
                    <div class="input-wrapper">
                        <input type="text" id="input-pmt" value="100,000" placeholder="ì˜ˆ: 100,000">
                        <span class="input-suffix">ì›</span>
                    </div>
                    <div class="help-text">
                        ğŸ’³ ë§¤ì›”(ë˜ëŠ” ë§¤ë²ˆ) ê¾¸ì¤€íˆ ì €ì¶•í•˜ëŠ” ê¸ˆì•¡ (ì—†ìœ¼ë©´ 0 ì…ë ¥)
                    </div>
                </div>

                <div class="input-group" id="group-fv" style="display:none;">
                    <label>ëª©í‘œ ê¸ˆì•¡ (ë¯¸ë˜ê°€ì¹˜) <span style="color: #ef4444;">*</span></label>
                    <div class="input-wrapper">
                        <input type="text" id="input-fv" value="30,000,000" placeholder="ì˜ˆ: 30,000,000" disabled>
                        <span class="input-suffix">ì›</span>
                    </div>
                    <div class="help-text">
                        ğŸ¯ ë‹¬ì„±í•˜ê³  ì‹¶ì€ ëª©í‘œ ê¸ˆì•¡
                    </div>
                </div>

                <div class="options">
                    <div class="option-title">âš™ï¸ ì¶”ê°€ ì˜µì…˜</div>
                    
                    <div class="input-group">
                        <label>ì €ì¶• ì‹œì  ì„ íƒ</label>
                        <div class="button-group" style="grid-template-columns: 1fr 1fr;">
                            <button class="btn-toggle active" data-payment="end">ê¸°ê°„ ë§</button>
                            <button class="btn-toggle" data-payment="beginning">ê¸°ê°„ ì‹œì‘</button>
                        </div>
                        <div class="help-text">
                            ğŸ“† ì›”ë§ ì €ì¶•: "ê¸°ê°„ ë§" / ì›”ì´ˆ ì €ì¶•: "ê¸°ê°„ ì‹œì‘" (ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ê¸°ê°„ ë§ ì„ íƒ)
                        </div>
                    </div>
                </div>

                <button class="calculate-btn" onclick="calculate()">ğŸ§® ê³„ì‚°í•˜ê¸°</button>
            </div>

            <!-- ê²°ê³¼ ì„¹ì…˜ -->
            <div class="result-section">
                <h2 class="section-title">ğŸ“Š ê³„ì‚° ê²°ê³¼</h2>
                <div id="resultArea">
                    <div style="text-align: center; padding: 30px 20px; color: #6b7280; background: #f9fafb; border-radius: 8px; border: 2px dashed #e5e7eb;">
                        <p style="font-size: 48px; margin-bottom: 15px;">ğŸ“‹</p>
                        <p style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 10px;">
                            <strong style="color: #667eea;">ë¯¸ë˜ê°€ì¹˜</strong>ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤
                        </p>
                        <p style="font-size: 13px; line-height: 1.6; margin-top: 10px; color: #6b7280;">
                            ì§€ê¸ˆ íˆ¬ìí•œ ëˆê³¼ ê¾¸ì¤€í•œ ì €ì¶•ìœ¼ë¡œ<br>ë¯¸ë˜ì— ì–¼ë§ˆë¥¼ ëª¨ì„ ìˆ˜ ìˆëŠ”ì§€ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤
                        </p>
                        <p style="font-size: 14px; line-height: 1.6; margin-top: 15px;">
                            ê°’ì„ ì…ë ¥í•˜ê³ <br>
                            'ê³„ì‚°í•˜ê¸°' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p class="footer-copyright">Copyright Â© 2025 KFPC Co., Ltd. All Rights Reserved.</p>
    </div>

    <script>
        let currentFind = 'fv';
        let currentPayment = 'end';

        window.onload = function() {
            document.getElementById('instructionModal').style.display = 'block';
            updateAutoCalc();
            // ì´ˆê¸° ìƒíƒœ ì„¤ì • (ë¯¸ë˜ê°€ì¹˜ ëª¨ë“œ)
            document.getElementById('group-fv').style.display = 'none';
        };

        function closeModal() {
            document.getElementById('instructionModal').style.display = 'none';
        }

        function formatNumber(num) {
            if (!num && num !== 0) return '';
            const number = parseInt(num.toString().replace(/,/g, ''));
            if (isNaN(number)) return '';
            return number.toLocaleString('ko-KR');
        }

        function parseNumber(str) {
            if (!str) return 0;
            return parseInt(str.toString().replace(/,/g, '')) || 0;
        }

        function updateAutoCalc() {
            const years = parseFloat(document.getElementById('input-years').value) || 0;
            const frequency = parseInt(document.getElementById('input-frequency').value) || 1;
            const total = years * frequency;
            
            const freqText = {
                '1': 'ë§¤ë…„ 1íšŒ',
                '2': '6ê°œì›”ë§ˆë‹¤ (ì—° 2íšŒ)',
                '4': '3ê°œì›”ë§ˆë‹¤ (ì—° 4íšŒ)',
                '12': 'ë§¤ì›” (ì—° 12íšŒ)'
            };
            
            const freqLabel = {
                '1': 'ë§¤ë…„',
                '2': '6ê°œì›”ë§ˆë‹¤',
                '4': '3ê°œì›”ë§ˆë‹¤',
                '12': 'ë§¤ì›”'
            };
            
            if (years === 1) {
                document.getElementById('auto-n').textContent = 
                    `âœ“ ìë™ ê³„ì‚°: 1ë…„ ë™ì•ˆ ${freqLabel[frequency]} ì €ì¶• = ì´ ${total}íšŒ`;
            } else {
                document.getElementById('auto-n').textContent = 
                    `âœ“ ìë™ ê³„ì‚°: ${years}ë…„ Ã— ${freqLabel[frequency]} = ì´ ${total}íšŒ ì €ì¶•`;
            }
        }

        document.getElementById('input-years').addEventListener('input', updateAutoCalc);
        document.getElementById('input-frequency').addEventListener('change', updateAutoCalc);

        document.querySelectorAll('input[type="text"]').forEach(input => {
            if (input.id !== 'input-iy' && input.id !== 'input-years') {
                input.addEventListener('input', function(e) {
                    // ìˆ«ìë§Œ ì¶”ì¶œ (ë§ˆì´ë„ˆìŠ¤ ì œê±°)
                    const value = e.target.value.replace(/[^0-9]/g, '');
                    
                    if (value) {
                        e.target.value = formatNumber(value);
                    } else {
                        e.target.value = '';
                    }
                });
            }
        });

        const modeDescriptions = {
            'fv': {
                title: 'ë¯¸ë˜ê°€ì¹˜',
                desc: 'ì§€ê¸ˆ íˆ¬ìí•œ ëˆê³¼ ê¾¸ì¤€í•œ ì €ì¶•ìœ¼ë¡œ<br>ë¯¸ë˜ì— ì–¼ë§ˆë¥¼ ëª¨ì„ ìˆ˜ ìˆëŠ”ì§€ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤',
                required: ['period', 'iy', 'pv_or_pmt']
            },
            'pmt': {
                title: 'ì •ê¸°ë‚©ì…ì•¡',
                desc: 'ëª©í‘œ ê¸ˆì•¡ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•´<br>ë§¤ë²ˆ ì–¼ë§ˆì”© ì €ì¶•í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤',
                required: ['period', 'iy', 'fv']
            },
            'iy': {
                title: 'í•„ìš”ìˆ˜ìµë¥ ',
                desc: 'ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´<br>ì–´ëŠ ì •ë„ì˜ ìˆ˜ìµë¥ ì´ í•„ìš”í•œì§€ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤',
                required: ['period', 'pv_or_pmt', 'fv']
            },
            'n': {
                title: 'íˆ¬ìê¸°ê°„',
                desc: 'ëª©í‘œ ê¸ˆì•¡ì„ ëª¨ìœ¼ëŠ”ë°<br>ì–¼ë§ˆë‚˜ ì‹œê°„ì´ ê±¸ë¦¬ëŠ”ì§€ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤',
                required: ['iy', 'pv_or_pmt', 'fv']
            },
            'pv': {
                title: 'í˜„ì¬ê°€ì¹˜',
                desc: 'ë¯¸ë˜ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´<br>ì§€ê¸ˆ ì–¼ë§ˆë¥¼ íˆ¬ìí•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤',
                required: ['period', 'iy', 'fv']
            }
        };

        document.querySelectorAll('[data-find]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-find]').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentFind = this.dataset.find;
                
                // ëª¨ë“  ì…ë ¥ í•„ë“œ í™œì„±í™” ë° í‘œì‹œ
                document.querySelectorAll('.input-group').forEach(g => {
                    if (g.id && g.id.startsWith('group-')) {
                        const input = g.querySelector('input, select');
                        if (input) input.disabled = false;
                    }
                });
                
                // ì„ íƒëœ í•­ëª©ì— ë”°ë¼ í•„ë“œ ì²˜ë¦¬
                if (currentFind === 'fv') {
                    // ë¯¸ë˜ê°€ì¹˜ ëª¨ë“œ: FVëŠ” ê²°ê³¼ê°’ì´ë¯€ë¡œ ë¹„í™œì„±í™”
                    document.getElementById('group-fv').style.display = 'none';
                    document.getElementById('group-pv').style.display = 'block';
                    document.getElementById('group-pmt').style.display = 'block';
                } else if (currentFind === 'pmt') {
                    // ì •ê¸°ë‚©ì…ì•¡ ëª¨ë“œ: PMTëŠ” ê²°ê³¼ê°’, FV í•„ìš”
                    document.getElementById('input-pmt').disabled = true;
                    document.getElementById('group-fv').style.display = 'block';
                    document.getElementById('input-fv').disabled = false;
                } else if (currentFind === 'iy') {
                    // í•„ìš”ìˆ˜ìµë¥  ëª¨ë“œ: IYëŠ” ê²°ê³¼ê°’, FV í•„ìš”
                    document.getElementById('input-iy').disabled = true;
                    document.getElementById('group-fv').style.display = 'block';
                    document.getElementById('input-fv').disabled = false;
                } else if (currentFind === 'n') {
                    // íˆ¬ìê¸°ê°„ ëª¨ë“œ: ê¸°ê°„ì€ ê²°ê³¼ê°’, FV í•„ìš”
                    document.getElementById('input-years').disabled = true;
                    document.getElementById('input-frequency').disabled = true;
                    document.getElementById('group-fv').style.display = 'block';
                    document.getElementById('input-fv').disabled = false;
                } else if (currentFind === 'pv') {
                    // í˜„ì¬ê°€ì¹˜ ëª¨ë“œ: PVëŠ” ê²°ê³¼ê°’, FV í•„ìš”
                    document.getElementById('input-pv').disabled = true;
                    document.getElementById('group-fv').style.display = 'block';
                    document.getElementById('input-fv').disabled = false;
                }
                
                // ì•ˆë‚´ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
                const mode = modeDescriptions[currentFind];
                document.getElementById('resultArea').innerHTML = `
                    <div style="text-align: center; padding: 30px 20px; color: #6b7280; background: #f9fafb; border-radius: 8px; border: 2px dashed #e5e7eb;">
                        <p style="font-size: 48px; margin-bottom: 15px;">ğŸ“‹</p>
                        <p style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 10px;">
                            <strong style="color: #667eea;">${mode.title}</strong>ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤
                        </p>
                        <p style="font-size: 13px; line-height: 1.6; margin-top: 10px; color: #6b7280;">
                            ${mode.desc}
                        </p>
                        <p style="font-size: 14px; line-height: 1.6; margin-top: 15px;">
                            ê°’ì„ ì…ë ¥í•˜ê³ <br>
                            'ê³„ì‚°í•˜ê¸°' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”
                        </p>
                    </div>
                `;
            });
        });

        document.querySelectorAll('[data-payment]').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('[data-payment]').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentPayment = this.dataset.payment;
            });
        });

        function calculate() {
            try {
                const years = parseFloat(document.getElementById('input-years').value) || 0;
                const frequency = parseInt(document.getElementById('input-frequency').value) || 1;
                const n = years * frequency;
                const iy = parseFloat(document.getElementById('input-iy').value) || 0;
                
                // ì‚¬ìš©ì ì…ë ¥ê°’ì„ ì–‘ìˆ˜ë¡œ ë°›ì•„ì„œ ë‚´ë¶€ì ìœ¼ë¡œ ìŒìˆ˜ë¡œ ì²˜ë¦¬
                let pv = parseNumber(document.getElementById('input-pv').value);
                let pmt = parseNumber(document.getElementById('input-pmt').value);
                const fv = parseNumber(document.getElementById('input-fv').value);
                
                // ì…ë ¥ê°’ ê²€ì¦
                if (currentFind !== 'n' && years <= 0) {
                    showError('íˆ¬ì ê¸°ê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”! (ì˜ˆ: 10ë…„)');
                    return;
                }
                if (currentFind !== 'iy' && iy === 0) {
                    showError('ì—° ì´ììœ¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”! (ì˜ˆ: ì˜ˆê¸ˆ 3%, íˆ¬ì 5~7%)');
                    return;
                }
                
                // ê° ëª¨ë“œë³„ í•„ìˆ˜ ì…ë ¥ ì²´í¬
                if (currentFind === 'fv' && pv === 0 && pmt === 0) {
                    showError('ì´ˆê¸° íˆ¬ìê¸ˆ ë˜ëŠ” ì •ê¸° ì €ì¶•ê¸ˆì•¡ ì¤‘ í•˜ë‚˜ëŠ” ë°˜ë“œì‹œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤!');
                    return;
                }
                if (currentFind === 'pmt' && fv === 0) {
                    showError('ëª©í‘œ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;
                }
                if (currentFind === 'iy' && fv === 0) {
                    showError('ëª©í‘œ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;
                }
                if (currentFind === 'n' && fv === 0) {
                    showError('ëª©í‘œ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;
                }
                if (currentFind === 'pv' && fv === 0) {
                    showError('ëª©í‘œ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;
                }
                
                // PVì™€ PMTëŠ” ì§€ì¶œì´ë¯€ë¡œ ìŒìˆ˜ë¡œ ë³€í™˜ (ì‚¬ìš©ìê°€ ìŒìˆ˜ë¡œ ì…ë ¥í–ˆì–´ë„ ì ˆëŒ“ê°’ í›„ ìŒìˆ˜ ì ìš©)
                if (currentFind !== 'pv') {
                    pv = -Math.abs(pv);
                }
                if (currentFind !== 'pmt') {
                    pmt = -Math.abs(pmt);
                }

                const r = (iy / 100) / frequency;
                const paymentType = currentPayment === 'beginning' ? 1 : 0;
                let result;

                switch(currentFind) {
                    case 'fv':
                        result = calculateFV(r, n, pmt, pv, paymentType);
                        displayResult(result, n, iy, pv, pmt, years, frequency);
                        break;
                    case 'pv':
                        result = calculatePV(r, n, pmt, fv, paymentType);
                        displayPVResult(result, fv, pmt, n, iy, years, frequency);
                        break;
                    case 'pmt':
                        result = calculatePMT(r, n, pv, fv, paymentType);
                        displayPMTResult(result, pv, fv, n, iy, years, frequency);
                        break;
                    case 'iy':
                        result = calculateRate(n, pmt, pv, fv, paymentType) * 100 * frequency;
                        displayIYResult(result, pv, pmt, fv, years, frequency);
                        break;
                    case 'n':
                        result = calculateNPER(r, pmt, pv, fv, paymentType);
                        displayNResult(result, pv, pmt, fv, iy, frequency);
                        break;
                }

            } catch (error) {
                showError('ê³„ì‚° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                console.error(error);
            }
        }

        function calculateFV(rate, nper, pmt, pv, type) {
            if (rate === 0) {
                return -(pv + pmt * nper);
            }
            const pvFactor = Math.pow(1 + rate, nper);
            const pmtFactor = (1 + rate * type) * ((pvFactor - 1) / rate);
            return -(pv * pvFactor + pmt * pmtFactor);
        }

        function calculatePV(rate, nper, pmt, fv, type) {
            if (rate === 0) {
                return -(fv + pmt * nper);
            }
            const pvFactor = Math.pow(1 + rate, nper);
            const pmtFactor = (1 + rate * type) * ((pvFactor - 1) / rate);
            return -(fv + pmt * pmtFactor) / pvFactor;
        }

        function calculatePMT(rate, nper, pv, fv, type) {
            if (rate === 0) {
                return -(pv + fv) / nper;
            }
            const pvFactor = Math.pow(1 + rate, nper);
            return -(rate * (fv + pv * pvFactor)) / ((1 + rate * type) * (pvFactor - 1));
        }

        function calculateRate(nper, pmt, pv, fv, type) {
            let rate = 0.1;
            for (let i = 0; i < 100; i++) {
                const f = calculateFV(rate, nper, pmt, pv, type) - fv;
                const df = (calculateFV(rate + 0.0000001, nper, pmt, pv, type) - fv - f) / 0.0000001;
                const newRate = rate - f / df;
                if (Math.abs(newRate - rate) < 0.0000001) return newRate;
                rate = newRate;
            }
            return rate;
        }

        function calculateNPER(rate, pmt, pv, fv, type) {
            if (rate === 0) {
                return -(pv + fv) / pmt;
            }
            const num = Math.log((pmt * (1 + rate * type) - fv * rate) / (pmt * (1 + rate * type) + pv * rate));
            return num / Math.log(1 + rate);
        }

        function displayResult(fv, n, iy, pv, pmt, years, frequency) {
            const totalPayment = Math.abs(pmt * n);
            const totalInterest = Math.abs(fv) - Math.abs(pv) - totalPayment;
            
            let description = '';
            if (pv !== 0 && pmt !== 0) {
                description = `ì²˜ìŒ <strong>${formatNumber(Math.abs(pv))}ì›</strong>ì„ íˆ¬ìí•˜ê³ ,<br>
                ë§¤ë²ˆ <strong>${formatNumber(Math.abs(pmt))}ì›</strong>ì”© ${years}ë…„ê°„ ì €ì¶•í•˜ë©´`;
            } else if (pv !== 0) {
                description = `<strong>${formatNumber(Math.abs(pv))}ì›</strong>ì„ ${years}ë…„ê°„ íˆ¬ìí•˜ë©´`;
            } else {
                description = `ë§¤ë²ˆ <strong>${formatNumber(Math.abs(pmt))}ì›</strong>ì”© ${years}ë…„ê°„ ì €ì¶•í•˜ë©´`;
            }
            
            const resultArea = document.getElementById('resultArea');
            resultArea.innerHTML = `
                <div class="result-box">
                    <div class="result-item">
                        <span class="result-label">ğŸ’° ë¯¸ë˜ì— ëª¨ì´ëŠ” ëˆ</span>
                        <span class="result-value">â‚©${formatNumber(Math.abs(Math.round(fv)))}</span>
                    </div>
                </div>
                
                <div class="result-explanation">
                    <strong style="font-size: 16px;">ğŸ“Š ê³„ì‚° ê²°ê³¼</strong><br><br>
                    ${description}<br>
                    ì—° ${iy}% ìˆ˜ìµë¥ ë¡œ <strong style="color: #047857; font-size: 18px;">â‚©${formatNumber(Math.abs(Math.round(fv)))}ì›</strong>ì´ ë©ë‹ˆë‹¤!<br><br>
                    
                    <div style="background: white; padding: 12px; border-radius: 6px; margin-top: 12px;">
                        <strong>ğŸ’µ ëˆì˜ íë¦„:</strong><br>
                        â€¢ ë‚´ê°€ íˆ¬ìí•œ ëˆ: ${formatNumber(Math.abs(pv))}ì›<br>
                        â€¢ ì €ì¶•í•œ ëˆ: ${formatNumber(totalPayment)}ì›<br>
                        â€¢ ì´ìë¡œ ë²ˆ ëˆ: <strong style="color: #059669;">${formatNumber(Math.round(totalInterest))}ì›</strong><br>
                        â€¢ ìµœì¢… ê¸ˆì•¡: <strong style="color: #047857;">${formatNumber(Math.abs(Math.round(fv)))}ì›</strong>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title">ğŸ“ˆ ëˆì´ ë¶ˆì–´ë‚˜ëŠ” ê³¼ì •</div>
                    <canvas id="resultChart" width="400" height="250"></canvas>
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: #fbbf24;"></div>
                            <span>ë‚´ íˆ¬ìê¸ˆ</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #a78bfa;"></div>
                            <span>ì €ì¶• ì´ì•¡</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #34d399;"></div>
                            <span>ì´ì ìˆ˜ìµ</span>
                        </div>
                    </div>
                </div>
            `;
            
            drawFVChart(Math.abs(pv), totalPayment, totalInterest, years, n, pv, pmt, iy / 100, frequency);
        }

        function displayPMTResult(pmt, pv, fv, n, iy, years, frequency) {
            const freqText = {1: 'ë§¤ë…„', 2: '6ê°œì›”ë§ˆë‹¤', 4: '3ê°œì›”ë§ˆë‹¤', 12: 'ë§¤ì›”'};
            
            const resultArea = document.getElementById('resultArea');
            resultArea.innerHTML = `
                <div class="result-box">
                    <div class="result-item">
                        <span class="result-label">ğŸ’³ ë§¤ë²ˆ ì €ì¶•í•  ê¸ˆì•¡</span>
                        <span class="result-value">â‚©${formatNumber(Math.abs(Math.round(pmt)))}</span>
                    </div>
                </div>
                
                <div class="result-explanation">
                    <strong style="font-size: 16px;">ğŸ“Š ê³„ì‚° ê²°ê³¼</strong><br><br>
                    ${pv !== 0 ? `ì²˜ìŒ ${formatNumber(Math.abs(pv))}ì›ìœ¼ë¡œ ì‹œì‘í•´ì„œ, ` : ''}
                    <strong style="color: #047857; font-size: 18px;">â‚©${formatNumber(Math.abs(Math.round(pmt)))}ì›</strong>ì”© ${freqText[frequency]} ì €ì¶•í•˜ë©´<br>
                    ${years}ë…„ í›„ <strong>${formatNumber(Math.abs(fv))}ì›</strong>ì„ ëª¨ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!<br><br>
                    
                    <div style="background: white; padding: 12px; border-radius: 6px; margin-top: 12px;">
                        <strong>ğŸ’µ ì €ì¶• ê³„íš:</strong><br>
                        ${pv !== 0 ? `â€¢ ì²˜ìŒ íˆ¬ì: ${formatNumber(Math.abs(pv))}ì›<br>` : ''}
                        â€¢ ${freqText[frequency]} ì €ì¶•: ${formatNumber(Math.abs(Math.round(pmt)))}ì›<br>
                        â€¢ ì €ì¶• ê¸°ê°„: ${years}ë…„ (${n}íšŒ)<br>
                        â€¢ ì´ ì €ì¶•ì•¡: ${formatNumber(Math.round(Math.abs(pmt * n)))}ì›<br>
                        â€¢ ëª©í‘œ ë‹¬ì„±: <strong style="color: #047857;">${formatNumber(Math.abs(fv))}ì›</strong>
                    </div>
                </div>
            `;
        }

        function displayPVResult(pv, fv, pmt, n, iy, years, frequency) {
            const resultArea = document.getElementById('resultArea');
            resultArea.innerHTML = `
                <div class="result-box">
                    <div class="result-item">
                        <span class="result-label">ğŸ’µ ì§€ê¸ˆ í•„ìš”í•œ ê¸ˆì•¡</span>
                        <span class="result-value">â‚©${formatNumber(Math.abs(Math.round(pv)))}</span>
                    </div>
                </div>
                
                <div class="result-explanation">
                    <strong style="font-size: 16px;">ğŸ“Š ê³„ì‚° ê²°ê³¼</strong><br><br>
                    ${years}ë…„ í›„ <strong>${formatNumber(Math.abs(fv))}ì›</strong>ì„ ë§Œë“¤ë ¤ë©´,<br>
                    ì§€ê¸ˆ <strong style="color: #047857; font-size: 18px;">â‚©${formatNumber(Math.abs(Math.round(pv)))}ì›</strong>ì„ íˆ¬ìí•´ì•¼ í•©ë‹ˆë‹¤!<br><br>
                    
                    <div style="background: white; padding: 12px; border-radius: 6px; margin-top: 12px;">
                        <strong>ğŸ’¡ íˆ¬ì ì •ë³´:</strong><br>
                        â€¢ í•„ìš”í•œ ì´ˆê¸° íˆ¬ìê¸ˆ: ${formatNumber(Math.abs(Math.round(pv)))}ì›<br>
                        ${pmt !== 0 ? `â€¢ ì¶”ê°€ ì €ì¶•: ${formatNumber(Math.abs(pmt))}ì›/íšŒ<br>` : ''}
                        â€¢ íˆ¬ì ê¸°ê°„: ${years}ë…„<br>
                        â€¢ ì˜ˆìƒ ìˆ˜ìµë¥ : ${iy}%<br>
                        â€¢ ëª©í‘œ ê¸ˆì•¡: <strong style="color: #047857;">${formatNumber(Math.abs(fv))}ì›</strong>
                    </div>
                </div>
            `;
        }

        function displayIYResult(iy, pv, pmt, fv, years, frequency) {
            let risk = '';
            if (iy < 5) risk = 'ì˜ˆê¸ˆ/ì ê¸ˆ ìˆ˜ì¤€ì˜ ì•ˆì „í•œ íˆ¬ì';
            else if (iy < 10) risk = 'ì±„ê¶Œì´ë‚˜ ë°°ë‹¹ì£¼ ê°™ì€ ì¤‘ê°„ ìœ„í—˜ íˆ¬ì';
            else risk = 'ì£¼ì‹ì´ë‚˜ í€ë“œ ê°™ì€ ì ê·¹ì  íˆ¬ì';
            
            const resultArea = document.getElementById('resultArea');
            resultArea.innerHTML = `
                <div class="result-box">
                    <div class="result-item">
                        <span class="result-label">ğŸ“ˆ í•„ìš”í•œ ìˆ˜ìµë¥ </span>
                        <span class="result-value">${iy.toFixed(2)}%</span>
                    </div>
                </div>
                
                <div class="result-explanation">
                    <strong style="font-size: 16px;">ğŸ“Š ê³„ì‚° ê²°ê³¼</strong><br><br>
                    ${pv !== 0 ? `${formatNumber(Math.abs(pv))}ì›ì„ íˆ¬ìí•˜ê³ , ` : ''}
                    ${pmt !== 0 ? `ë§¤ë²ˆ ${formatNumber(Math.abs(pmt))}ì›ì”© ì €ì¶•í•´ì„œ ` : ''}
                    ${years}ë…„ í›„ ${formatNumber(Math.abs(fv))}ì›ì„ ë§Œë“¤ë ¤ë©´<br>
                    ì—° <strong style="color: #047857; font-size: 18px;">${iy.toFixed(2)}%</strong>ì˜ ìˆ˜ìµë¥ ì´ í•„ìš”í•©ë‹ˆë‹¤!<br><br>
                    
                    <div style="background: white; padding: 12px; border-radius: 6px; margin-top: 12px;">
                        <strong>ğŸ’¡ íˆ¬ì ê°€ì´ë“œ:</strong><br>
                        â€¢ í•„ìš” ìˆ˜ìµë¥ : ${iy.toFixed(2)}%<br>
                        â€¢ ì í•©í•œ íˆ¬ì: ${risk}<br>
                        â€¢ íˆ¬ì ê¸°ê°„: ${years}ë…„
                    </div>
                </div>
            `;
        }

        function displayNResult(n, pv, pmt, fv, iy, frequency) {
            const years = (n / frequency).toFixed(1);
            const months = Math.round(n / frequency * 12);
            
            const resultArea = document.getElementById('resultArea');
            resultArea.innerHTML = `
                <div class="result-box">
                    <div class="result-item">
                        <span class="result-label">â° í•„ìš”í•œ ê¸°ê°„</span>
                        <span class="result-value">${years}ë…„</span>
                    </div>
                </div>
                
                <div class="result-explanation">
                    <strong style="font-size: 16px;">ğŸ“Š ê³„ì‚° ê²°ê³¼</strong><br><br>
                    ${pv !== 0 ? `${formatNumber(Math.abs(pv))}ì›ìœ¼ë¡œ ì‹œì‘í•´ì„œ, ` : ''}
                    ${pmt !== 0 ? `ë§¤ë²ˆ ${formatNumber(Math.abs(pmt))}ì›ì”© ì €ì¶•í•˜ë©´ ` : ''}
                    ì—° ${iy}% ìˆ˜ìµë¥ ë¡œ<br>
                    <strong style="color: #047857; font-size: 18px;">${years}ë…„</strong> (ì•½ ${months}ê°œì›”) í›„ì— ${formatNumber(Math.abs(fv))}ì›ì„ ëª¨ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!<br><br>
                    
                    <div style="background: white; padding: 12px; border-radius: 6px; margin-top: 12px;">
                        <strong>â±ï¸ ì‹œê°„ ì •ë³´:</strong><br>
                        â€¢ ì†Œìš” ê¸°ê°„: ${years}ë…„ (${months}ê°œì›”)<br>
                        â€¢ ì´ ì €ì¶• íšŸìˆ˜: ${Math.round(n)}íšŒ<br>
                        â€¢ ëª©í‘œ ê¸ˆì•¡: ${formatNumber(Math.abs(fv))}ì›
                    </div>
                </div>
            `;
        }

        function showError(message) {
            document.getElementById('resultArea').innerHTML = `
                <div class="error-message">
                    âš ï¸ ${message}
                </div>
            `;
        }

        function drawFVChart(initialPV, totalPMT, totalInterest, years, n, pv, pmt, annualRate, frequency) {
            const canvas = document.getElementById('resultChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const points = 5;
            const data = [];
            const rate = annualRate / frequency;
            
            for (let i = 0; i <= points; i++) {
                const period = Math.floor((n * i) / points);
                let cumPV = pv * Math.pow(1 + rate, period);
                let cumPMT = pmt * ((Math.pow(1 + rate, period) - 1) / rate);
                let fv = -(cumPV + cumPMT);
                
                data.push({
                    period: period,
                    pv: Math.abs(pv),
                    pmt: Math.abs(pmt * period),
                    interest: fv - Math.abs(pv) - Math.abs(pmt * period),
                    total: fv
                });
            }
            
            const maxValue = Math.max(...data.map(d => d.total));
            const padding = 40;
            const barWidth = (width - padding * 2) / points - 10;
            
            data.forEach((d, i) => {
                const x = padding + i * ((width - padding * 2) / points);
                const scale = (height - padding * 2) / maxValue;
                
                const pvHeight = d.pv * scale;
                ctx.fillStyle = '#fbbf24';
                ctx.fillRect(x, height - padding - pvHeight, barWidth, pvHeight);
                
                const pmtHeight = d.pmt * scale;
                ctx.fillStyle = '#a78bfa';
                ctx.fillRect(x, height - padding - pvHeight - pmtHeight, barWidth, pmtHeight);
                
                const interestHeight = d.interest * scale;
                ctx.fillStyle = '#34d399';
                ctx.fillRect(x, height - padding - pvHeight - pmtHeight - interestHeight, barWidth, interestHeight);
                
                ctx.fillStyle = '#374151';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'center';
                const yearLabel = (d.period / frequency).toFixed(0);
                ctx.fillText(yearLabel + 'ë…„', x + barWidth / 2, height - padding + 20);
            });
        }
    </script>
</body>
</html>