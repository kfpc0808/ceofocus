<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fin. Master - ë¡œê·¸ì¸</title>
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #0c2c54 0%, #2a5a8a 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            color: #333;
        }

        /* ê³µí†µ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .container-box {
            background: white;
            padding: 2rem 1.5rem; /* íŒ¨ë”© ì¶•ì†Œ */
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 420px; /* ëª¨ë°”ì¼ ìµœì í™” í­ */
            animation: fadeIn 0.5s ease-out;
            position: relative;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            text-align: center;
            color: #0c2c54;
            margin-bottom: 0.25rem;
            font-size: 1.5rem; /* í°íŠ¸ ì‚¬ì´ì¦ˆ ì¶•ì†Œ */
        }

        .subtitle {
            text-align: center;
            color: #6c757d;
            margin-bottom: 1.25rem; /* ì—¬ë°± ì¶•ì†Œ */
            font-size: 0.8rem;
            line-height: 1.3;
        }

        /* í¼ ê·¸ë£¹ ê°„ê²© ì¶•ì†Œ */
        .form-group {
            margin-bottom: 0.8rem;
        }

        label {
            display: block;
            margin-bottom: 0.3rem;
            color: #0c2c54;
            font-weight: 600;
            font-size: 0.85rem;
        }

        /* ê¸°ë³¸ ì¸í’‹ ìŠ¤íƒ€ì¼ - ë†’ì´ ì¶•ì†Œ */
        input, select {
            width: 100%;
            padding: 0.7rem;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 15px;
            transition: border-color 0.3s;
            -webkit-appearance: none;
            background: #fff;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #2a5a8a;
        }

        /* 2ë‹¨ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ (ëª¨ë°”ì¼ ê³µê°„ ì ˆì•½ìš©) */
        .row-group {
            display: flex;
            gap: 0.5rem;
        }
        .row-group > div {
            flex: 1;
        }

        /* ë¶„í• ëœ ì¸í’‹ ê·¸ë£¹ */
        .input-group {
            display: flex;
            gap: 0.3rem;
            align-items: center;
        }
        
        .input-group select { padding-right: 1.2rem; }

        /* ì „í™”ë²ˆí˜¸ ìŠ¤íƒ€ì¼ */
        .phone-group select { width: 30%; padding: 0.6rem 0.2rem; text-align: center; }
        .phone-group input { width: 35%; text-align: center; padding: 0.6rem 0.2rem; }
        .phone-group span { font-weight: bold; color: #ccc; font-size: 0.8rem; }

        /* ì´ë©”ì¼ ìŠ¤íƒ€ì¼ */
        .email-group input { flex: 1; padding: 0.6rem; }
        .email-group select { flex: 1; padding: 0.6rem; }
        .email-group span { font-weight: bold; color: #ccc; font-size: 0.9rem; }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn {
            width: 100%;
            padding: 0.9rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 0.8rem;
            background: #0c2c54;
            color: white;
        }

        .btn:active { transform: scale(0.98); }
        
        .btn-secondary {
            background: #fff;
            color: #0c2c54;
            border: 2px solid #0c2c54;
            margin-top: 0.5rem;
        }
        
        .btn-back {
            background: transparent;
            color: #666;
            font-size: 0.85rem;
            margin-top: 0.8rem;
            font-weight: normal;
            padding: 0.5rem;
        }
        
        .btn-gold {
            background: linear-gradient(135deg, #0c2c54 0%, #1a4a7a 50%, #D4AF37 100%);
            color: white;
            margin-top: 1rem;
            border: 2px solid #D4AF37;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }
        .btn-gold:hover {
            background: linear-gradient(135deg, #D4AF37 0%, #B8962E 50%, #0c2c54 100%);
        }

        .divider {
            text-align: center;
            margin: 1.2rem 0 0.8rem;
            color: #6c757d;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
        }
        .divider::before, .divider::after {
            content: "";
            flex: 1;
            border-bottom: 1px solid #dee2e6;
        }
        .divider::before { margin-right: 10px; }
        .divider::after { margin-left: 10px; }

        .message {
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
            white-space: pre-line;
            font-size: 0.85rem;
            text-align: center;
        }
        .message.error { background: #f8d7da; color: #721c24; }
        .message.success { background: #d4edda; color: #155724; }
        .message.info { background: #e7f3ff; color: #0c2c54; }

        .hidden { display: none !important; }

        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .loading-overlay {
            position: fixed;
            inset: 0;
            background: rgba(12, 44, 84, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,.2);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* ê³„ì¢Œ ì •ë³´ ë°•ìŠ¤ (ì»´íŒ©íŠ¸ ë²„ì „) */
        .account-info-box {
            background: #f1f8ff;
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border: 1px solid #d0e6fd;
            text-align: center;
        }
        .account-info-title {
            color: #0c2c54;
            font-weight: 700;
            margin-bottom: 0.2rem;
            font-size: 0.85rem;
        }
        .account-info-detail {
            color: #555;
            font-size: 0.8rem;
        }

        /* ì»¤ìŠ¤í…€ íŒì—… ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .custom-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.2s;
        }
        .custom-modal {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            width: 85%;
            max-width: 300px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transform: scale(0.9);
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        @keyframes popIn {
            to { transform: scale(1); }
        }
        .custom-modal h3 {
            color: #e74c3c;
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
        }
        .custom-modal p {
            color: #333;
            margin-bottom: 1.2rem;
            font-size: 0.95rem;
            line-height: 1.4;
        }
        .custom-modal button {
            background: #0c2c54;
            color: white;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 8px;
            font-size: 0.95rem;
            cursor: pointer;
            width: 100%;
        }
        
        /* ì»¤ìŠ¤í…€ ì²´í¬ë°•ìŠ¤ */
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            cursor: pointer;
            position: relative;
        }
        .checkbox-label input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }
        .checkbox-label .checkmark {
            width: 22px;
            height: 22px;
            background: #fff;
            border: 2px solid #4a90d9;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .checkbox-label input[type="checkbox"]:checked + .checkmark {
            background: #4a90d9;
        }
        .checkbox-label input[type="checkbox"]:checked + .checkmark::after {
            content: 'âœ“';
            color: #fff;
            font-size: 16px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
    </div>

    <!-- ì»¤ìŠ¤í…€ ì•Œë¦¼ íŒì—… -->
    <div class="custom-modal-overlay" id="customAlert">
        <div class="custom-modal">
            <h3>âš ï¸ ì…ë ¥ í™•ì¸</h3>
            <p id="customAlertMsg">ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
            <button onclick="closeCustomAlert()">í™•ì¸</button>
        </div>
    </div>

    <!-- 1. ë¡œê·¸ì¸ í™”ë©´ -->
    <div id="loginView" class="container-box">
        <h1>ğŸ” ë¡œê·¸ì¸</h1>
        <h1 style="margin-top: 0.3rem; font-size: inherit;">Fin. Master</h1>
        <p class="subtitle">'ê¸°ì—…ë§ˆë‹¹' ì •ë¶€ì§€ì›ìê¸ˆ ë¶„ì„ì‹œìŠ¤í…œ</p>
        
        <div id="loginMessage" class="message"></div>
        
        <form id="loginForm">
            <div class="form-group">
                <label>ì•„ì´ë”” (ID)</label>
                <input type="text" id="userId" placeholder="ì•„ì´ë”” ì…ë ¥" required autocomplete="username">
            </div>
            
            <div class="form-group">
                <label>ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="userPw" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" required autocomplete="current-password">
            </div>
            
            <button type="submit" class="btn">ë¡œê·¸ì¸</button>
        </form>
        
        <div class="divider">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?</div>
        
        <button type="button" class="btn btn-secondary" onclick="switchView('signup')">íšŒì›ê°€ì… ì‹ ì²­í•˜ê¸°</button>
        <div style="text-align: center; margin-top: 0.5rem; font-size: 0.75rem; color: #666;">
            * ì‹ ì²­í•˜ì‹œë©´ ë³¸ì‚¬ í™•ì¸ í›„ ì•„ì´ë””ë¥¼ ë°œê¸‰í•´ë“œë¦½ë‹ˆë‹¤.
        </div>
        
        <!-- ìƒì„¸ë¶„ì„ ìƒ˜í”Œ ì¡°íšŒ ë²„íŠ¼ -->
        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; justify-content: center;">
            <button type="button" class="btn btn-gold" onclick="showDetailSample()">
                ğŸ“Š AIìƒì„¸ë¶„ì„(ìƒ˜í”Œ)
            </button>
            <a href="https://www.youtube.com/watch?v=sM7I_GKo9UA&feature=youtu.be" target="_blank" class="btn btn-gold" style="text-decoration: none;">
                ğŸ¬ ë¶„ì„í™”ë©´ ë°”ë¡œë³´ê¸°(ì˜ìƒ)
            </a>
        </div>
    </div>

    <!-- 2. íšŒì›ê°€ì… ì‹ ì²­ í™”ë©´ (ëª¨ë°”ì¼ ìµœì í™”) -->
    <div id="signupView" class="container-box hidden">
        <h1>ğŸ“ íšŒì›ê°€ì… ì‹ ì²­</h1>
        <p class="subtitle">í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
        
        <div id="signupMessage" class="message"></div>

        <form id="signupForm" novalidate>
            <!-- 1ì—´: ì„±ëª… / ì†Œì† -->
            <div class="row-group">
                <div class="form-group">
                    <label>ì„±ëª… <span style="color:red">*</span></label>
                    <input type="text" id="regName" placeholder="í™ê¸¸ë™">
                </div>
                <div class="form-group">
                    <label>ì†Œì† <span style="color:red">*</span></label>
                    <input type="text" id="regCompany" placeholder="í•œêµ­ìƒëª…">
                </div>
            </div>

            <!-- 2ì—´: ì§í•¨ / ì§€ì—­ -->
            <div class="row-group">
                <div class="form-group">
                    <label>ì§í•¨ <span style="color:red">*</span></label>
                    <input type="text" id="regPosition" placeholder="ë§¤ë‹ˆì €">
                </div>
                <div class="form-group">
                    <label>ì§€ì—­ <span style="color:red">*</span></label>
                    <select id="regRegion" style="padding: 0.7rem 0.2rem;">
                        <option value="">ì„ íƒ</option>
                        <option value="ì„œìš¸">ì„œìš¸</option>
                        <option value="ê²½ê¸°">ê²½ê¸°</option>
                        <option value="ì¸ì²œ">ì¸ì²œ</option>
                        <option value="ê°•ì›">ê°•ì›</option>
                        <option value="ì¶©ë‚¨">ì¶©ë‚¨</option>
                        <option value="ì¶©ë¶">ì¶©ë¶</option>
                        <option value="ëŒ€ì „">ëŒ€ì „</option>
                        <option value="ê²½ë‚¨">ê²½ë‚¨</option>
                        <option value="ê²½ë¶">ê²½ë¶</option>
                        <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
                        <option value="ë¶€ì‚°">ë¶€ì‚°</option>
                        <option value="ìš¸ì‚°">ìš¸ì‚°</option>
                        <option value="ì „ë‚¨">ì „ë‚¨</option>
                        <option value="ì „ë¶">ì „ë¶</option>
                        <option value="ê´‘ì£¼">ê´‘ì£¼</option>
                        <option value="ì œì£¼">ì œì£¼</option>
                    </select>
                </div>
            </div>

            <!-- 3ì—´: ì—°ë½ì²˜ -->
            <div class="form-group">
                <label>ì—°ë½ì²˜ <span style="color:red">*</span></label>
                <div class="input-group phone-group">
                    <select id="phone1">
                        <option value="010" selected>010</option>
                        <option value="011">011</option>
                        <option value="016">016</option>
                        <option value="017">017</option>
                        <option value="018">018</option>
                        <option value="019">019</option>
                    </select>
                    <span>-</span>
                    <input type="tel" id="phone2" maxlength="4" inputmode="numeric" placeholder="1234" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                    <span>-</span>
                    <input type="tel" id="phone3" maxlength="4" inputmode="numeric" placeholder="5678" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                </div>
            </div>

            <!-- 4ì—´: ì´ë©”ì¼ -->
            <div class="form-group">
                <label>ì´ë©”ì¼ <span style="color:red">*</span></label>
                <div class="input-group email-group">
                    <input type="text" id="emailId" placeholder="ID" inputmode="email">
                    <span>@</span>
                    <select id="emailDomainSelect" onchange="toggleCustomDomain(this)">
                        <option value="">ì„ íƒ</option>
                        <option value="naver.com">naver.com</option>
                        <option value="gmail.com">gmail.com</option>
                        <option value="daum.net">daum.net</option>
                        <option value="nate.com">nate.com</option>
                        <option value="custom">ì§ì ‘ì…ë ¥</option>
                    </select>
                </div>
                <input type="text" id="emailCustomDomain" placeholder="ë„ë©”ì¸ ì…ë ¥" class="hidden" style="margin-top: 0.4rem; padding: 0.6rem;">
            </div>

            <!-- ê³„ì¢Œ ì •ë³´ -->
            <div class="account-info-box">
                <div style="color: #8B0000; font-weight: bold; margin-bottom: 0.5rem; font-size: 1rem;">ë“±ë¡ë¹„(ìµœì´ˆ1íšŒë‚©ë¶€)=10ë§Œì›</div>
                <div class="account-info-title">[ì†¡ê¸ˆê³„ì¢Œ] êµ­ë¯¼ 378801-01-062695</div>
                <div class="account-info-detail">ì˜ˆê¸ˆì£¼: (ì£¼)í•œêµ­FPì„¼í„°</div>
                <div style="color: #666; font-size: 0.85rem; margin-top: 0.5rem;">*<span style="color: #8B0000; font-weight: bold;">ì›”ì´ìš©ë£Œ(10ë§Œì›)</span>ëŠ” 'ìµì›”ë§ì¼'ë¶€í„°<br>ìë™ê²°ì œ ì²­êµ¬ì§„í–‰<br>(IDìˆ˜ë ¹ í›„ ì‹ ìš©ì¹´ë“œ ê°œë³„ë“±ë¡)</div>
            </div>

            <!-- ì•½ê´€ ë™ì˜ -->
            <div class="terms-agreement" style="margin: 1.5rem 0; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 8px;">
                <div style="margin-bottom: 0.8rem;">
                    <label class="checkbox-label">
                        <input type="checkbox" id="agreeTerms">
                        <span class="checkmark"></span>
                        <span style="font-size: 0.9rem;">[í•„ìˆ˜] <a href="javascript:void(0)" onclick="showTermsPopup('service')" style="color: #4a90d9; text-decoration: underline;">ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€</a>ì— ë™ì˜í•©ë‹ˆë‹¤</span>
                    </label>
                </div>
                <div>
                    <label class="checkbox-label">
                        <input type="checkbox" id="agreePrivacy">
                        <span class="checkmark"></span>
                        <span style="font-size: 0.9rem;">[í•„ìˆ˜] <a href="javascript:void(0)" onclick="showTermsPopup('privacy')" style="color: #4a90d9; text-decoration: underline;">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a>ì— ë™ì˜í•©ë‹ˆë‹¤</span>
                    </label>
                </div>
            </div>

            <button type="submit" class="btn">ì‹ ì²­ì„œ ì œì¶œ</button>
            <button type="button" class="btn btn-back" onclick="switchView('login')">ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ</button>
        </form>
    </div>

    <!-- 3. ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í™”ë©´ -->
    <div id="changePwView" class="container-box hidden">
        <h1>ğŸ”‘ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h1>
        <p class="subtitle">ìµœì´ˆ ì ‘ì† ì‹œ ë³€ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
        
        <div id="pwMessage" class="message"></div>

        <form id="changePwForm">
            <div class="form-group">
                <label>ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="newPw" placeholder="6ì ì´ìƒ ì…ë ¥" required minlength="6">
            </div>
            
            <div class="form-group">
                <label>ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                <input type="password" id="confirmPw" placeholder="í•œë²ˆ ë” ì…ë ¥" required minlength="6">
            </div>
            
            <button type="submit" class="btn">ë³€ê²½ ì™„ë£Œ ë° ì‹œì‘</button>
        </form>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <script>
        // --- 1. Firebase ì„¤ì • ë° ì´ˆê¸°í™” ---
        const firebaseConfig = {
            apiKey: "AIzaSyDbufefZCVqCY8QQppcdQFoqVFpMriv1m0",
            authDomain: "kfpc-company-support-project.firebaseapp.com",
            databaseURL: "https://kfpc-company-support-project-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "kfpc-company-support-project",
            storageBucket: "kfpc-company-support-project.firebasestorage.app",
            messagingSenderId: "101260933373",
            appId: "1:101260933373:web:3436176f9ca2560056d914"
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const db = firebase.firestore();

        // --- 2. ìƒíƒœ ê´€ë¦¬ ë° UI ì œì–´ ---
        const views = {
            login: document.getElementById('loginView'),
            signup: document.getElementById('signupView'),
            changePw: document.getElementById('changePwView')
        };
        const loading = document.getElementById('loadingOverlay');
        const customAlertOverlay = document.getElementById('customAlert');
        const customAlertMsg = document.getElementById('customAlertMsg');
        let alertFocusTarget = null;

        function showLoading() { loading.style.display = 'flex'; }
        function hideLoading() { loading.style.display = 'none'; }
        
        function showCustomAlert(msg, elementIdToFocus) {
            customAlertMsg.innerHTML = msg;
            customAlertOverlay.style.display = 'flex';
            if (elementIdToFocus) {
                alertFocusTarget = document.getElementById(elementIdToFocus);
            } else {
                alertFocusTarget = null;
            }
        }

        window.closeCustomAlert = function() {
            customAlertOverlay.style.display = 'none';
            if (alertFocusTarget) {
                alertFocusTarget.focus();
            }
        };

        function switchView(viewName) {
            document.querySelectorAll('.message').forEach(el => el.style.display = 'none');
            document.querySelectorAll('form').forEach(form => form.reset());
            document.getElementById('emailCustomDomain').classList.add('hidden');
            
            Object.values(views).forEach(el => el.classList.add('hidden'));
            if(views[viewName]) views[viewName].classList.remove('hidden');
        }

        function showMessage(elementId, text, type) {
            const el = document.getElementById(elementId);
            el.textContent = text;
            el.className = `message ${type}`;
            el.style.display = 'block';
        }

        window.toggleCustomDomain = function(select) {
            const customInput = document.getElementById('emailCustomDomain');
            if (select.value === 'custom') {
                customInput.classList.remove('hidden');
                customInput.focus();
            } else {
                customInput.classList.add('hidden');
            }
        };

        // --- 3. ë¡œê·¸ì¸ ë¡œì§ ---
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const userId = document.getElementById('userId').value.trim();
            const userPw = document.getElementById('userPw').value.trim();

            if (!userId) { showCustomAlert("ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "userId"); return; }
            if (!userPw) { showCustomAlert("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "userPw"); return; }

            // [ê´€ë¦¬ì ì ‘ì† ì²´í¬]
            if (userId === 'admin' && userPw === 'kfpc0808') {
                localStorage.setItem('adminLoggedIn', 'true');
                alert('ê´€ë¦¬ì ëª¨ë“œë¡œ ì ‘ì†í•©ë‹ˆë‹¤.');
                window.location.href = 'admin.html'; 
                return;
            }

            showLoading();
            
            try {
                const email = `${userId}@system.local`;
                const userCredential = await auth.signInWithEmailAndPassword(email, userPw);
                const user = userCredential.user;
                checkUserStatus(user);

            } catch (error) {
                console.error('Login Error:', error);
                hideLoading();
                let msg = 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';
                if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {
                    msg = 'ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.';
                }
                showMessage('loginMessage', msg, 'error');
            }
        });

        // --- 4. íšŒì›ê°€ì… ì‹ ì²­ ë¡œì§ (ìˆ˜ì •ëœ ë¶€ë¶„: ìµëª… ë¡œê·¸ì¸ ì ìš©) ---
        document.getElementById('signupForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const name = document.getElementById('regName').value.trim();
            const phone1 = document.getElementById('phone1').value;
            const phone2 = document.getElementById('phone2').value.trim();
            const phone3 = document.getElementById('phone3').value.trim();
            const emailId = document.getElementById('emailId').value.trim();
            const emailDomainSelect = document.getElementById('emailDomainSelect').value;
            const emailCustomDomain = document.getElementById('emailCustomDomain').value.trim();
            const company = document.getElementById('regCompany').value.trim();
            const position = document.getElementById('regPosition').value.trim();
            const region = document.getElementById('regRegion').value;

            // ì•½ê´€ ë™ì˜ ì²´í¬
            const agreeTerms = document.getElementById('agreeTerms').checked;
            const agreePrivacy = document.getElementById('agreePrivacy').checked;
            if (!agreeTerms) { showCustomAlert("ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.", "agreeTerms"); return; }
            if (!agreePrivacy) { showCustomAlert("ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ì— ë™ì˜í•´ì£¼ì„¸ìš”.", "agreePrivacy"); return; }

            if (!name) { showCustomAlert("ì„±ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.", "regName"); return; }
            if (!company) { showCustomAlert("ì†Œì†ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.", "regCompany"); return; }
            if (!position) { showCustomAlert("ì§í•¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.", "regPosition"); return; }
            if (!region) { showCustomAlert("ì§€ì—­ì„ ì„ íƒí•´ì£¼ì„¸ìš”.", "regRegion"); return; }
            if (!phone2 || !phone3 || phone2.length < 3 || phone3.length < 4) { showCustomAlert("ì˜¬ë°”ë¥¸ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "phone2"); return; }
            if (!emailId) { showCustomAlert("ì´ë©”ì¼ ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "emailId"); return; }
            if (!emailDomainSelect) { showCustomAlert("ì´ë©”ì¼ ë„ë©”ì¸ì„ ì„ íƒí•´ì£¼ì„¸ìš”.", "emailDomainSelect"); return; }
            if (emailDomainSelect === 'custom' && !emailCustomDomain) { showCustomAlert("ë„ë©”ì¸ì„ ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.", "emailCustomDomain"); return; }

            const fullPhone = `${phone1}${phone2}${phone3}`;
            const finalDomain = (emailDomainSelect === 'custom') ? emailCustomDomain : emailDomainSelect;
            const fullEmail = `${emailId}@${finalDomain}`;

            showLoading();

            try {
                // *** í•µì‹¬ ìˆ˜ì •: ë¹„ë¡œê·¸ì¸ ìƒíƒœì¼ ë•Œ ìµëª… ë¡œê·¸ì¸ ìˆ˜í–‰ ***
                if (!auth.currentUser) {
                    await auth.signInAnonymously();
                }

                await db.collection('account_requests').add({
                    name: name,
                    phone: fullPhone,
                    email: fullEmail,
                    company: company,
                    position: position,
                    region: region,
                    status: 'pending',
                    requestedAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                hideLoading();
                alert('âœ… ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\n\në‹´ë‹¹ìê°€ í™•ì¸ í›„ ì…ë ¥í•˜ì‹  ì—°ë½ì²˜ë¡œ\nì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•ˆë‚´í•´ ë“œë¦½ë‹ˆë‹¤.');
                
                // ìµëª… ê³„ì •ì€ ì‹ ì²­ í›„ ë¡œê·¸ì•„ì›ƒí•˜ì—¬ ì„¸ì…˜ ì •ë¦¬ (ì„ íƒ ì‚¬í•­ì´ë‚˜ ê¹”ë”í•˜ê²Œ ì²˜ë¦¬)
                if (auth.currentUser && auth.currentUser.isAnonymous) {
                    await auth.signOut();
                }
                
                switchView('login');

            } catch (error) {
                console.error('Signup Request Error:', error);
                hideLoading();
                showMessage('signupMessage', 'ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. (' + error.code + ')', 'error');
            }
        });

        // --- 5. ì‚¬ìš©ì ìƒíƒœ í™•ì¸ ë° ì´ë™ ---
        async function checkUserStatus(user) {
            try {
                const userDoc = await db.collection('users').doc(user.uid).get();
                
                if (!userDoc.exists) throw new Error("ì‚¬ìš©ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");

                const userData = userDoc.data();
                
                // â˜… íšŒì› ìƒíƒœ ì²´í¬ (ë¹„í™œì„±, íƒˆí‡´ íšŒì› ë¡œê·¸ì¸ ì°¨ë‹¨)
                if (userData.status === 'inactive' || userData.status === 'withdrawn') {
                    await auth.signOut();
                    hideLoading();
                    showMessage('loginMessage', 'ì´ìš©ì´ ì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì—¬ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.', 'error');
                    return;
                }
                
                if (userData.role === 'admin') {
                    localStorage.setItem('adminLoggedIn', 'true');
                    window.location.href = 'admin.html';
                    return;
                }

                // â˜… ë¬´ë£Œì‚¬ìš©ìëŠ” ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì—†ì´ ë°”ë¡œ ì§„ì…
                if (userData.type === 'ë¬´ë£Œì‚¬ìš©ì') {
                    window.location.href = 'index.html';
                    return;
                }

                if (!userData.isPasswordChanged) {
                    hideLoading();
                    switchView('changePw');
                } else {
                    // ë©”ì¸ í˜ì´ì§€(index.html)ë¡œ ì´ë™
                    window.location.href = 'index.html';
                }

            } catch (error) {
                console.error(error);
                auth.signOut();
                hideLoading();
                showMessage('loginMessage', 'ê³„ì • ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // --- 6. ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ---
        document.getElementById('changePwForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const newPw = document.getElementById('newPw').value;
            const confirmPw = document.getElementById('confirmPw').value;
            const user = auth.currentUser;

            if (!user) {
                alert('ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
                window.location.reload();
                return;
            }

            if (newPw !== confirmPw) { showMessage('pwMessage', 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error'); return; }
            if (newPw.length < 6) { showMessage('pwMessage', '6ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error'); return; }

            showLoading();

            try {
                await user.updatePassword(newPw);
                await db.collection('users').doc(user.uid).update({
                    password: newPw,  // â˜… ë¹„ë°€ë²ˆí˜¸ë¥¼ Firestoreì—ë„ ì €ì¥ (ê´€ë¦¬ì ì¡°íšŒìš©)
                    isPasswordChanged: true,
                    passwordChangedAt: firebase.firestore.FieldValue.serverTimestamp()
                });

                alert('ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.\nì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.');
                window.location.href = 'index.html';

            } catch (error) {
                console.error('Password Change Error:', error);
                hideLoading();
                showMessage('pwMessage', 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        });

        // ì•½ê´€ íŒì—… í‘œì‹œ
        async function showTermsPopup(type) {
            const title = type === 'service' ? 'ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€' : 'ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨';
            let content = '';
            
            try {
                const doc = await db.collection('settings').doc('terms').get();
                if (doc.exists) {
                    content = doc.data()[type] || 'ì•½ê´€ ë‚´ìš©ì´ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
                } else {
                    content = 'ì•½ê´€ ë‚´ìš©ì´ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
                }
            } catch (error) {
                console.error('ì•½ê´€ ë¡œë“œ ì˜¤ë¥˜:', error);
                content = 'ì•½ê´€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
            }
            
            // íŒì—… ìƒì„±
            const popup = document.createElement('div');
            popup.id = 'termsPopup';
            popup.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:9999;display:flex;align-items:center;justify-content:center;padding:1rem;';
            popup.innerHTML = `
                <div style="background:#fff;border-radius:12px;max-width:600px;width:100%;max-height:80vh;display:flex;flex-direction:column;">
                    <div style="padding:1.2rem;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;">
                        <h3 style="margin:0;color:#1a2a3a;font-size:1.1rem;">${title}</h3>
                        <button onclick="closeTermsPopup()" style="background:none;border:none;font-size:1.5rem;cursor:pointer;color:#666;">&times;</button>
                    </div>
                    <div style="padding:1.2rem;overflow-y:auto;flex:1;white-space:pre-wrap;line-height:1.8;color:#333;font-size:0.9rem;">${content}</div>
                    <div style="padding:1rem;border-top:1px solid #eee;text-align:center;">
                        <button onclick="closeTermsPopup()" style="background:#1a2a3a;color:#fff;border:none;padding:0.7rem 2rem;border-radius:6px;cursor:pointer;">í™•ì¸</button>
                    </div>
                </div>
            `;
            document.body.appendChild(popup);
        }
        
        function closeTermsPopup() {
            const popup = document.getElementById('termsPopup');
            if (popup) popup.remove();
        }
        
        // ìƒì„¸ë¶„ì„ ìƒ˜í”Œ ëª¨ë‹¬ ì—´ê¸°
        function showDetailSample() {
            document.getElementById('detail-sample-modal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        // ìƒì„¸ë¶„ì„ ìƒ˜í”Œ ëª¨ë‹¬ ë‹«ê¸°
        function closeDetailSample() {
            document.getElementById('detail-sample-modal').style.display = 'none';
            document.body.style.overflow = '';
        }
    </script>
    
    <!-- ìƒì„¸ë¶„ì„ ìƒ˜í”Œ ëª¨ë‹¬ -->
    <div id="detail-sample-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; justify-content: center; align-items: center; padding: 0.5rem; overflow-y: auto;">
      <div style="background: white; border-radius: 16px; max-width: 900px; width: 100%; max-height: 98vh; overflow-y: auto; position: relative; margin: auto;">
        
        <!-- í—¤ë” -->
        <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 1.2rem; border-radius: 16px 16px 0 0; position: sticky; top: 0; z-index: 1;">
          <button onclick="closeDetailSample()" style="position: absolute; top: 0.8rem; right: 0.8rem; background: rgba(255,255,255,0.2); border: none; color: white; width: 32px; height: 32px; border-radius: 50%; font-size: 1.1rem; cursor: pointer;">âœ•</button>
          <h2 style="margin: 0; font-size: 1.15rem; padding-right: 2rem;">ğŸ“Š ì •ë¶€ì§€ì›ìê¸ˆ ìƒì„¸ë¶„ì„ ìƒ˜í”Œ</h2>
          <p style="margin: 0.3rem 0 0 0; opacity: 0.9; font-size: 0.8rem;">í•œêµ­ì‚°ì—…(ì˜ìƒì œì‘) ê¸°ì¤€ ì‹¤ì œ AI ë¶„ì„ ê²°ê³¼</p>
        </div>
        
        <!-- ìƒ˜í”Œ ë‚´ìš© -->
        <div style="padding: 1rem;">
          
          <!-- ê³µê³ ëª… -->
          <div style="background: #f8fafc; padding: 1rem; border-radius: 10px; margin-bottom: 1rem; border-left: 4px solid #667eea;">
            <p style="margin: 0 0 0.3rem 0; color: #666; font-size: 0.8rem;">ë¶„ì„ ê³µê³ </p>
            <p style="margin: 0; color: #1e293b; font-weight: 700; font-size: 0.95rem; line-height: 1.4;">2025ë…„ ì½˜í…ì¸  ì œì‘ ì§€ì›ì‚¬ì—… (K-ì½˜í…ì¸  ê¸€ë¡œë²Œ ì§„ì¶œ)</p>
          </div>
          
          <!-- AI PDF ìƒì„¸ë¶„ì„ ë°•ìŠ¤ -->
          <div style="background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%); border: 2px solid #667eea; border-radius: 12px; padding: 1rem;">
            
            <!-- í—¤ë” -->
            <div style="display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 0.5rem; margin-bottom: 1rem; padding-bottom: 0.8rem; border-bottom: 2px dashed rgba(102,126,234,0.3);">
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="font-size: 1.3rem;">ğŸ“„</span>
                <span style="color: #667eea; font-size: 1rem; font-weight: 700;">AI PDF ìƒì„¸ë¶„ì„</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.4rem; flex-wrap: wrap;">
                <span style="background: linear-gradient(135deg, #22c55e, #16a34a); color: white; padding: 0.25rem 0.6rem; border-radius: 15px; font-weight: 600; font-size: 0.75rem;">ğŸŸ¢ ê´€ë ¨ë„: ë§¤ìš°ë†’ìŒ</span>
                <span style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 0.25rem 0.6rem; border-radius: 15px; font-weight: 600; font-size: 0.75rem;">87ì </span>
              </div>
            </div>
            
            <!-- ğŸ“‹ ì‚¬ì—… ìš”ì•½ -->
            <div style="background: white; padding: 1rem; border-radius: 10px; margin-bottom: 0.8rem; border-left: 4px solid #667eea;">
              <h4 style="color: #667eea; margin: 0 0 0.6rem 0; font-size: 0.9rem; display: flex; align-items: center; gap: 0.4rem;">
                <span>ğŸ“‹</span> ì‚¬ì—… ìš”ì•½
              </h4>
              <p style="color: #333; margin: 0; line-height: 1.7; font-size: 0.85rem;">
                ì¤‘ì†Œë²¤ì²˜ê¸°ì—…ë¶€ì™€ í•œêµ­ì½˜í…ì¸ ì§„í¥ì›ì´ ê³µë™ ì£¼ê´€í•˜ëŠ” K-ì½˜í…ì¸  ê¸€ë¡œë²Œ ê²½ìŸë ¥ ê°•í™” ì‚¬ì—…ì…ë‹ˆë‹¤. ì˜ìƒÂ·ë°©ì†¡Â·OTT ì½˜í…ì¸  ì œì‘ ì¤‘ì†Œê¸°ì—…ì„ ëŒ€ìƒìœ¼ë¡œ ì œì‘ë¹„, ì¥ë¹„êµ¬ì…ë¹„, í•´ì™¸ ë§ˆì¼€íŒ…ë¹„ë¥¼ <strong>ìµœëŒ€ 3ì–µì›</strong>ê¹Œì§€ ì§€ì›í•©ë‹ˆë‹¤. ì´ ì˜ˆì‚° 500ì–µì› ê·œëª¨ë¡œ ì•½ 200ê°œ ê¸°ì—… ì„ ì • ì˜ˆì •ì´ë©°, ì •ë¶€ì§€ì› 70% + ê¸°ì—…ë¶€ë‹´ 30% ë§¤ì¹­ ë°©ì‹ì…ë‹ˆë‹¤. OTT í”Œë«í¼ ë‚©í’ˆ ê³„ì•½ ë³´ìœ  ê¸°ì—…, í•´ì™¸ ìˆ˜ì¶œ ì‹¤ì  ê¸°ì—…ì— ê°€ì ì„ ë¶€ì—¬í•©ë‹ˆë‹¤.
              </p>
            </div>
            
            <!-- ğŸ¯ ìê²©ìš”ê±´ -->
            <div style="background: white; padding: 1rem; border-radius: 10px; margin-bottom: 0.8rem; border-left: 4px solid #28a745;">
              <h4 style="color: #28a745; margin: 0 0 0.6rem 0; font-size: 0.9rem; display: flex; align-items: center; gap: 0.4rem;">
                <span>ğŸ¯</span> ìê²©ìš”ê±´
              </h4>
              <div style="display: flex; flex-direction: column; gap: 0.4rem; font-size: 0.85rem; color: #333;">
                <div style="display: flex;"><span style="min-width: 80px; color: #666;">ê¸°ì—…ê·œëª¨</span><span style="flex: 1;">ì¤‘ì†Œê¸°ì—… (ì¤‘ê²¬ê¸°ì—… ì œì™¸)</span></div>
                <div style="display: flex;"><span style="min-width: 80px; color: #666;">ì—…ë ¥</span><span style="flex: 1;">3ë…„ ì´ìƒ (2022ë…„ 1ì›” ì´ì „ ì„¤ë¦½)</span></div>
                <div style="display: flex;"><span style="min-width: 80px; color: #666;">í•„ìˆ˜ì¸ì¦</span><span style="flex: 1;">ì—†ìŒ (ë²¤ì²˜ê¸°ì—… ê°€ì  +3ì )</span></div>
                <div style="display: flex;"><span style="min-width: 80px; color: #666;">ì§€ì—­ì œí•œ</span><span style="flex: 1;">ì „êµ­</span></div>
                <div style="display: flex;"><span style="min-width: 80px; color: #666;">ì—…ì¢…ì œí•œ</span><span style="flex: 1;">ì˜ìƒÂ·ë°©ì†¡Â·ì½˜í…ì¸  ì œì‘ì—…</span></div>
                <div style="display: flex;"><span style="min-width: 80px; color: #666;">ë§¤ì¶œì¡°ê±´</span><span style="flex: 1;">ì—°ë§¤ì¶œ 1ì–µ ì´ìƒ 100ì–µ ë¯¸ë§Œ</span></div>
              </div>
              <div style="margin-top: 0.6rem; padding-top: 0.6rem; border-top: 1px dashed #ddd;">
                <p style="margin: 0; font-size: 0.8rem; color: #dc2626;"><strong>ì œì™¸ëŒ€ìƒ:</strong> êµ­ì„¸Â·ì§€ë°©ì„¸ ì²´ë‚©, ìµœê·¼ 3ë…„ ë‚´ ë¶€ì •ìˆ˜ê¸‰, íœ´Â·íì—…, ì±„ë¬´ë¶ˆì´í–‰ ê¸°ì—…</p>
              </div>
            </div>
            
            <!-- ğŸ’° ì§€ì›ê·œëª¨ -->
            <div style="background: white; padding: 1rem; border-radius: 10px; margin-bottom: 0.8rem; border-left: 4px solid #f59e0b;">
              <h4 style="color: #f57c00; margin: 0 0 0.6rem 0; font-size: 0.9rem; display: flex; align-items: center; gap: 0.4rem;">
                <span>ğŸ’°</span> ì§€ì›ê·œëª¨
              </h4>
              <div style="display: flex; flex-direction: column; gap: 0.4rem; font-size: 0.85rem; color: #333;">
                <div style="display: flex;"><span style="min-width: 80px; color: #666;">ì´ ì˜ˆì‚°</span><span style="flex: 1; font-weight: 600;">500ì–µì›</span></div>
                <div style="display: flex;"><span style="min-width: 80px; color: #666;">ê¸°ì—…ë‹¹</span><span style="flex: 1; font-weight: 600; color: #ea580c;">ìµœëŒ€ 3ì–µì› (í‰ê·  2.5ì–µ)</span></div>
                <div style="display: flex;"><span style="min-width: 80px; color: #666;">ì§€ì›ë¹„ìœ¨</span><span style="flex: 1;">ì •ë¶€ 70% + ê¸°ì—… 30%</span></div>
                <div style="display: flex;"><span style="min-width: 80px; color: #666;">ì„ ì •ê·œëª¨</span><span style="flex: 1;">ì•½ 200ê°œ ê¸°ì—…</span></div>
              </div>
              <div style="margin-top: 0.6rem; padding-top: 0.6rem; border-top: 1px dashed #ddd;">
                <p style="margin: 0; font-size: 0.8rem; color: #666;"><strong>ì§€ì›í•­ëª©:</strong> ì œì‘ë¹„(ì¸ê±´ë¹„, ì´¬ì˜ë¹„), ì¥ë¹„ êµ¬ì…Â·ì„ì°¨ë¹„, í›„ë°˜ì‘ì—…ë¹„(í¸ì§‘, CG, ìŒí–¥), í•´ì™¸ ë§ˆì¼€íŒ…ë¹„, ì „ì‹œÂ·ë§ˆì¼“ ì°¸ê°€ë¹„</p>
              </div>
            </div>
            
            <!-- ğŸ“ ì œì¶œì„œë¥˜ -->
            <div style="background: white; padding: 1rem; border-radius: 10px; margin-bottom: 0.8rem; border-left: 4px solid #17a2b8;">
              <h4 style="color: #17a2b8; margin: 0 0 0.6rem 0; font-size: 0.9rem; display: flex; align-items: center; gap: 0.4rem;">
                <span>ğŸ“</span> ì œì¶œì„œë¥˜
              </h4>
              <div style="font-size: 0.85rem; color: #333; line-height: 1.6;">
                <p style="margin: 0 0 0.4rem 0;"><strong style="color: #0891b2;">í•„ìˆ˜:</strong> ì‚¬ì—…ê³„íšì„œ(ì§€ì •ì–‘ì‹), ì‚¬ì—…ìë“±ë¡ì¦, ì¤‘ì†Œê¸°ì—…í™•ì¸ì„œ, ìµœê·¼ 3ë…„ ì¬ë¬´ì œí‘œ, 4ëŒ€ë³´í—˜ ê°€ì…ì ëª…ë¶€, ì½˜í…ì¸  í¬íŠ¸í´ë¦¬ì˜¤, ì™„ë‚©ì¦ëª…ì„œ</p>
                <p style="margin: 0;"><strong style="color: #059669;">ê°€ì :</strong> ë²¤ì²˜ê¸°ì—…í™•ì¸ì„œ(+3ì ), ìˆ˜ì¶œì‹¤ì ì¦ëª…(+2ì ), OTTë‚©í’ˆê³„ì•½ì„œ(+3ì ), ê³ ìš©ì¦ê°€ ì¦ë¹™(+2ì )</p>
              </div>
            </div>
            
            <!-- ğŸ“… ì£¼ìš” ì¼ì • -->
            <div style="background: white; padding: 1rem; border-radius: 10px; margin-bottom: 0.8rem; border-left: 4px solid #6f42c1;">
              <h4 style="color: #6f42c1; margin: 0 0 0.6rem 0; font-size: 0.9rem; display: flex; align-items: center; gap: 0.4rem;">
                <span>ğŸ“…</span> ì£¼ìš” ì¼ì •
              </h4>
              <div style="display: flex; flex-direction: column; gap: 0.4rem; font-size: 0.85rem; color: #333;">
                <div style="display: flex;"><span style="min-width: 70px; color: #666;">ì‹ ì²­ê¸°ê°„</span><span style="flex: 1; font-weight: 600; color: #7c3aed;">2025.01.15 ~ 02.28</span></div>
                <div style="display: flex;"><span style="min-width: 70px; color: #666;">ì‹ ì²­ë°©ë²•</span><span style="flex: 1;">K-ì½˜í…ì¸  ì§€ì›ì‹œìŠ¤í…œ</span></div>
                <div style="display: flex;"><span style="min-width: 70px; color: #666;">ì„œë¥˜ì‹¬ì‚¬</span><span style="flex: 1;">03.01 ~ 03.15</span></div>
                <div style="display: flex;"><span style="min-width: 70px; color: #666;">ë°œí‘œì‹¬ì‚¬</span><span style="flex: 1;">03.20 ~ 04.05</span></div>
                <div style="display: flex;"><span style="min-width: 70px; color: #666;">ìµœì¢…ë°œí‘œ</span><span style="flex: 1;">2025.04.15</span></div>
                <div style="display: flex;"><span style="min-width: 70px; color: #666;">ì‚¬ì—…ê¸°ê°„</span><span style="flex: 1;">05.01 ~ 12.31 (8ê°œì›”)</span></div>
              </div>
            </div>
            
            <!-- ğŸ¢ í•œêµ­ì‚°ì—… ë§ì¶¤ ë¶„ì„ -->
            <div style="background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%); padding: 1rem; border-radius: 10px; margin-bottom: 0.8rem; border: 2px solid #f59e0b;">
              <h4 style="color: #d97706; margin: 0 0 0.8rem 0; font-size: 0.95rem; display: flex; align-items: center; gap: 0.4rem;">
                <span>ğŸ¢</span> í•œêµ­ì‚°ì—… ë§ì¶¤ ë¶„ì„
              </h4>
              
              <!-- í•µì‹¬ ì§€í‘œ -->
              <div style="background: white; padding: 0.8rem; border-radius: 8px; margin-bottom: 0.8rem;">
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center;">
                  <div style="background: #dcfce7; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600; color: #166534;">ğŸ“Š ì˜ˆìƒ ê°€ì : +8ì </div>
                  <div style="background: #dbeafe; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600; color: #1e40af;">ğŸ“ˆ ê²½ìŸë¥ : ì•½ 4:1</div>
                  <div style="background: #fef3c7; padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600; color: #92400e;">ğŸ¯ ì„ ì •ê°€ëŠ¥ì„±: ë†’ìŒ</div>
                </div>
              </div>
              
              <!-- ìê²©ìš”ê±´ ì¶©ì¡± í˜„í™© -->
              <div style="background: white; padding: 0.8rem; border-radius: 8px; margin-bottom: 0.8rem; overflow-x: auto;">
                <p style="margin: 0 0 0.4rem 0; font-size: 0.8rem; color: #666; font-weight: 600;">âœ… ìê²©ìš”ê±´ ì¶©ì¡± í˜„í™©</p>
                <div style="display: flex; flex-wrap: wrap; gap: 0.3rem; font-size: 0.75rem;">
                  <span style="background: #dcfce7; padding: 0.2rem 0.5rem; border-radius: 4px; color: #166534; white-space: nowrap;">ê¸°ì—…ê·œëª¨ âœ…</span>
                  <span style="background: #dcfce7; padding: 0.2rem 0.5rem; border-radius: 4px; color: #166534; white-space: nowrap;">ì—…ë ¥ 5ë…„ âœ…</span>
                  <span style="background: #dcfce7; padding: 0.2rem 0.5rem; border-radius: 4px; color: #166534; white-space: nowrap;">ì§€ì—­ ì„œìš¸ âœ…</span>
                  <span style="background: #dcfce7; padding: 0.2rem 0.5rem; border-radius: 4px; color: #166534; white-space: nowrap;">ì—…ì¢… ì˜ìƒì œì‘ âœ…</span>
                  <span style="background: #dcfce7; padding: 0.2rem 0.5rem; border-radius: 4px; color: #166534; white-space: nowrap;">ë§¤ì¶œ 8ì–µ âœ…</span>
                </div>
              </div>
              
              <!-- ğŸ’ª ê°•ì  -->
              <div style="background: white; padding: 0.8rem; border-radius: 8px; margin-bottom: 0.6rem; border-left: 3px solid #22c55e;">
                <h5 style="color: #16a34a; margin: 0 0 0.5rem 0; font-size: 0.85rem;">ğŸ’ª ê°•ì  (3ê°€ì§€)</h5>
                <div style="font-size: 0.8rem; color: #333; line-height: 1.6;">
                  <p style="margin: 0 0 0.5rem 0; padding-bottom: 0.5rem; border-bottom: 1px dashed #e5e7eb;">
                    <strong style="color: #16a34a;">1. OTT ë‚©í’ˆ ì‹¤ì </strong><br/>
                    ë„·í”Œë¦­ìŠ¤Â·ì›¨ì´ë¸Œ ë‚©í’ˆ ê²½í—˜ â†’ "ê²€ì¦ëœ ì œì‘ ì—­ëŸ‰"ìœ¼ë¡œ ì¸ì‹. ê°€ì  3ì  + ê¸°ìˆ ì„± í‰ê°€ ìš°ìœ„
                  </p>
                  <p style="margin: 0 0 0.5rem 0; padding-bottom: 0.5rem; border-bottom: 1px dashed #e5e7eb;">
                    <strong style="color: #16a34a;">2. ë²¤ì²˜ê¸°ì—… ì¸ì¦</strong><br/>
                    ì „ì²´ ì‹ ì²­ê¸°ì—… 40%ë§Œ ë³´ìœ  â†’ ê°€ì  3ì  í™•ë³´. ê¸°ìˆ í˜ì‹ í˜• ê¸°ì—…ìœ¼ë¡œ ì •ì„±í‰ê°€ ìœ ë¦¬
                  </p>
                  <p style="margin: 0;">
                    <strong style="color: #16a34a;">3. ê³ ìš© 30% ì¦ê°€</strong><br/>
                    ìƒì‹œê·¼ë¡œì 10â†’13ëª… â†’ ê³ ìš©ì°½ì¶œ ê°€ì  2ì . ì •ë¶€ ì¼ìë¦¬ ì •ì±… ê¸°ì¡° ë¶€í•©
                  </p>
                </div>
              </div>
              
              <!-- âš ï¸ ë³´ì™„ì  -->
              <div style="background: white; padding: 0.8rem; border-radius: 8px; border-left: 3px solid #ef4444;">
                <h5 style="color: #dc2626; margin: 0 0 0.5rem 0; font-size: 0.85rem;">âš ï¸ ë³´ì™„ì  (2ê°€ì§€)</h5>
                <div style="font-size: 0.8rem; color: #333; line-height: 1.6;">
                  <p style="margin: 0 0 0.5rem 0; padding-bottom: 0.5rem; border-bottom: 1px dashed #e5e7eb;">
                    <strong style="color: #dc2626;">1. í•´ì™¸ ìˆ˜ì¶œ ì‹¤ì  ë¶€ì¬</strong><br/>
                    ìˆ˜ì¶œ ê°€ì  2ì  ë¯¸í™•ë³´ â†’ <span style="color: #2563eb;">ëŒ€ì‘: ëŒ€ë§Œ OTT í˜‘ì˜ ì¤‘ì¸ LOI(ì˜í–¥ì„œ) ì²¨ë¶€ë¡œ "ìˆ˜ì¶œ ì¤€ë¹„ ê¸°ì—…" ì–´í•„</span>
                  </p>
                  <p style="margin: 0;">
                    <strong style="color: #dc2626;">2. ì˜ì—…ì´ìµë¥  ë‚®ìŒ (3%)</strong><br/>
                    ì—…ê³„ í‰ê·  8% ëŒ€ë¹„ ë‚®ìŒ â†’ <span style="color: #2563eb;">ëŒ€ì‘: ëŒ€í˜• í”„ë¡œì íŠ¸ ì„ íˆ¬ì ì„¤ëª… + ìˆ˜ì£¼ì”ê³  15ì–µì› ì¦ë¹™ìœ¼ë¡œ ë¯¸ë˜ ìˆ˜ìµì„± ê°•ì¡°</span>
                  </p>
                </div>
              </div>
            </div>
            
            <!-- ğŸ“ˆ ì‹ ì²­ ì „ëµ -->
            <div style="background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); padding: 1rem; border-radius: 10px; margin-bottom: 0.8rem; border: 2px solid #3b82f6;">
              <h4 style="color: #1d4ed8; margin: 0 0 0.8rem 0; font-size: 0.95rem; display: flex; align-items: center; gap: 0.4rem;">
                <span>ğŸ“ˆ</span> ì‹ ì²­ ì „ëµ
              </h4>
              
              <!-- í•µì‹¬ ë©”ì‹œì§€ -->
              <div style="background: white; padding: 0.8rem; border-radius: 8px; margin-bottom: 0.6rem; text-align: center;">
                <p style="margin: 0 0 0.3rem 0; font-size: 0.75rem; color: #666;">ğŸ¯ í•µì‹¬ ë©”ì‹œì§€ (í•œ ë¬¸ì¥)</p>
                <p style="margin: 0; font-size: 0.85rem; font-weight: 600; color: #1e40af; font-style: italic; line-height: 1.5;">
                  "ê²€ì¦ëœ OTT ì œì‘ ì—­ëŸ‰ê³¼ ë²¤ì²˜ ê¸°ìˆ ë ¥ìœ¼ë¡œ<br/>K-ì½˜í…ì¸  ê¸€ë¡œë²Œ ì‹œì¥ì„ ì„ ë„í•˜ê² ìŠµë‹ˆë‹¤"
                </p>
              </div>
              
              <!-- ì–´í•„ í¬ì¸íŠ¸ -->
              <div style="background: white; padding: 0.8rem; border-radius: 8px; margin-bottom: 0.6rem;">
                <p style="margin: 0 0 0.4rem 0; font-size: 0.8rem; color: #1d4ed8; font-weight: 600;">ğŸ’¡ ì–´í•„ í¬ì¸íŠ¸ 3ê°€ì§€</p>
                <div style="font-size: 0.8rem; color: #333; line-height: 1.6;">
                  <p style="margin: 0 0 0.4rem 0;"><strong>1.</strong> ì‚¬ì—…ê³„íšì„œ 1pì— ë„·í”Œë¦­ìŠ¤ ë‚©í’ˆì‘ í¬ìŠ¤í„° + ì¡°íšŒìˆ˜ ë°°ì¹˜</p>
                  <p style="margin: 0 0 0.4rem 0;"><strong>2.</strong> "ê¸€ë¡œë²Œ ì§„ì¶œ" â†’ "ë™ë‚¨ì•„ 3ê°œêµ­ OTT ì§„ì¶œ, ì˜ˆìƒ ë§¤ì¶œ 5ì–µì›" êµ¬ì²´í™”</p>
                  <p style="margin: 0;"><strong>3.</strong> PD ê²½ë ¥ 15ë…„(MBC ì¶œì‹ ), ì‘ê°€ ìˆ˜ìƒ ê²½ë ¥ í‘œë¡œ ì •ë¦¬</p>
                </div>
              </div>
              
              <!-- í”í•œ ì‹¤ìˆ˜ -->
              <div style="background: #fef2f2; padding: 0.8rem; border-radius: 8px; margin-bottom: 0.6rem;">
                <p style="margin: 0 0 0.4rem 0; font-size: 0.8rem; color: #dc2626; font-weight: 600;">âŒ í”¼í•´ì•¼ í•  ì‹¤ìˆ˜</p>
                <div style="font-size: 0.8rem; color: #333; line-height: 1.5;">
                  <p style="margin: 0 0 0.3rem 0;">â€¢ ë¶„ëŸ‰ ì´ˆê³¼: 30p ì œí•œ â†’ 25p ë‚´ì™¸ë¡œ í•µì‹¬ë§Œ ì••ì¶•</p>
                  <p style="margin: 0;">â€¢ ì˜ˆì‚° ê³¼ë‹¤ ê³„ìƒ: 3ê°œ ì—…ì²´ ê²¬ì ì„œ ì²¨ë¶€, ìµœì €ê°€ ê¸°ì¤€ í¸ì„±</p>
                </div>
              </div>
              
              <!-- ì¤€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
              <div style="background: white; padding: 0.8rem; border-radius: 8px;">
                <p style="margin: 0 0 0.4rem 0; font-size: 0.8rem; color: #1d4ed8; font-weight: 600;">ğŸ“‹ ì¤€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸</p>
                <div style="font-size: 0.8rem; color: #333;">
                  <div style="display: flex; gap: 0.3rem; margin-bottom: 0.3rem; align-items: flex-start;">
                    <span style="background: #fee2e2; padding: 0.15rem 0.4rem; border-radius: 4px; font-weight: 600; color: #dc2626; font-size: 0.7rem; white-space: nowrap;">D-14</span>
                    <span>ì¬ë¬´ì œí‘œ ì„¸ë¬´ì‚¬ í™•ì¸, 4ëŒ€ë³´í—˜ ëª…ë¶€, í¬íŠ¸í´ë¦¬ì˜¤ ì •ë¦¬</span>
                  </div>
                  <div style="display: flex; gap: 0.3rem; margin-bottom: 0.3rem; align-items: flex-start;">
                    <span style="background: #fef3c7; padding: 0.15rem 0.4rem; border-radius: 4px; font-weight: 600; color: #92400e; font-size: 0.7rem; white-space: nowrap;">D-7</span>
                    <span>ì‚¬ì—…ê³„íšì„œ ì´ˆì•ˆ ì™„ì„±, ë‚´ë¶€ ê²€í† , ì˜ˆì‚°ì„œ ê²¬ì  í™•ë³´</span>
                  </div>
                  <div style="display: flex; gap: 0.3rem; align-items: flex-start;">
                    <span style="background: #dcfce7; padding: 0.15rem 0.4rem; border-radius: 4px; font-weight: 600; color: #166534; font-size: 0.7rem; white-space: nowrap;">D-3</span>
                    <span>ìµœì¢… ì„œë¥˜ ì ê²€, PDF ë³€í™˜ í…ŒìŠ¤íŠ¸, ì‹œìŠ¤í…œ ì‚¬ì „ ì ‘ì†</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- ğŸ† ìµœì¢… ì¶”ì²œì˜ê²¬ -->
            <div style="background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); padding: 1rem; border-radius: 10px; border: 2px solid #10b981;">
              <h4 style="color: #059669; margin: 0 0 0.8rem 0; font-size: 0.95rem; display: flex; align-items: center; gap: 0.4rem;">
                <span>ğŸ†</span> ìµœì¢… ì¶”ì²œì˜ê²¬
              </h4>
              
              <!-- ê²°ë¡  ë°°ì§€ -->
              <div style="text-align: center; margin-bottom: 0.8rem;">
                <span style="background: linear-gradient(135deg, #059669, #047857); color: white; padding: 0.5rem 1.2rem; border-radius: 25px; font-size: 0.9rem; font-weight: 700; display: inline-block;">
                  âœ… ì‹ ì²­ ì ê·¹ ê¶Œì¥
                </span>
              </div>
              
              <div style="background: white; padding: 0.8rem; border-radius: 8px; font-size: 0.8rem; color: #333; line-height: 1.6;">
                <p style="margin: 0 0 0.5rem 0;">
                  <strong style="color: #059669;">â‘  ê²°ë¡ :</strong> í•µì‹¬ìš”ê±´ 100% ì¶©ì¡± + ê°€ì  8ì  í™•ë³´ â†’ <strong>ì ê·¹ ì‹ ì²­ ê¶Œì¥</strong>
                </p>
                <p style="margin: 0 0 0.5rem 0;">
                  <strong style="color: #059669;">â‘¡ í•µì‹¬ ê·¼ê±°:</strong> OTT ë‚©í’ˆ ì‹¤ì  ê²€ì¦ / ë²¤ì²˜+ê³ ìš©ì¦ê°€ ê°€ì  ìš°ìœ„ / ì˜ìƒì œì‘ ì—…ì¢… ì •í™• ì¼ì¹˜
                </p>
                <p style="margin: 0 0 0.5rem 0;">
                  <strong style="color: #059669;">â‘¢ ì„ ì •ê°€ëŠ¥ì„±:</strong> <strong style="color: #16a34a;">ë†’ìŒ</strong> (ê²½ìŸë¥  4:1ì´ë‚˜, ê°€ì  8ì ìœ¼ë¡œ ìƒìœ„ 20% ì§„ì…)
                </p>
                <p style="margin: 0 0 0.5rem 0;">
                  <strong style="color: #059669;">â‘£ í•„ìˆ˜ ì‹¤í–‰:</strong> ì¬ë¬´ì œí‘œ ì„¸ë¬´ì‚¬ í™•ì¸ / OTT ë‚©í’ˆ ê³„ì•½ì„œ ì²¨ë¶€ / 25í˜ì´ì§€ ì´ë‚´ ì¤€ìˆ˜
                </p>
                <p style="margin: 0 0 0.5rem 0;">
                  <strong style="color: #dc2626;">â‘¤ ê¸ˆì§€:</strong> ì˜ˆì‚° ê³¼ë‹¤ ê³„ìƒ, ê¸°ì¡´ ìˆ˜í–‰ ì‹¤ì  ëˆ„ë½
                </p>
                
                <!-- í•œì¤„ ìš”ì•½ ë°•ìŠ¤ -->
                <div style="background: #f0fdf4; padding: 0.6rem; border-radius: 6px; margin-top: 0.6rem; border: 1px dashed #22c55e;">
                  <p style="margin: 0; font-size: 0.85rem; font-weight: 600; color: #166534; text-align: center; line-height: 1.5;">
                    ğŸ’¬ "OTT ì‹¤ì  + ë²¤ì²˜ + ê³ ìš©ì¦ê°€ 3ë°•ì ê°–ì¶˜ ìµœì  í›„ë³´.<br/>D-7 ì „ ì„œë¥˜ ì™„ë¹„ í›„ ë§ˆê°ì¼ 3ì¼ ì „ ì‹ ì²­ ê¶Œì¥"
                  </p>
                </div>
              </div>
            </div>
            
          </div>
          
        </div>
        
        <!-- í•˜ë‹¨ ë²„íŠ¼ -->
        <div style="padding: 0.8rem 1rem 1rem; border-top: 1px solid #eee; display: flex; gap: 0.6rem; flex-wrap: wrap; position: sticky; bottom: 0; background: white; border-radius: 0 0 16px 16px;">
          <button onclick="closeDetailSample()" style="flex: 1; min-width: 80px; padding: 0.8rem; background: linear-gradient(135deg, #0c2c54, #1a4a7a); color: white; border: none; border-radius: 8px; font-size: 0.9rem; font-weight: 600; cursor: pointer;">
            ë‹«ê¸°
          </button>
          <button onclick="closeDetailSample(); switchView('signup');" style="flex: 2; min-width: 160px; padding: 0.8rem; background: linear-gradient(135deg, #D4AF37, #B8962E); color: white; border: none; border-radius: 8px; font-size: 0.9rem; font-weight: 600; cursor: pointer;">
            ğŸš€ íšŒì›ê°€ì… ì‹ ì²­í•˜ê¸°
          </button>
        </div>
        
      </div>
    </div>
</body>
</html>