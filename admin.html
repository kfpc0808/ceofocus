<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Master í†µí•© ê´€ë¦¬ì V18 (ê²€ìƒ‰/í˜ì´ì§• ì ìš©)</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        :root {
            --primary-color: #0c2c54;
            --secondary-color: #f5f6fa;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --warning-bg: #fff3cd;
            --warning-text: #856404;
            --text-color: #2c3e50;
            --border-color: #dee2e6;
            --sidebar-width: 250px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--secondary-color);
            color: var(--text-color);
            display: flex;
            min-height: 100vh;
        }

        /* ì‚¬ì´ë“œë°” */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--primary-color);
            color: white;
            position: fixed;
            height: 100vh;
            left: 0; top: 0;
            display: flex;
            flex-direction: column;
            padding: 1rem;
            z-index: 100;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            padding: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
            text-decoration: none;
        }

        .nav-menu { list-style: none; flex: 1; }
        .nav-item { margin-bottom: 0.5rem; }
        .nav-link {
            display: flex; align-items: center; gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s;
            cursor: pointer;
        }
        .nav-link:hover, .nav-link.active { background: rgba(255, 255, 255, 0.1); color: white; }
        .admin-profile {
            padding: 1rem; border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex; align-items: center; gap: 0.75rem;
        }

        /* ë©”ì¸ ì»¨í…ì¸  */
        .main-content { margin-left: var(--sidebar-width); flex: 1; padding: 2rem; }
        .page-header { margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center; }
        .page-title { font-size: 1.75rem; color: var(--primary-color); font-weight: 700; }

        .card {
            background: white; border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 1.5rem; margin-bottom: 1.5rem;
        }

        /* íƒ­ ì»¨í…ì¸  ì œì–´ */
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ì„œë¸Œ íƒ­ */
        .sub-nav {
            display: flex; gap: 1rem; margin-bottom: 1.5rem; border-bottom: 2px solid #e9ecef; padding-bottom: 0; overflow-x: auto;
        }
        .sub-nav-item {
            padding: 0.75rem 1rem; cursor: pointer; font-weight: 600; color: #6c757d; border-bottom: 3px solid transparent; margin-bottom: -2px; transition: all 0.2s; white-space: nowrap;
        }
        .sub-nav-item:hover { color: var(--primary-color); }
        .sub-nav-item.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        .sub-tab-content { display: none; }
        .sub-tab-content.active { display: block; animation: fadeIn 0.3s ease; }

        /* ë²„íŠ¼ */
        .btn {
            padding: 0.6rem 1.2rem; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.2s;
            display: inline-flex; align-items: center; gap: 0.5rem; font-size: 0.9rem; text-decoration: none;
        }
        .btn-sm { padding: 0.4rem 0.8rem; font-size: 0.8rem; }
        .btn-primary { background: var(--primary-color); color: white; }
        .btn-secondary { background: var(--accent-color); color: white; }
        .btn-danger { background: var(--danger-color); color: white; }
        .btn-success { background: var(--success-color); color: white; }
        .btn-outline { background: white; border: 1px solid var(--border-color); color: var(--text-color); }
        .btn:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn.active { background: var(--primary-color); color: white; border-color: var(--primary-color); }

        /* í…Œì´ë¸” ë° ê²€ìƒ‰/í˜ì´ì§• ìŠ¤íƒ€ì¼ (New) */
        .table-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 1rem; }
        .search-box { display: flex; gap: 0.5rem; align-items: center; }
        .search-box input { padding: 0.5rem; border: 1px solid #dee2e6; border-radius: 4px; min-width: 250px; }
        
        .table-container { overflow-x: auto; min-height: 200px; } /* ìµœì†Œ ë†’ì´ ì§€ì •ìœ¼ë¡œ ê¹œë¹¡ì„ ë°©ì§€ */
        table { width: 100%; border-collapse: collapse; margin-top: 0.5rem; min-width: 800px; }
        th { background: #f8f9fa; color: var(--primary-color); padding: 1rem; text-align: left; font-weight: 600; border-bottom: 2px solid var(--border-color); white-space: nowrap; }
        td { padding: 1rem; border-bottom: 1px solid var(--border-color); vertical-align: middle; white-space: nowrap; }
        .clickable-cell { cursor: pointer; color: var(--primary-color); font-weight: 600; text-decoration: underline; text-underline-offset: 4px; }
        
        .pagination { display: flex; justify-content: center; gap: 0.5rem; margin-top: 1.5rem; align-items: center; }
        .page-btn { padding: 0.4rem 0.8rem; border: 1px solid #dee2e6; background: white; border-radius: 4px; cursor: pointer; min-width: 32px; text-align: center; }
        .page-btn:hover { background: #e9ecef; }
        .page-btn.active { background: var(--primary-color); color: white; border-color: var(--primary-color); }
        .page-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* í¼ */
        .form-group { margin-bottom: 1rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--primary-color); }
        .form-control { width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 6px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }

        /* ì—ë””í„° */
        .editor-container { border: 1px solid var(--border-color); border-radius: 6px; overflow: hidden; }
        .editor-toolbar { background: #f8f9fa; border-bottom: 1px solid var(--border-color); padding: 0.5rem; display: flex; gap: 0.5rem; align-items: center; }
        .editor-btn { background: white; border: 1px solid #dee2e6; border-radius: 4px; width: 30px; height: 30px; display: flex; justify-content: center; align-items: center; cursor: pointer; font-weight: bold; }
        .editor-content { min-height: 300px; padding: 1rem; outline: none; overflow-y: auto; background: white; }
        .color-picker { width: 30px; height: 30px; padding: 0; border: none; cursor: pointer; }

        /* ëª¨ë‹¬ */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: white; width: 90%; max-width: 800px; border-radius: 12px; padding: 2rem; max-height: 90vh; overflow-y: auto; }

        /* ê¸°íƒ€ */
        .tab-btn-group { display: flex; gap: 0.5rem; margin-bottom: 1rem; border-bottom: 1px solid #eee; padding-bottom: 1rem; }
        .badge { padding: 0.25rem 0.6rem; border-radius: 4px; font-size: 0.8rem; font-weight: 600; display: inline-flex; align-items: center; gap: 4px; }
        .badge-blue { background: #e3f2fd; color: #1565c0; }
        .badge-green { background: #e8f5e9; color: #2e7d32; }
        .badge-red { background: #ffebee; color: #c62828; }
        .badge-gray { background: #f1f3f5; color: #495057; }
        .badge-warning { background: var(--warning-bg); color: var(--warning-text); }
        .badge-point { background: #fff8e1; color: #f57f17; border: 1px solid #ffecb3; }
        .badge-purple { background: #f3e5f5; color: #7b1fa2; }
        .password-display { font-family: monospace; background: #f8f9fa; padding: 2px 6px; border-radius: 4px; border: 1px solid #dee2e6; color: #d63384; font-weight: bold; }
        .status-card { display: flex; align-items: center; gap: 1rem; background: #fff; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .status-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; justify-content: center; align-items: center; font-size: 1.5rem; }
    </style>
</head>
<body>

    <!-- ì‚¬ì´ë“œë°” -->
    <nav class="sidebar">
        <a href="#" class="logo"><i class="ph ph-briefcase-metal"></i> Fin.Master</a>
        <ul class="nav-menu">
            <li class="nav-item"><a class="nav-link active" onclick="switchTab('dashboard')"><i class="ph ph-squares-four"></i> ëŒ€ì‹œë³´ë“œ</a></li>
            <li class="nav-item"><a class="nav-link" onclick="switchTab('users')"><i class="ph ph-users"></i> íšŒì› ê´€ë¦¬</a></li>
            <li class="nav-item"><a class="nav-link" onclick="switchTab('payment')"><i class="ph ph-credit-card"></i> ê²°ì œÂ·í¬ì¸íŠ¸</a></li>
            <li class="nav-item"><a class="nav-link" onclick="switchTab('prompts')"><i class="ph ph-robot"></i> AI í”„ë¡¬í”„íŠ¸</a></li>
            <li class="nav-item"><a class="nav-link" onclick="switchTab('suggestions')"><i class="ph ph-mailbox"></i> ì œì•ˆ/ê±´ì˜</a></li>
            <li class="nav-item"><a class="nav-link" onclick="switchTab('notices')"><i class="ph ph-megaphone"></i> ê³µì§€ì‚¬í•­</a></li>
            <li class="nav-item"><a class="nav-link" onclick="switchTab('admins')"><i class="ph ph-user-gear"></i> ê´€ë¦¬ì ê´€ë¦¬</a></li>
            <li class="nav-item"><a class="nav-link" onclick="switchTab('terms')"><i class="ph ph-scroll"></i> ì•½ê´€ ë° ì •ì±…</a></li>
        </ul>
        <div class="admin-profile">
            <i class="ph ph-user-circle" style="font-size: 2rem;"></i>
            <div><div style="font-weight: 600;">ìµœê³ ê´€ë¦¬ì</div><div style="font-size: 0.8rem; opacity: 0.7; cursor: pointer;" onclick="alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.')">ë¡œê·¸ì•„ì›ƒ</div></div>
        </div>
    </nav>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="main-content">
        <!-- 1. ëŒ€ì‹œë³´ë“œ -->
        <div id="dashboard" class="tab-content active">
            <div class="page-header">
                <h1 class="page-title">ëŒ€ì‹œë³´ë“œ</h1>
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div style="color: #666;">ì˜¤ëŠ˜ ë‚ ì§œ: <span id="currentDate"></span></div>
                    <a href="https://console.cloud.google.com/apis/api/generativelanguage.googleapis.com/metrics" target="_blank" class="btn btn-outline" style="color: #4285F4; border-color: #4285F4;"><i class="ph ph-google-logo"></i> Gemini API ì‚¬ìš©ëŸ‰ ì¡°íšŒ</a>
                </div>
            </div>
            <!-- í†µê³„ ì¹´ë“œ ìƒëµ (ê¸°ì¡´ ìœ ì§€) -->
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem;">
                <div class="status-card"><div class="status-icon" style="background: #e3f2fd; color: #1565c0;"><i class="ph ph-users"></i></div><div><div style="font-size: 0.9rem; color: #666;">ì „ì²´ íšŒì›</div><div style="font-size: 1.5rem; font-weight: 700;">1,240</div></div></div>
                <div class="status-card"><div class="status-icon" style="background: #e8f5e9; color: #2e7d32;"><i class="ph ph-credit-card"></i></div><div><div style="font-size: 0.9rem; color: #666;">ì´ë²ˆë‹¬ ê²°ì œì™„ë£Œ</div><div style="font-size: 1.5rem; font-weight: 700;">1,180ê±´</div></div></div>
                <div class="status-card"><div class="status-icon" style="background: #ffebee; color: #c62828;"><i class="ph ph-warning-circle"></i></div><div><div style="font-size: 0.9rem; color: #666;">ì‹ ê·œ ì‹ ì²­ ëŒ€ê¸°</div><div style="font-size: 1.5rem; font-weight: 700; color: var(--danger-color);">3ê±´</div></div></div>
                <div class="status-card"><div class="status-icon" style="background: #fff8e1; color: #f57f17;"><i class="ph ph-coins"></i></div><div><div style="font-size: 0.9rem; color: #666;">ì´ ë°œí–‰ í¬ì¸íŠ¸</div><div style="font-size: 1.5rem; font-weight: 700;">2.4M P</div></div></div>
            </div>
        </div>

        <!-- 2. íšŒì› ê´€ë¦¬ -->
        <div id="users" class="tab-content">
            <div class="page-header">
                <h1 class="page-title">íšŒì› ê´€ë¦¬</h1>
                <button class="btn btn-primary" onclick="openRegisterModal()"><i class="ph ph-user-plus"></i> ìˆ˜ë™ íšŒì› ë“±ë¡</button>
            </div>

            <!-- ê°€ì… ì‹ ì²­ ë‚´ì—­ -->
            <div class="card" style="border-left: 4px solid var(--accent-color);">
                <div class="table-controls">
                    <h3>ğŸ“ ê°€ì… ì‹ ì²­ ë‚´ì—­ (ìŠ¹ì¸ ëŒ€ê¸°)</h3>
                    <div class="search-box">
                        <input type="text" id="pendingSearch" placeholder="ì´ë¦„, ì†Œì†, ì—°ë½ì²˜ ê²€ìƒ‰" onkeyup="renderUsers()">
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead><tr><th>ì‹ ì²­ì¼ì‹œ</th><th>ì„±ëª…</th><th>ì†Œì†/ì§í•¨</th><th>ì—°ë½ì²˜</th><th>ìœ í˜•</th><th>ê°€ì…ë¹„</th><th>ê´€ë¦¬</th></tr></thead>
                        <tbody id="pendingTableBody"></tbody>
                    </table>
                </div>
                <div id="pendingPagination" class="pagination"></div>
            </div>
            
            <!-- ì „ì²´ íšŒì› ëª©ë¡ -->
            <div class="card">
                <div class="table-controls">
                    <h3>ì „ì²´ íšŒì› ëª©ë¡</h3>
                    <div class="search-box">
                        <input type="text" id="userSearch" placeholder="ì•„ì´ë””, ì´ë¦„, ì—°ë½ì²˜ ê²€ìƒ‰" onkeyup="renderUsers()">
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead><tr><th>No</th><th>ì•„ì´ë””</th><th>ì„±ëª…</th><th>ì†Œì†/ì§í•¨</th><th>ìœ í˜•</th><th>ì—°ë½ì²˜</th><th>ì›” ê²°ì œì•¡</th><th>ìƒíƒœ</th><th>ê´€ë¦¬</th></tr></thead>
                        <tbody id="userTableBody"></tbody>
                    </table>
                </div>
                <div id="userPagination" class="pagination"></div>
            </div>
        </div>

        <!-- 3. ê²°ì œ ë° í¬ì¸íŠ¸ ê´€ë¦¬ -->
        <div id="payment" class="tab-content">
            <div class="page-header">
                <h1 class="page-title">ê²°ì œ ë° í¬ì¸íŠ¸ ê´€ë¦¬</h1>
                <button class="btn btn-secondary" onclick="runBatchSimulation()"><i class="ph ph-play-circle"></i> ì •ê¸° ê²°ì œ ì¼ê´„ ì‹¤í–‰</button>
            </div>

            <div class="sub-nav">
                <div class="sub-nav-item active" onclick="switchSubTab(this, 'payment-status-view')">ê²°ì œ í˜„í™© ë° ì´ë ¥</div>
                <div class="sub-nav-item" onclick="switchSubTab(this, 'payment-points-view')">í¬ì¸íŠ¸ ì´ìš© ë‚´ì—­</div>
                <div class="sub-nav-item" onclick="switchSubTab(this, 'payment-usage_analysis-view')">í¬ì¸íŠ¸ ì‚¬ìš© ë¶„ì„</div>
                <div class="sub-nav-item" onclick="switchSubTab(this, 'payment-expiration-view')">í¬ì¸íŠ¸ ì†Œë©¸ ê´€ë¦¬</div>
                <div class="sub-nav-item" onclick="switchSubTab(this, 'payment-unpaid-view')">ë¯¸ê²°ì œ/ì—°ì²´ ê´€ë¦¬</div>
            </div>

            <!-- ê²°ì œ í˜„í™© -->
            <div id="payment-status-view" class="sub-tab-content active">
                <div class="card">
                    <div class="table-controls">
                        <h3>ğŸ’³ ì´ë²ˆë‹¬ ê²°ì œ í˜„í™©</h3>
                        <div class="search-box"><input type="text" id="paymentSearch" placeholder="ì•„ì´ë””, ì´ë¦„, ê²°ê³¼ ê²€ìƒ‰" onkeyup="renderPaymentHistory()"></div>
                    </div>
                    <div class="table-container">
                        <table><thead><tr><th>ê²°ì œì¼ì‹œ</th><th>ì•„ì´ë””</th><th>ì„±ëª…</th><th>ê²°ì œ ê¸ˆì•¡</th><th>ìœ í˜•</th><th>ê²°ê³¼</th></tr></thead><tbody id="paymentHistoryBody"></tbody></table>
                    </div>
                    <div id="paymentPagination" class="pagination"></div>
                </div>
            </div>
            
            <!-- í¬ì¸íŠ¸ ë¡œê·¸ -->
            <div id="payment-points-view" class="sub-tab-content">
                <div class="card">
                    <div class="table-controls">
                        <h3>ğŸ“Š í¬ì¸íŠ¸ ë¡œê·¸</h3>
                        <div class="search-box"><input type="text" id="pointSearch" placeholder="ì•„ì´ë””, ë‚´ìš© ê²€ìƒ‰" onkeyup="renderPointLogs()"></div>
                    </div>
                    <div class="table-container">
                        <table><thead><tr><th>ì¼ì‹œ</th><th>ì•„ì´ë””</th><th>ì„±ëª…</th><th>êµ¬ë¶„</th><th>ë‚´ìš©</th><th>ë³€ë™</th><th>ì”ì•¡</th></tr></thead><tbody id="pointLogsBody"></tbody></table>
                    </div>
                    <div id="pointPagination" class="pagination"></div>
                </div>
            </div>

            <!-- í¬ì¸íŠ¸ ë¶„ì„ -->
            <div id="payment-usage_analysis-view" class="sub-tab-content">
                <div class="card">
                    <h3>ğŸ“ˆ í¬ì¸íŠ¸ ì‚¬ìš© ë¶„ì„</h3>
                    <div class="table-container">
                        <table style="text-align: center;">
                            <thead><tr><th rowspan="2">íšŒì›ì •ë³´</th><th rowspan="2">ëŒ€ìƒ ì›”</th><th colspan="2" style="background:#e3f2fd">ìš”ì•½ë¶„ì„(500P)</th><th colspan="2" style="background:#e8f5e9">ìƒì„¸ë¶„ì„(2000P)</th><th rowspan="2">ì´ í¬ì¸íŠ¸</th></tr><tr><th>íšŸìˆ˜</th><th>ì°¨ê°ì•¡</th><th>íšŸìˆ˜</th><th>ì°¨ê°ì•¡</th></tr></thead>
                            <tbody id="usageStatsBody"></tbody>
                        </table>
                    </div>
                    <!-- ë¶„ì„ì€ ì „ì²´ ì§‘ê³„ë¼ í˜ì´ì§• ìƒëµ í˜¹ì€ í•„ìš”ì‹œ ì¶”ê°€ -->
                </div>
            </div>
            <div id="payment-expiration-view" class="sub-tab-content"><div class="card"><p>ì†Œë©¸ ì˜ˆì • ëª©ë¡ (í˜ì´ì§• ì¤€ë¹„ì¤‘)</p></div></div>
            <div id="payment-unpaid-view" class="sub-tab-content"><div class="card"><p>ë¯¸ê²°ì œ íšŒì› ëª©ë¡ (í˜ì´ì§• ì¤€ë¹„ì¤‘)</p></div></div>
        </div>

        <!-- 4. í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ íƒ­ -->
        <div id="prompts" class="tab-content">
            <div class="page-header"><h1 class="page-title">AI í”„ë¡¬í”„íŠ¸ ê´€ë¦¬</h1></div>
            <div class="sub-nav">
                <div class="sub-nav-item active" onclick="switchSubTab(this, 'prompt-company')">ê¸°ì—…ë§ˆë‹¹</div>
                <div class="sub-nav-item" onclick="switchSubTab(this, 'prompt-ceo')">CEO Focus</div>
                <div class="sub-nav-item" onclick="switchSubTab(this, 'prompt-guarantee')">ë³´ì¥ë¶„ì„</div>
                <div class="sub-nav-item" onclick="switchSubTab(this, 'prompt-ff')">FF</div>
            </div>
            <div id="prompt-company" class="sub-tab-content active">
                <div class="card"><h3>ğŸ­ ê¸°ì—…ë§ˆë‹¹</h3><div class="form-group"><textarea class="form-control" style="min-height: 400px; font-family: monospace;">System Instruction...</textarea></div><button class="btn btn-primary">ì €ì¥</button></div>
            </div>
            <div id="prompt-ceo" class="sub-tab-content"><div class="card"><h3>ğŸ‘” CEO Focus</h3><textarea class="form-control" style="min-height: 400px;"></textarea><button class="btn btn-primary mt-1">ì €ì¥</button></div></div>
            <div id="prompt-guarantee" class="sub-tab-content"><div class="card"><h3>ğŸ›¡ï¸ ë³´ì¥ë¶„ì„</h3><textarea class="form-control" style="min-height: 400px;"></textarea><button class="btn btn-primary mt-1">ì €ì¥</button></div></div>
            <div id="prompt-ff" class="sub-tab-content"><div class="card"><h3>ğŸ“‹ FF</h3><textarea class="form-control" style="min-height: 400px;"></textarea><button class="btn btn-primary mt-1">ì €ì¥</button></div></div>
        </div>

        <!-- 5. ì œì•ˆ/ê±´ì˜ -->
        <div id="suggestions" class="tab-content">
            <div class="page-header"><h1 class="page-title">ì œì•ˆ / ê±´ì˜ì‚¬í•­</h1></div>
            <div class="card">
                <div class="table-controls">
                    <h3>ëª©ë¡</h3>
                    <div class="search-box"><input type="text" id="suggestionSearch" placeholder="ì œëª©, ì‘ì„±ì ê²€ìƒ‰" onkeyup="renderSuggestions()"></div>
                </div>
                <div class="table-container">
                    <table>
                        <thead><tr><th>No</th><th>ì œëª©</th><th>ì‘ì„±ì</th><th>ì‘ì„±ì¼</th><th>ìƒíƒœ</th><th>ê´€ë¦¬</th></tr></thead>
                        <tbody id="suggestionTableBody"></tbody>
                    </table>
                </div>
                <div id="suggestionPagination" class="pagination"></div>
            </div>
        </div>

        <!-- 6. ê³µì§€ì‚¬í•­ -->
        <div id="notices" class="tab-content">
            <div class="page-header"><h1 class="page-title">ê³µì§€ì‚¬í•­ ê´€ë¦¬</h1><button class="btn btn-primary" onclick="openNoticeModal()"><i class="ph ph-pencil-simple"></i> ìƒˆ ê³µì§€ ë“±ë¡</button></div>
            <div class="card">
                <div class="table-controls">
                    <h3>ë“±ë¡ëœ ê³µì§€ì‚¬í•­</h3>
                    <div class="search-box"><input type="text" id="noticeSearch" placeholder="ì œëª© ê²€ìƒ‰" onkeyup="renderNotices()"></div>
                </div>
                <div class="table-container">
                    <table>
                        <thead><tr><th style="width: 60px;">No</th><th>ì œëª©</th><th>ë“±ë¡ì¼ì</th><th>ì²¨ë¶€íŒŒì¼</th><th>ê´€ë¦¬</th></tr></thead>
                        <tbody id="noticeTableBody"></tbody>
                    </table>
                </div>
                <div id="noticePagination" class="pagination"></div>
            </div>
        </div>

        <!-- 7. ê´€ë¦¬ì ê´€ë¦¬ -->
        <div id="admins" class="tab-content">
            <div class="page-header"><h1 class="page-title">ê´€ë¦¬ì ê³„ì • ê´€ë¦¬</h1><button class="btn btn-primary"><i class="ph ph-plus"></i> ê´€ë¦¬ì ì¶”ê°€</button></div>
            <div class="card">
                <div class="table-controls">
                    <h3>ê´€ë¦¬ì ëª©ë¡</h3>
                    <div class="search-box"><input type="text" id="adminSearch" placeholder="ì•„ì´ë””, ì´ë¦„ ê²€ìƒ‰" onkeyup="renderAdmins()"></div>
                </div>
                <div class="table-container">
                    <table><thead><tr><th>ì•„ì´ë””</th><th>ì´ë¦„</th><th>ê¶Œí•œ</th><th>ê´€ë¦¬</th></tr></thead><tbody id="adminTableBody"></tbody></table>
                </div>
                <div id="adminPagination" class="pagination"></div>
            </div>
        </div>

        <!-- 8. ì•½ê´€ -->
        <div id="terms" class="tab-content">
            <div class="page-header"><h1 class="page-title">ì•½ê´€ ë° ì •ì±… ê´€ë¦¬</h1></div>
            <div class="card">
                <div class="tab-btn-group">
                    <button class="btn btn-primary active" id="btn-term-service" onclick="loadTerm('service')">ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€</button>
                    <button class="btn btn-outline" id="btn-term-privacy" onclick="loadTerm('privacy')">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</button>
                    <button class="btn btn-outline" id="btn-term-marketing" onclick="loadTerm('marketing')">ë§ˆì¼€íŒ… ìˆ˜ì‹ ë™ì˜</button>
                </div>
                <div class="form-group"><textarea class="form-control" id="termEditor" style="min-height: 500px; font-family: monospace; line-height: 1.6;"></textarea></div>
                <button class="btn btn-primary" onclick="saveTerms()"><i class="ph ph-floppy-disk"></i> í˜„ì¬ ë‚´ìš© ì €ì¥</button>
            </div>
        </div>
    </main>

    <!-- ëª¨ë‹¬: ì‹ ê·œ íšŒì› ë“±ë¡ (ìƒëµ) -->
    <!-- ëª¨ë‹¬: ê³µì§€ì‚¬í•­ ì‘ì„± (ìƒëµ) -->
    <!-- ëª¨ë‹¬: íšŒì› ì •ë³´ ìˆ˜ì • (ìƒëµ) -->
    <!-- (í•„ìš”ì‹œ ê¸°ì¡´ ì½”ë“œì™€ ë™ì¼í•œ ëª¨ë‹¬ êµ¬ì¡° ì‚½ì…) -->
    <!-- ì—¬ê¸°ì„œëŠ” ìŠ¤í¬ë¦½íŠ¸ ë¡œì§ì— ì§‘ì¤‘í•˜ê¸° ìœ„í•´ HTML ëª¨ë‹¬ êµ¬ì¡°ëŠ” ê¸°ì¡´ ìœ ì§€ë¼ ê°€ì •í•˜ê³  ìƒëµí•˜ê±°ë‚˜, ì‹¤ì œ êµ¬í˜„ ì‹œ V17ì˜ ëª¨ë‹¬ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ ë„£ìœ¼ì‹œë©´ ë©ë‹ˆë‹¤. -->
    
    <!-- í¸ì˜ìƒ Register ëª¨ë‹¬ë§Œ í•˜ë‚˜ ì˜ˆì‹œë¡œ ë‚¨ê¹€ -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <h3>ğŸ‘¥ ì‹ ê·œ íšŒì› ë“±ë¡</h3>
            <form id="registerForm">
                <div style="padding: 1rem; background: #e3f2fd; border-radius: 8px; margin-bottom: 1rem;">
                    <label><input type="checkbox" id="regFeeCheck"> ê°€ì…ë¹„ ì…ê¸ˆ í™•ì¸</label>
                </div>
                <div class="form-row">
                    <div class="form-group"><label>ì•„ì´ë””</label><input type="text" id="newUserId" class="form-control"></div>
                    <div class="form-group"><label>ì„±ëª…</label><input type="text" id="newUserName" class="form-control"></div>
                </div>
                <div class="form-group"><label>ì›” ê²°ì œì•¡</label><input type="number" id="newUserFee" class="form-control" value="10000"></div>
                <div class="flex-between">
                    <button type="button" class="btn btn-outline" onclick="document.getElementById('registerModal').style.display='none'">ì·¨ì†Œ</button>
                    <button type="submit" class="btn btn-primary">ìƒì„±</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ê³µì§€ì‚¬í•­ ëª¨ë‹¬ -->
    <div id="noticeModal" class="modal">
        <div class="modal-content">
            <h3>ğŸ“¢ ê³µì§€ì‚¬í•­ ë“±ë¡</h3>
            <form id="noticeForm">
                <input type="hidden" id="noticeId">
                <div class="form-group"><label>ì œëª©</label><input type="text" id="noticeTitle" class="form-control"></div>
                <div class="form-group"><label>ë‚´ìš©</label><div class="editor-container"><div class="editor-toolbar"><button type="button" onclick="execCmd('bold')"><b>B</b></button></div><div id="noticeEditor" class="editor-content" contenteditable="true"></div></div></div>
                <div class="flex-between"><button type="button" class="btn btn-outline" onclick="document.getElementById('noticeModal').style.display='none'">ì·¨ì†Œ</button><button type="submit" class="btn btn-primary">ì €ì¥</button></div>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('currentDate').innerText = new Date().toLocaleDateString();

        function switchTab(tabId) {
            document.querySelectorAll('.nav-menu .nav-link').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            event.target.closest('.nav-link').classList.add('active');
            document.getElementById(tabId).classList.add('active');
            
            // íƒ­ ì „í™˜ ì‹œ ì´ˆê¸° ë Œë”ë§
            if(tabId === 'users') { renderUsers(); }
            if(tabId === 'notices') { renderNotices(); }
            if(tabId === 'suggestions') { renderSuggestions(); }
            if(tabId === 'admins') { renderAdmins(); }
            if(tabId === 'payment') { renderPaymentHistory(); renderPointLogs(); }
            if(tabId === 'terms') loadTerm('service');
        }

        function switchSubTab(element, viewId) {
            element.parentElement.querySelectorAll('.sub-nav-item').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            element.parentElement.parentElement.querySelectorAll('.sub-tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
        }

        // --- ê³µí†µ í˜ì´ì§•/ê²€ìƒ‰ ë¡œì§ ---
        const PAGE_SIZE = 15;
        const state = {
            users: { page: 1, search: '' },
            pending: { page: 1, search: '' },
            payments: { page: 1, search: '' },
            points: { page: 1, search: '' },
            notices: { page: 1, search: '' },
            suggestions: { page: 1, search: '' },
            admins: { page: 1, search: '' }
        };

        function filterAndPaginate(data, stateKey) {
            const s = state[stateKey];
            // ê²€ìƒ‰ í•„í„°ë§ (ëª¨ë“  í•„ë“œ ëŒ€ìƒ)
            const filtered = data.filter(item => {
                if (!s.search) return true;
                return Object.values(item).some(val => 
                    String(val).toLowerCase().includes(s.search.toLowerCase())
                );
            });
            // í˜ì´ì§• ì²˜ë¦¬
            const totalPages = Math.ceil(filtered.length / PAGE_SIZE) || 1;
            if (s.page > totalPages) s.page = totalPages; // í˜ì´ì§€ ë³´ì •
            const start = (s.page - 1) * PAGE_SIZE;
            const paged = filtered.slice(start, start + PAGE_SIZE);
            return { paged, totalPages, totalCount: filtered.length };
        }

        function renderPaginationControls(containerId, stateKey, totalPages, renderFn) {
            const container = document.getElementById(containerId);
            let html = `<button class="page-btn" onclick="changePage('${stateKey}', ${state[stateKey].page - 1})" ${state[stateKey].page === 1 ? 'disabled' : ''}>Prev</button>`;
            
            for(let i=1; i<=totalPages; i++) {
                html += `<button class="page-btn ${i === state[stateKey].page ? 'active' : ''}" onclick="changePage('${stateKey}', ${i})">${i}</button>`;
            }
            
            html += `<button class="page-btn" onclick="changePage('${stateKey}', ${state[stateKey].page + 1})" ${state[stateKey].page === totalPages ? 'disabled' : ''}>Next</button>`;
            container.innerHTML = html;
            
            // ì „ì—­ í•¨ìˆ˜ë¡œ ì—°ê²°í•˜ê¸° ìœ„í•´ window ê°ì²´ì— í• ë‹¹ (ê°„ë‹¨ êµ¬í˜„ìš©)
            window.changePage = (key, newPage) => {
                if(newPage < 1 || newPage > totalPages) return;
                state[key].page = newPage;
                renderFn(); // í•´ë‹¹ ë Œë” í•¨ìˆ˜ ì¬í˜¸ì¶œ
            };
        }

        // --- ë°ì´í„° (ëŒ€ëŸ‰ ë”ë¯¸ ë°ì´í„° ìƒì„±) ---
        function generateDummy(count, generator) {
            return Array.from({length: count}, (_, i) => generator(i + 1));
        }

        let pendingApps = generateDummy(5, i => ({ id: 100+i, name: `ì‹ ì²­ì${i}`, company: 'OOìƒëª…', title: 'íŒ€ì¥', phone: `010-0000-000${i}`, type: 'general', email: `user${i}@test.com`, appliedAt: '2025-11-30 10:00' }));
        let users = generateDummy(50, i => ({ id: i, userId: `FP2025${i.toString().padStart(3,'0')}`, name: `íšŒì›${i}`, company: 'ì‚¼ì„±ìƒëª…', jobTitle: 'FP', type: 'branch', phone: '010-1234-5678', password: 'pw', status: 'active', monthlyFee: 10000 }));
        let notices = generateDummy(20, i => ({ id: i, title: `ê³µì§€ì‚¬í•­ ì œëª© í…ŒìŠ¤íŠ¸ ${i}`, content: 'ë‚´ìš©...', date: '2025-11-28', file: '' }));
        let suggestions = generateDummy(10, i => ({ id: i, title: `ê±´ì˜ì‚¬í•­ì…ë‹ˆë‹¤ ${i}`, writer: `íšŒì›${i}`, date: '2025-11-30', status: 'ëŒ€ê¸°' }));
        let admins = [ { id: 'admin', name: 'ìµœê³ ê´€ë¦¬ì', role: 'Super', date: '2025-01-01' }, { id: 'sub1', name: 'ìš´ì˜ì', role: 'Manager', date: '2025-02-01' } ];
        let payments = generateDummy(30, i => ({ date: '2025-11-30', userId: `FP2025${i}`, name: `íšŒì›${i}`, amount: 10000, type: 'ì •ê¸°ê²°ì œ', result: 'success' }));
        let pointLogs = generateDummy(30, i => ({ date: '2025-11-30', userId: `FP2025${i}`, name: `íšŒì›${i}`, type: 'earn', category: 'ì ë¦½', amount: 10000, balance: 10000 }));

        // --- ë Œë”ë§ í•¨ìˆ˜ë“¤ (í˜ì´ì§• ì ìš©) ---
        function renderUsers() {
            // ëŒ€ê¸°ì ëª©ë¡
            state.pending.search = document.getElementById('pendingSearch').value;
            const pendingRes = filterAndPaginate(pendingApps, 'pending');
            const pendingBody = document.getElementById('pendingTableBody');
            if(pendingRes.totalCount === 0) pendingBody.innerHTML = '<tr><td colspan="7" style="text-align:center;">ë°ì´í„° ì—†ìŒ</td></tr>';
            else pendingBody.innerHTML = pendingRes.paged.map(app => `<tr><td>${app.appliedAt}</td><td>${app.name}</td><td>${app.company}/${app.title}</td><td>${app.phone}</td><td><span class="badge badge-gray">${app.type}</span></td><td><span class="badge badge-warning">í™•ì¸í•„ìš”</span></td><td><button class="btn btn-primary btn-sm" onclick="openIssueIdModal(${app.id})">IDë°œê¸‰</button></td></tr>`).join('');
            renderPaginationControls('pendingPagination', 'pending', pendingRes.totalPages, renderUsers);

            // ì „ì²´ íšŒì› ëª©ë¡
            state.users.search = document.getElementById('userSearch').value;
            const userRes = filterAndPaginate(users, 'users');
            const userBody = document.getElementById('userTableBody');
            userBody.innerHTML = userRes.paged.map((u) => `<tr><td>${u.id}</td><td class="clickable-cell">${u.userId}</td><td>${u.name}</td><td>${u.company}</td><td>${u.type}</td><td>${u.phone}</td><td style="font-weight:bold; color:var(--accent-color);">${u.monthlyFee.toLocaleString()}</td><td><span class="badge badge-green">${u.status}</span></td><td><button class="btn btn-outline btn-sm">ê´€ë¦¬</button></td></tr>`).join('');
            renderPaginationControls('userPagination', 'users', userRes.totalPages, renderUsers);
        }

        function renderNotices() {
            state.notices.search = document.getElementById('noticeSearch').value;
            const res = filterAndPaginate(notices, 'notices');
            document.getElementById('noticeTableBody').innerHTML = res.paged.map(n => `<tr><td>${n.id}</td><td style="font-weight:600; cursor:pointer;" onclick="openEditNotice(${n.id})">${n.title}</td><td>${n.date}</td><td>${n.file?n.file:'-'}</td><td><button class="btn btn-outline btn-sm" onclick="openEditNotice(${n.id})">ìˆ˜ì •</button></td></tr>`).join('');
            renderPaginationControls('noticePagination', 'notices', res.totalPages, renderNotices);
        }

        function renderSuggestions() {
            state.suggestions.search = document.getElementById('suggestionSearch').value;
            const res = filterAndPaginate(suggestions, 'suggestions');
            document.getElementById('suggestionTableBody').innerHTML = res.paged.map(s => `<tr><td>${s.id}</td><td>${s.title}</td><td>${s.writer}</td><td>${s.date}</td><td><span class="badge badge-warning">${s.status}</span></td><td><button class="btn btn-outline btn-sm">ë³´ê¸°</button></td></tr>`).join('');
            renderPaginationControls('suggestionPagination', 'suggestions', res.totalPages, renderSuggestions);
        }

        function renderAdmins() {
            state.admins.search = document.getElementById('adminSearch').value;
            const res = filterAndPaginate(admins, 'admins');
            document.getElementById('adminTableBody').innerHTML = res.paged.map(a => `<tr><td>${a.id}</td><td>${a.name}</td><td>${a.role}</td><td>-</td></tr>`).join('');
            renderPaginationControls('adminPagination', 'admins', res.totalPages, renderAdmins);
        }

        function renderPaymentHistory() {
            state.payments.search = document.getElementById('paymentSearch').value;
            const res = filterAndPaginate(payments, 'payments');
            document.getElementById('paymentHistoryBody').innerHTML = res.paged.map(p => `<tr><td>${p.date}</td><td>${p.userId}</td><td>${p.name}</td><td>${p.amount.toLocaleString()}</td><td>${p.type}</td><td>${p.result}</td></tr>`).join('');
            renderPaginationControls('paymentPagination', 'payments', res.totalPages, renderPaymentHistory);
        }

        function renderPointLogs() {
            state.points.search = document.getElementById('pointSearch').value;
            const res = filterAndPaginate(pointLogs, 'points');
            document.getElementById('pointLogsBody').innerHTML = res.paged.map(l => `<tr><td>${l.date}</td><td>${l.userId}</td><td>${l.name}</td><td>${l.type}</td><td>${l.category}</td><td>${l.amount}</td><td>${l.balance}</td></tr>`).join('');
            renderPaginationControls('pointPagination', 'points', res.totalPages, renderPointLogs);
        }

        // --- ê¸°íƒ€ ë¡œì§ (ê¸°ì¡´ ìœ ì§€) ---
        function openIssueIdModal(id) { alert('ID ë°œê¸‰ ëª¨ë‹¬ ì˜¤í”ˆ: ' + id); }
        function openRegisterModal() { document.getElementById('registerModal').style.display='flex'; }
        function openNoticeModal() { document.getElementById('noticeModal').style.display='flex'; }
        function openEditNotice(id) { document.getElementById('noticeModal').style.display='flex'; }
        function execCmd(cmd) { document.execCommand(cmd, false, null); }
        function runBatchSimulation() { alert('ì¼ê´„ ê²°ì œ ì‹¤í–‰'); }
        function loadTerm(t) { document.getElementById('termEditor').value = t + ' ë‚´ìš©...'; }
        function saveTerms() { alert('ì €ì¥ë¨'); }

        window.onload = function() {
            renderUsers();
        }
    </script>
</body>
</html>